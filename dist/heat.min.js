"use strict";var Constant,Constant2;Constant2=Constant||(Constant={}),Constant2.HEAT_JS_ATTRIBUTE_NAME="data-heat-js",Constant2.HEAT_JS_MAP_DATE_ATTRIBUTE_NAME="data-heat-js-map-date",Constant2.HEAT_JS_CHART_DATE_ATTRIBUTE_NAME="data-heat-js-chart-date",Constant2.HEAT_JS_DAY_NUMBER_ATTRIBUTE_NAME="data-heat-js-day-number",Constant2.HEAT_JS_MONTH_NUMBER_ATTRIBUTE_NAME="data-heat-js-month-number",Constant2.HEAT_JS_STATISTICS_COLOR_RANGE_NAME_ATTRIBUTE_NAME="data-heat-js-statistics-color-range-name",Constant2.LOCAL_STORAGE_START_ID="HJS_",Constant2.COLOR_RANGE_HOLIDAY_ID="HOLIDAY";var ImportType=(e=>(e.csv="csv",e.json="json",e.txt="txt",e.md="md",e.tsv="tsv",e.yaml="yaml",e.toml="toml",e))(ImportType||{}),ExportType=(e=>(e.csv="csv",e.json="json",e.xml="xml",e.txt="txt",e.html="html",e.md="md",e.tsv="tsv",e.yaml="yaml",e.toml="toml",e))(ExportType||{}),Is,Default2,Str,Str2,DateTime,DomElement,ToolTip,Trigger,Binding,Configuration,Disabled,Visible,Visible2,Import,Export,Convert,Convert2;(e=>{function t(e){return null!=e&&""!==e.toString()}function n(e){return t(e)&&"object"==typeof e}function o(e){return n(e)&&e instanceof Array}e.defined=t,e.definedObject=n,e.definedBoolean=function(e){return t(e)&&"boolean"==typeof e},e.definedString=function(e){return t(e)&&"string"==typeof e},e.definedFunction=function(e){return t(e)&&"function"==typeof e},e.definedNumber=function(e){return t(e)&&"number"==typeof e},e.definedArray=o,e.definedDate=function(e){return n(e)&&e instanceof Date},e.invalidOptionArray=function(e,t=1){return!o(e)||e.length<t},e.holiday=function(t,n){const o={matched:!1,name:null},i=t.holidays.length,r=n.getDate(),a=n.getMonth()+1,s=n.getFullYear();for(let n=0;n<i;n++){let i=t.holidays[n];if(e.definedString(i.date)&&i.showInViews){const e=i.date.split("/");if(2===e.length?o.matched=r===parseInt(e[0])&&a===parseInt(e[1]):3===e.length&&(o.matched=r===parseInt(e[0])&&a===parseInt(e[1])&&s===parseInt(e[2])),o.matched){o.name=i.name;break}}}return o},e.monthVisible=function(e,t){return e.indexOf(t+1)>-1},e.dayVisible=function(e,t){return e.indexOf(t)>-1},e.yearVisible=function(e,t){return-1===e.yearsToHide.indexOf(t)&&(0===e._currentView.yearsAvailable.length||e._currentView.yearsAvailable.indexOf(t)>-1)},e.firstVisibleYear=function(e,t){return e._currentView.yearsAvailable.length>0&&t<=e._currentView.yearsAvailable[0]},e.lastVisibleYear=function(e,t){return e._currentView.yearsAvailable.length>0&&t>=e._currentView.yearsAvailable[e._currentView.yearsAvailable.length-1]},e.rgbColor=function(e){return e.startsWith("rgba")||e.startsWith("rgb")},e.hexColor=function(e){return e.startsWith("#")&&(6===e.length||8===e.length)}})(Is||(Is={})),(Default=>{function getAnyString(e,t){return"string"==typeof e?e:t}function getString(e,t){return Is.definedString(e)?e:t}function getBoolean(e,t){return Is.definedBoolean(e)?e:t}function getNumber(e,t){return Is.definedNumber(e)?e:t}function getNumberInRange(e,t,n,o){return Is.definedNumber(e)&&e>=t&&e<=n?e:o}function getFunction(e,t){return Is.definedFunction(e)?e:t}function getArray(e,t){return Is.definedArray(e)?e:t}function getObject(e,t){return Is.definedObject(e)?e:t}function getStringOrArray(e,t){let n=t;if(Is.definedString(e)){const o=e.toString().split(" ");0===o.length?e=t:n=o}else n=getArray(e,t);return n}function getObjectFromString(objectString,configurationOptions){const result={parsed:!0,object:null};try{Is.definedString(objectString)&&(result.object=JSON.parse(objectString))}catch(e1){try{result.object=eval(`(${objectString})`),Is.definedFunction(result.object)&&(result.object=result.object())}catch(e){configurationOptions.safeMode||(console.error(configurationOptions.text.objectErrorText.replace("{{error_1}}",e1.message).replace("{{error_2}}",e.message)),result.parsed=!1),result.object=null}}return result}Default.getAnyString=getAnyString,Default.getString=getString,Default.getBoolean=getBoolean,Default.getNumber=getNumber,Default.getNumberInRange=getNumberInRange,Default.getFunction=getFunction,Default.getArray=getArray,Default.getObject=getObject,Default.getStringOrArray=getStringOrArray,Default.getObjectFromString=getObjectFromString})(Default2||(Default2={})),Str2=Str||(Str={}),Str2.padNumber=function(e){const t=e.toString();return 1===t.length?"0"+t:t},Str2.startsWithAnyCase=function(e,t){return e.substring(0,t.length).toLowerCase()===t.toLowerCase()},Str2.friendlyNumber=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},(e=>{function t(e){return e.getDay()-1<0?6:e.getDay()-1}function n(e,t){let n=e.text.thText;return 31===t||21===t||1===t?n=e.text.stText:22===t||2===t?n=e.text.ndText:23!==t&&3!==t||(n=e.text.rdText),n}e.getTotalDaysInMonth=function(e,t){return new Date(e,t+1,0).getDate()},e.getWeekdayNumber=t,e.getDayOrdinal=n,e.getCustomFormattedDateText=function(e,o,i){let r=o;const a=t(i);return r=r.replace("{dddd}",e.text.dayNames[a]),r=r.replace("{dd}",Str.padNumber(i.getDate())),r=r.replace("{d}",i.getDate().toString()),r=r.replace("{o}",n(e,i.getDate())),r=r.replace("{mmmm}",e.text.monthNames[i.getMonth()]),r=r.replace("{mm}",Str.padNumber(i.getMonth()+1)),r=r.replace("{m}",(i.getMonth()+1).toString()),r=r.replace("{yyyy}",i.getFullYear().toString()),r=r.replace("{yyy}",i.getFullYear().toString().substring(1)),r=r.replace("{yy}",i.getFullYear().toString().substring(2)),r=r.replace("{y}",parseInt(i.getFullYear().toString().substring(2)).toString()),r},e.toStorageDate=function(e){return e.getFullYear()+"-"+Str.padNumber(e.getMonth()+1)+"-"+Str.padNumber(e.getDate())},e.getStorageDate=function(e){return e.split("-")},e.getStorageDateYear=function(e){return e.split("-")[0]},e.getDateForMondayOfCurrentWeek=function(){const e=new Date,t=e.getDay(),n=(0===t?-6:1)-t,o=new Date(e);return o.setDate(e.getDate()+n),o},e.isTodaysDate=function(e){const t=new Date;return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}})(DateTime||(DateTime={})),(e=>{function t(e,t,n="",o=null){const i=t.toLowerCase();let r="text"===i?document.createTextNode(""):document.createElement(i);return Is.defined(n)&&(r.className=n),Is.defined(o)?e.insertBefore(r,o):e.appendChild(r),r}function n(e,n,o,i,r=null){const a=t(e,n,o,r);if(a.innerHTML=i,"button"===n){a.type="button"}return a}function o(){const e=document.documentElement;return{left:e.scrollLeft-(e.clientLeft||0),top:e.scrollTop-(e.clientTop||0)}}e.createWithNoContainer=function(e){const t=e.toLowerCase();return"text"===t?document.createTextNode(""):document.createElement(t)},e.create=t,e.createWithHTML=n,e.createButton=function(e,n,o,i=null,r=null){const a=t(e,n,o,r);return a.type="button",Is.defined(i)&&(a.innerHTML=i),a},e.createIconButton=function(n,o,i,r,a=null){const s=t(n,o,i,a);return s.type="button",e.create(s,"i",r),s},e.getStyleValueByName=function(e,t,n=!1){let o=getComputedStyle(e).getPropertyValue(t);return n&&(o=parseFloat(o)),o},e.getStyleValueByNameSizingMetic=function(e,t){const n=getComputedStyle(e).getPropertyValue(t),o=parseFloat(n);return n.replace(o.toString(),"")},e.addClass=function(e,t){e.classList.add(t)},e.removeClass=function(e,t){e.classList.remove(t)},e.cancelBubble=function(e){e.preventDefault(),e.stopPropagation()},e.getScrollPosition=o,e.showElementAtMousePosition=function(e,t){let n=e.pageX,i=e.pageY;const r=o();t.style.display="block",n+t.offsetWidth>window.innerWidth?n-=t.offsetWidth:n++,i+t.offsetHeight>window.innerHeight?i-=t.offsetHeight:i++,n<r.left&&(n=e.pageX+1),i<r.top&&(i=e.pageY+1),t.style.left=`${n}px`,t.style.top=`${i}px`},e.reverseChildrenOrder=function(e){const t=e.children;let n=t.length-1;for(;n--;)e.appendChild(t[n])},e.createCheckBox=function(e,o,i){const r=t(e,"div"),a=t(r,"label","checkbox"),s=t(a,"input");return s.type="checkbox",s.name=i,t(a,"span","check-mark"),n(a,"span","text",o),s},e.addGradientEffect=function(t,n){const o=e.getStyleValueByName(t,"background-color"),i=e.getStyleValueByName(n,"background-color");n.style.background=`linear-gradient(to top, ${o}, ${i})`}})(DomElement||(DomElement={})),(e=>{function t(e,t=!0){let n=t?window.addEventListener:window.removeEventListener,i=t?document.addEventListener:document.removeEventListener;n("mousemove",()=>o(e)),i("scroll",()=>o(e))}function n(e,t,n){DomElement.cancelBubble(e),o(t),t._currentView.tooltipTimer=setTimeout(()=>{t._currentView.tooltip.innerHTML=n,t._currentView.tooltip.style.display="block",DomElement.showElementAtMousePosition(e,t._currentView.tooltip)},t.tooltip.delay)}function o(e){Is.defined(e._currentView.tooltip)&&(0!==e._currentView.tooltipTimer&&(clearTimeout(e._currentView.tooltipTimer),e._currentView.tooltipTimer=0),"none"!==e._currentView.tooltip.style.display&&(e._currentView.tooltip.style.display="none"))}e.render=function(e){Is.defined(e._currentView.tooltip)||(e._currentView.tooltip=DomElement.create(document.body,"div","heat-js-tooltip"),e._currentView.tooltip.style.display="none",t(e))},e.assignToEvents=t,e.add=function(e,t,o){null!==e&&(e.onmousemove=e=>n(e,t,o))},e.show=n,e.hide=o})(ToolTip||(ToolTip={})),(Trigger||(Trigger={})).customEvent=function(e,...t){let n=null;return Is.definedFunction(e)&&(n=e.apply(null,[].slice.call(t,0))),n},(e=>{let t;(e=>{const t=[1,2,3,4,5,6,7,8,9,10,11,12],n=[1,2,3,4,5,6,7];function o(e){const o=Default2.getObject(e,{});return o.views=Default2.getObject(o.views,{}),o.exportOnlyDataBeingViewed=Default2.getBoolean(o.exportOnlyDataBeingViewed,!0),o.year=Default2.getNumber(o.year,(new Date).getFullYear()),o.view=Default2.getString(o.view,"map"),o.exportType=Default2.getString(o.exportType,"json"),o.useLocalStorageForData=Default2.getBoolean(o.useLocalStorageForData,!1),o.allowFileImports=Default2.getBoolean(o.allowFileImports,!0),o.yearsToHide=Default2.getArray(o.yearsToHide,[]),o.dataFetchDelay=Default2.getNumber(o.dataFetchDelay,6e4),o.showOnlyDataForYearsAvailable=Default2.getBoolean(o.showOnlyDataForYearsAvailable,!1),o.showHolidaysInDayToolTips=Default2.getBoolean(o.showHolidaysInDayToolTips,!1),o.resizable=Default2.getBoolean(o.resizable,!1),o.startMonth=Default2.getNumberInRange(o.startMonth,0,11,0),o.allowMultipleFileImports=Default2.getBoolean(o.allowMultipleFileImports,!0),o.percentageDecimalPoints=Default2.getNumber(o.percentageDecimalPoints,2),o.allowTypeAdding=Default2.getBoolean(o.allowTypeAdding,!1),o.colorRanges=function(e){let t=[];if(Is.definedArray(e.colorRanges)){const n=e.colorRanges.length;for(let o=0;o<n;o++){const n=e.colorRanges[o];n.id=Default2.getString(n.id,crypto.randomUUID()),n.name=Default2.getString(n.name,""),n.minimum=Default2.getNumber(n.minimum,0),n.cssClassName=Default2.getString(n.cssClassName,""),n.mapCssClassName=Default2.getString(n.mapCssClassName,""),n.chartCssClassName=Default2.getString(n.chartCssClassName,""),n.statisticsCssClassName=Default2.getString(n.statisticsCssClassName,""),n.tooltipText=Default2.getString(n.tooltipText,""),n.visible=Default2.getBoolean(n.visible,!0),t.push(n)}}else t=[{id:crypto.randomUUID(),name:"Day Color 1",minimum:10,cssClassName:"day-color-1",tooltipText:"Day Color 1",visible:!0},{id:crypto.randomUUID(),name:"Day Color 2",minimum:15,cssClassName:"day-color-2",tooltipText:"Day Color 2",visible:!0},{id:crypto.randomUUID(),name:"Day Color 3",minimum:20,cssClassName:"day-color-3",tooltipText:"Day Color 3",visible:!0},{id:crypto.randomUUID(),name:"Day Color 4",minimum:25,cssClassName:"day-color-4",tooltipText:"Day Color 4",visible:!0}];return t}(o),o.holidays=function(e){let t=[];if(Is.definedArray(e.holidays)){const n=e.holidays.length;for(let o=0;o<n;o++){const n=e.holidays[o];n.date=Default2.getString(n.date,""),n.name=Default2.getString(n.name,""),n.showInViews=Default2.getBoolean(n.showInViews,!0),t.push(n)}}return t}(o),o.title=function(e){return e.title=Default2.getObject(e.title,{}),e.title.text=Default2.getString(e.title.text,"Heat.js"),e.title.showText=Default2.getBoolean(e.title.showText,!0),e.title.showYearSelector=Default2.getBoolean(e.title.showYearSelector,!0),e.title.showRefreshButton=Default2.getBoolean(e.title.showRefreshButton,!1),e.title.showExportButton=Default2.getBoolean(e.title.showExportButton,!1),e.title.extraSelectionYears=Default2.getNumber(e.title.extraSelectionYears,50),e.title.showYearSelectionDropDown=Default2.getBoolean(e.title.showYearSelectionDropDown,!0),e.title.showImportButton=Default2.getBoolean(e.title.showImportButton,!1),e.title.showConfigurationButton=Default2.getBoolean(e.title.showConfigurationButton,!0),e.title.showTitleDropDownButton=Default2.getBoolean(e.title.showTitleDropDownButton,!0),e.title.showTitleDropDownHeaders=Default2.getBoolean(e.title.showTitleDropDownHeaders,!0),e.title.showCurrentYearButton=Default2.getBoolean(e.title.showCurrentYearButton,!0),e.title.showSectionText=Default2.getBoolean(e.title.showSectionText,!0),e.title.showToolTips=Default2.getBoolean(e.title.showToolTips,!0),e.title.showTitleDropDownMenu=Default2.getBoolean(e.title.showTitleDropDownMenu,!0),e.title.showClearButton=Default2.getBoolean(e.title.showClearButton,!1),e.title}(o),o.description=function(e){return e.description=Default2.getObject(e.description,{}),e.description.text=Default2.getString(e.description.text,""),e.description.url=Default2.getString(e.description.url,""),e.description.urlTarget=Default2.getString(e.description.urlTarget,"_blank"),e.description}(o),o.guide=function(e){return e.guide=Default2.getObject(e.guide,{}),e.guide.enabled=Default2.getBoolean(e.guide.enabled,!0),e.guide.colorRangeTogglesEnabled=Default2.getBoolean(e.guide.colorRangeTogglesEnabled,!0),e.guide.showLessAndMoreLabels=Default2.getBoolean(e.guide.showLessAndMoreLabels,!0),e.guide.showNumbersInGuide=Default2.getBoolean(e.guide.showNumbersInGuide,!1),e.guide.showToolTips=Default2.getBoolean(e.guide.showToolTips,!0),e.guide}(o),o.tooltip=function(e){return e.tooltip=Default2.getObject(e.tooltip,{}),e.tooltip.delay=Default2.getNumber(e.tooltip.delay,750),e.tooltip}(o),o.views.map=function(e){e.views.map=Default2.getObject(e.views.map,{}),e.views.map.showMonthDayGaps=Default2.getBoolean(e.views.map.showMonthDayGaps,!0),e.views.map.showDayNames=Default2.getBoolean(e.views.map.showDayNames,!0),e.views.map.placeMonthNamesOnTheBottom=Default2.getBoolean(e.views.map.placeMonthNamesOnTheBottom,!1),e.views.map.showDayCounts=Default2.getBoolean(e.views.map.showDayCounts,!1),e.views.map.showMonthNames=Default2.getBoolean(e.views.map.showMonthNames,!0),e.views.map.showDaysInReverseOrder=Default2.getBoolean(e.views.map.showDaysInReverseOrder,!1),e.views.map.showNoDataMessageWhenDataIsNotAvailable=Default2.getBoolean(e.views.map.showNoDataMessageWhenDataIsNotAvailable,!1),e.views.map.showMinimalDayNames=Default2.getBoolean(e.views.map.showMinimalDayNames,!1),e.views.map.showMonthsInReverseOrder=Default2.getBoolean(e.views.map.showMonthsInReverseOrder,!1),e.views.map.keepScrollPositions=Default2.getBoolean(e.views.map.keepScrollPositions,!1),e.views.map.showDayDateNumbers=Default2.getBoolean(e.views.map.showDayDateNumbers,!1),e.views.map.showToolTips=Default2.getBoolean(e.views.map.showToolTips,!0),e.views.map.highlightCurrentDay=Default2.getBoolean(e.views.map.highlightCurrentDay,!1),e.views.map.dayToolTipText=Default2.getString(e.views.map.dayToolTipText,"{d}{o} {mmmm} {yyyy}"),e.views.map.showYearsInMonthNames=Default2.getBoolean(e.views.map.showYearsInMonthNames,!0),e.views.map.allowZooming=Default2.getBoolean(e.views.map.allowZooming,!0),e.views.map.zoomLevel=Default2.getNumber(e.views.map.zoomLevel,0),e.views.map.showCountsInToolTips=Default2.getBoolean(e.views.map.showCountsInToolTips,!0),Is.invalidOptionArray(e.views.map.monthsToShow)&&(e.views.map.monthsToShow=t);Is.invalidOptionArray(e.views.map.daysToShow)&&(e.views.map.daysToShow=n);return e.views.map}(o),o.views.chart=function(e){e.views.chart=Default2.getObject(e.views.chart,{}),e.views.chart.enabled=Default2.getBoolean(e.views.chart.enabled,!0),e.views.chart.showChartYLabels=Default2.getBoolean(e.views.chart.showChartYLabels,!0),e.views.chart.showMonthNames=Default2.getBoolean(e.views.chart.showMonthNames,!0),e.views.chart.showLineCounts=Default2.getBoolean(e.views.chart.showLineCounts,!1),e.views.chart.showInReverseOrder=Default2.getBoolean(e.views.chart.showInReverseOrder,!1),e.views.chart.keepScrollPositions=Default2.getBoolean(e.views.chart.keepScrollPositions,!1),e.views.chart.showLineDateNumbers=Default2.getBoolean(e.views.chart.showLineDateNumbers,!1),e.views.chart.showToolTips=Default2.getBoolean(e.views.chart.showToolTips,!0),e.views.chart.useGradients=Default2.getBoolean(e.views.chart.useGradients,!1),e.views.chart.highlightCurrentDay=Default2.getBoolean(e.views.chart.highlightCurrentDay,!1),e.views.chart.dayToolTipText=Default2.getString(e.views.chart.dayToolTipText,"{d}{o} {mmmm} {yyyy}"),e.views.chart.showYearsInMonthNames=Default2.getBoolean(e.views.chart.showYearsInMonthNames,!0),e.views.chart.showCountsInToolTips=Default2.getBoolean(e.views.chart.showCountsInToolTips,!0),Is.invalidOptionArray(e.views.chart.monthsToShow)&&(e.views.chart.monthsToShow=t);Is.invalidOptionArray(e.views.chart.daysToShow)&&(e.views.chart.daysToShow=n);return e.views.chart}(o),o.views.days=function(e){e.views.days=Default2.getObject(e.views.days,{}),e.views.days.enabled=Default2.getBoolean(e.views.days.enabled,!0),e.views.days.showChartYLabels=Default2.getBoolean(e.views.days.showChartYLabels,!0),e.views.days.showDayNames=Default2.getBoolean(e.views.days.showDayNames,!0),e.views.days.showInReverseOrder=Default2.getBoolean(e.views.days.showInReverseOrder,!1),e.views.days.showDayCounts=Default2.getBoolean(e.views.days.showDayCounts,!1),e.views.days.keepScrollPositions=Default2.getBoolean(e.views.days.keepScrollPositions,!1),e.views.days.showToolTips=Default2.getBoolean(e.views.days.showToolTips,!0),e.views.days.useGradients=Default2.getBoolean(e.views.days.useGradients,!1),e.views.days.useDifferentOpacities=Default2.getBoolean(e.views.days.useDifferentOpacities,!0),e.views.days.showDayCountPercentages=Default2.getBoolean(e.views.days.showDayCountPercentages,!0),Is.invalidOptionArray(e.views.days.monthsToShow)&&(e.views.days.monthsToShow=t);Is.invalidOptionArray(e.views.days.daysToShow)&&(e.views.days.daysToShow=n);return e.views.days}(o),o.views.months=function(e){e.views.months=Default2.getObject(e.views.months,{}),e.views.months.enabled=Default2.getBoolean(e.views.months.enabled,!0),e.views.months.showChartYLabels=Default2.getBoolean(e.views.months.showChartYLabels,!0),e.views.months.showMonthNames=Default2.getBoolean(e.views.months.showMonthNames,!0),e.views.months.showInReverseOrder=Default2.getBoolean(e.views.months.showInReverseOrder,!1),e.views.months.showMonthCounts=Default2.getBoolean(e.views.months.showMonthCounts,!1),e.views.months.keepScrollPositions=Default2.getBoolean(e.views.months.keepScrollPositions,!1),e.views.months.showToolTips=Default2.getBoolean(e.views.months.showToolTips,!0),e.views.months.useGradients=Default2.getBoolean(e.views.months.useGradients,!1),e.views.months.useDifferentOpacities=Default2.getBoolean(e.views.months.useDifferentOpacities,!0),e.views.months.highlightCurrentMonth=Default2.getBoolean(e.views.months.highlightCurrentMonth,!1),e.views.months.showMonthCountPercentages=Default2.getBoolean(e.views.months.showMonthCountPercentages,!0),Is.invalidOptionArray(e.views.months.monthsToShow)&&(e.views.months.monthsToShow=t);Is.invalidOptionArray(e.views.months.daysToShow)&&(e.views.months.daysToShow=n);return e.views.months}(o),o.views.statistics=function(e){e.views.statistics=Default2.getObject(e.views.statistics,{}),e.views.statistics.enabled=Default2.getBoolean(e.views.statistics.enabled,!0),e.views.statistics.showChartYLabels=Default2.getBoolean(e.views.statistics.showChartYLabels,!0),e.views.statistics.showColorRangeLabels=Default2.getBoolean(e.views.statistics.showColorRangeLabels,!0),e.views.statistics.useColorRangeNamesForLabels=Default2.getBoolean(e.views.statistics.useColorRangeNamesForLabels,!1),e.views.statistics.showRangeCounts=Default2.getBoolean(e.views.statistics.showRangeCounts,!1),e.views.statistics.showInReverseOrder=Default2.getBoolean(e.views.statistics.showInReverseOrder,!1),e.views.statistics.keepScrollPositions=Default2.getBoolean(e.views.statistics.keepScrollPositions,!1),e.views.statistics.showToolTips=Default2.getBoolean(e.views.statistics.showToolTips,!0),e.views.statistics.useGradients=Default2.getBoolean(e.views.statistics.useGradients,!1),e.views.statistics.showRangeCountPercentages=Default2.getBoolean(e.views.statistics.showRangeCountPercentages,!0),e.views.statistics.showRangeNamesInToolTips=Default2.getBoolean(e.views.statistics.showRangeNamesInToolTips,!0),Is.invalidOptionArray(e.views.statistics.monthsToShow)&&(e.views.statistics.monthsToShow=t);Is.invalidOptionArray(e.views.statistics.daysToShow)&&(e.views.statistics.daysToShow=n);return e.views.statistics}(o),o.yearlyStatistics=function(e){return e.yearlyStatistics=Default2.getObject(e.yearlyStatistics,{}),e.yearlyStatistics.enabled=Default2.getBoolean(e.yearlyStatistics.enabled,!1),e.yearlyStatistics.showToday=Default2.getBoolean(e.yearlyStatistics.showToday,!0),e.yearlyStatistics.showThisWeek=Default2.getBoolean(e.yearlyStatistics.showThisWeek,!0),e.yearlyStatistics.showThisMonth=Default2.getBoolean(e.yearlyStatistics.showThisMonth,!0),e.yearlyStatistics.showThisYear=Default2.getBoolean(e.yearlyStatistics.showThisYear,!0),e.yearlyStatistics.showOnlyForCurrentYear=Default2.getBoolean(e.yearlyStatistics.showOnlyForCurrentYear,!1),e.yearlyStatistics.showPercentages=Default2.getBoolean(e.yearlyStatistics.showPercentages,!0),e.yearlyStatistics}(o),o.events=function(e){return e.events=Default2.getObject(e.events,{}),e.events.onBackYear=Default2.getFunction(e.events.onBackYear,null),e.events.onNextYear=Default2.getFunction(e.events.onNextYear,null),e.events.onRefresh=Default2.getFunction(e.events.onRefresh,null),e.events.onBeforeRender=Default2.getFunction(e.events.onBeforeRender,null),e.events.onRenderComplete=Default2.getFunction(e.events.onRenderComplete,null),e.events.onDestroy=Default2.getFunction(e.events.onDestroy,null),e.events.onExport=Default2.getFunction(e.events.onExport,null),e.events.onSetYear=Default2.getFunction(e.events.onSetYear,null),e.events.onTypeSwitch=Default2.getFunction(e.events.onTypeSwitch,null),e.events.onMapDayToolTipRender=Default2.getFunction(e.events.onMapDayToolTipRender,null),e.events.onChartDayToolTipRender=Default2.getFunction(e.events.onChartDayToolTipRender,e.events.onMapDayToolTipRender),e.events.onAdd=Default2.getFunction(e.events.onAdd,null),e.events.onRemove=Default2.getFunction(e.events.onRemove,null),e.events.onReset=Default2.getFunction(e.events.onReset,null),e.events.onViewSwitch=Default2.getFunction(e.events.onViewSwitch,null),e.events.onColorRangeTypeToggle=Default2.getFunction(e.events.onColorRangeTypeToggle,null),e.events.onImport=Default2.getFunction(e.events.onImport,null),e.events.onDataFetch=Default2.getFunction(e.events.onDataFetch,null),e.events.onClear=Default2.getFunction(e.events.onClear,null),e.events.onUpdate=Default2.getFunction(e.events.onUpdate,null),e.events.onOptionsUpdate=Default2.getFunction(e.events.onOptionsUpdate,null),e.events.onMapDayClick=Default2.getFunction(e.events.onMapDayClick,null),e.events.onMapDayDblClick=Default2.getFunction(e.events.onMapDayDblClick,null),e.events.onChartDayClick=Default2.getFunction(e.events.onChartDayClick,e.events.onMapDayClick),e.events.onChartDayDblClick=Default2.getFunction(e.events.onChartDayDblClick,e.events.onMapDayDblClick),e.events.onWeekDayClick=Default2.getFunction(e.events.onWeekDayClick,null),e.events.onWeekDayDblClick=Default2.getFunction(e.events.onWeekDayDblClick,null),e.events.onMonthClick=Default2.getFunction(e.events.onMonthClick,null),e.events.onMonthDblClick=Default2.getFunction(e.events.onMonthDblClick,null),e.events.onStatisticClick=Default2.getFunction(e.events.onStatisticClick,null),e.events.onStatisticDblClick=Default2.getFunction(e.events.onStatisticDblClick,null),e.events.onMapZoomLevelChange=Default2.getFunction(e.events.onMapZoomLevelChange,null),e.events}(o),o.startMonth>0&&(o.yearsToHide=[]),o}e.getForNewInstance=function(e,t,n){const i=o(t),r=Default2.getString(i.view,"").toLowerCase();return i._currentView={},i._currentView.element=n,i._currentView.disabledBackground=null,i._currentView.configurationDialog=null,i._currentView.configurationDialogDayCheckBoxes=[],i._currentView.configurationDialogMonthCheckBoxes=[],i._currentView.tooltip=null,i._currentView.tooltipTimer=0,i._currentView.mapContents=null,i._currentView.mapContentsScrollLeft=0,i._currentView.year=i.year,i._currentView.type=e.text.unknownTrendText,i._currentView.isInFetchMode=Is.definedFunction(i.events.onDataFetch),i._currentView.isInFetchModeTimer=0,i._currentView.yearsAvailable=[],i._currentView.dayWidth=0,i._currentView.mapZoomLevel=-1,i._currentView.mapZoomIncrement=-1,i.views.chart.enabled&&(i._currentView.chartContents=null,i._currentView.chartContentsScrollLeft=0),i.views.days.enabled&&(i._currentView.daysContents=null,i._currentView.daysContentsScrollLeft=0),i.views.statistics.enabled&&(i._currentView.statisticsContents=null,i._currentView.statisticsContentsScrollLeft=0),i._currentView.view="map"===r?1:"chart"===r?2:"days"===r?3:"statistics"===r?4:1,i},e.get=o})(t=e.Options||(e.Options={}))})(Binding||(Binding={})),(e=>{let t;(t=e.Options||(e.Options={})).get=function(e=null){const t=Default2.getObject(e,{});return t.safeMode=Default2.getBoolean(t.safeMode,!0),t.observationMode=Default2.getBoolean(t.observationMode,!0),t.domElementTypes=Default2.getStringOrArray(t.domElementTypes,["*"]),t.text=function(e){return e.text=Default2.getObject(e.text,{}),e.text.stText=Default2.getAnyString(e.text.stText,"st"),e.text.ndText=Default2.getAnyString(e.text.ndText,"nd"),e.text.rdText=Default2.getAnyString(e.text.rdText,"rd"),e.text.thText=Default2.getAnyString(e.text.thText,"th"),e.text.backButtonText=Default2.getAnyString(e.text.backButtonText,"Back"),e.text.nextButtonText=Default2.getAnyString(e.text.nextButtonText,"Next"),e.text.refreshButtonText=Default2.getAnyString(e.text.refreshButtonText,"Refresh"),e.text.exportButtonText=Default2.getAnyString(e.text.exportButtonText,"Export"),e.text.lessText=Default2.getAnyString(e.text.lessText,"Less"),e.text.moreText=Default2.getAnyString(e.text.moreText,"More"),e.text.dateText=Default2.getAnyString(e.text.dateText,"Date"),e.text.countText=Default2.getAnyString(e.text.countText,"Count"),e.text.mapText=Default2.getAnyString(e.text.mapText,"Map"),e.text.chartText=Default2.getAnyString(e.text.chartText,"Chart"),e.text.noChartDataMessage=Default2.getAnyString(e.text.noChartDataMessage,"There is currently no data to view."),e.text.statisticsText=Default2.getAnyString(e.text.statisticsText,"Statistics"),e.text.noStatisticsDataMessage=Default2.getAnyString(e.text.noStatisticsDataMessage,"There are currently no statistics to view."),e.text.unknownTrendText=Default2.getAnyString(e.text.unknownTrendText,"Unknown"),e.text.importButtonText=Default2.getAnyString(e.text.importButtonText,"Import"),e.text.noMapDataMessage=Default2.getAnyString(e.text.noMapDataMessage,"There is currently no data to view."),e.text.objectErrorText=Default2.getAnyString(e.text.objectErrorText,"Errors in object: {{error_1}}, {{error_2}}"),e.text.attributeNotValidErrorText=Default2.getAnyString(e.text.attributeNotValidErrorText,"The attribute '{{attribute_name}}' is not a valid object."),e.text.attributeNotSetErrorText=Default2.getAnyString(e.text.attributeNotSetErrorText,"The attribute '{{attribute_name}}' has not been set correctly."),e.text.closeButtonText=Default2.getAnyString(e.text.closeButtonText,"Close"),e.text.configurationButtonText=Default2.getAnyString(e.text.configurationButtonText,"Configuration"),e.text.configurationTitleText=Default2.getAnyString(e.text.configurationTitleText,"Configuration"),e.text.visibleMonthsText=Default2.getAnyString(e.text.visibleMonthsText,"Visible Months"),e.text.visibleDaysText=Default2.getAnyString(e.text.visibleDaysText,"Visible Days"),e.text.dataText=Default2.getAnyString(e.text.dataText,"Data"),e.text.colorRangesText=Default2.getAnyString(e.text.colorRangesText,"Color Ranges"),e.text.yearText=Default2.getAnyString(e.text.yearText,"Year"),e.text.daysText=Default2.getAnyString(e.text.daysText,"Days"),e.text.noDaysDataMessage=Default2.getAnyString(e.text.noDaysDataMessage,"There are currently no days to view."),e.text.currentYearText=Default2.getAnyString(e.text.currentYearText,"Current Year"),e.text.todayText=Default2.getAnyString(e.text.todayText,"Today"),e.text.thisWeekText=Default2.getAnyString(e.text.thisWeekText,"This Week"),e.text.thisMonthText=Default2.getAnyString(e.text.thisMonthText,"This Month"),e.text.thisYearText=Default2.getAnyString(e.text.thisYearText,"This Year"),e.text.unavailableText=Default2.getAnyString(e.text.unavailableText,"Unavailable"),e.text.monthsText=Default2.getAnyString(e.text.monthsText,"Months"),e.text.noMonthsDataMessage=Default2.getAnyString(e.text.noMonthsDataMessage,"There are currently no months to view."),e.text.selectTypeText=Default2.getAnyString(e.text.selectTypeText,"Select Type"),e.text.filenamePlaceholderText=Default2.getAnyString(e.text.filenamePlaceholderText,"Filename (optional)"),e.text.onlyDataBeingViewedText=Default2.getAnyString(e.text.onlyDataBeingViewedText,"Only data being viewed"),e.text.zoomInText=Default2.getAnyString(e.text.zoomInText,"Zoom In"),e.text.zoomOutText=Default2.getAnyString(e.text.zoomOutText,"Zoom Out"),e.text.clearButtonText=Default2.getAnyString(e.text.clearButtonText,"Clear"),e.text.selectFilesText=Default2.getAnyString(e.text.selectFilesText,"Select File(s)"),e.text.dragAndDropFilesText=Default2.getAnyString(e.text.dragAndDropFilesText,"Drag and drop your file(s) here ..."),e.text.addTypeText=Default2.getAnyString(e.text.addTypeText,"Add Type"),e.text.typePlaceholderText=Default2.getAnyString(e.text.typePlaceholderText,"Type"),e.text.addButtonText=Default2.getAnyString(e.text.addButtonText,"Add"),e.text.removeButtonText=Default2.getAnyString(e.text.removeButtonText,"Remove"),e.text}(t),t.text=(n=t.text,Is.invalidOptionArray(n.monthNames,12)&&(n.monthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),Is.invalidOptionArray(n.dayNames,7)&&(n.dayNames=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]),n),t;var n}})(Configuration||(Configuration={})),(e=>{let t;var n;(n=t=e.Background||(e.Background={})).render=function(e){e._currentView.disabledBackground=DomElement.create(e._currentView.element,"div","disabled")},n.show=function(e){Is.defined(e._currentView.disabledBackground)&&"block"!==e._currentView.disabledBackground.style.display&&(e._currentView.disabledBackground.style.display="block")},n.hide=function(e){Is.defined(e._currentView.disabledBackground)&&"none"!==e._currentView.disabledBackground.style.display&&(e._currentView.disabledBackground.style.display="none")}})(Disabled||(Disabled={})),Visible2=Visible||(Visible={}),Visible2.months=function(e){let t=[];return t=1===e._currentView.view?e.views.map.monthsToShow:e.views.chart.enabled&&2===e._currentView.view?e.views.chart.monthsToShow:e.views.days.enabled&&3===e._currentView.view?e.views.days.monthsToShow:e.views.months.enabled&&5===e._currentView.view?e.views.months.monthsToShow:e.views.statistics.enabled&&4===e._currentView.view?e.views.statistics.monthsToShow:e.views.map.monthsToShow,t},Visible2.days=function(e){let t=[];return t=1===e._currentView.view?e.views.map.daysToShow:e.views.chart.enabled&&2===e._currentView.view?e.views.chart.daysToShow:e.views.days.enabled&&3===e._currentView.view?e.views.days.daysToShow:e.views.months.enabled&&5===e._currentView.view?e.views.months.daysToShow:e.views.statistics.enabled&&4===e._currentView.view?e.views.statistics.daysToShow:e.views.map.daysToShow,t},(Import||(Import={})).file=function(e,t,n,o){"json"===t?function(e,t,n){const o=new FileReader;let i={};o.onloadend=()=>t(e.name,i),o.onload=e=>{const t=Default2.getObjectFromString(e.target.result,n);t.parsed&&Is.definedObject(t.object)&&(i=t.object)},o.readAsText(e)}(e,n,o):"txt"===t?function(e,t){const n=new FileReader,o={};n.onloadend=()=>t(e.name,o),n.onload=e=>{const t=e.target.result.toString().split("\n"),n=t.length;for(let e=0;e<n;e++){const n=t[e].split(":");o[n[0].trim()]=parseInt(n[1].trim())}},n.readAsText(e)}(e,n):"csv"===t?function(e,t){const n=new FileReader,o={};n.onloadend=()=>t(e.name,o),n.onload=e=>{const t=e.target.result.toString().replace(new RegExp('"',"g"),"").split("\n"),n=t.length;for(let e=1;e<n;e++){let n=t[e].split(",");o[n[0].trim()]=parseInt(n[1].trim())}},n.readAsText(e)}(e,n):"tsv"===t?function(e,t){const n=new FileReader,o={};n.onloadend=()=>t(e.name,o),n.onload=e=>{const t=e.target.result.toString().split("\n"),n=t.length;for(let e=1;e<n;e++){const n=t[e].split("\t");o[n[0].trim()]=parseInt(n[1].trim())}},n.readAsText(e)}(e,n):"md"===t?function(e,t){const n=new FileReader,o={};n.onloadend=()=>t(e.name,o),n.onload=e=>{const t=e.target.result.toString().split("\n"),n=t.length;for(let e=2;e<n;e++){const n=t[e].trim(),i=n.substring(1,n.length-1).trim().split("|");o[i[0].trim()]=parseInt(i[1].trim())}},n.readAsText(e)}(e,n):"yaml"===t?function(e,t){const n=new FileReader,o={};n.onloadend=()=>t(e.name,o),n.onload=e=>{const t=e.target.result.toString().split("\n"),n=t.length;for(let e=1;e<n;e++){const n=t[e].split(":");o[n[0].trim()]=parseInt(n[1].trim())}},n.readAsText(e)}(e,n):"toml"===t&&function(e,t){const n=new FileReader,o={};n.onloadend=()=>t(e.name,o),n.onload=e=>{const t=e.target.result.toString().split("\n"),n=t.length;for(let e=3;e<n;e++){const n=t[e].split("=");o[n[0].trim()]=parseInt(n[1].trim())}},n.readAsText(e)}(e,n)},(e=>{let t;var n;let o;(n=t=e.File||(e.File={})).mimeType=function(e){let t=null;return"csv"===e.toLowerCase()?t="text/csv":"json"===e.toLowerCase()?t="application/json":"xml"===e.toLowerCase()?t="application/xml":"txt"===e.toLowerCase()?t="text/plain":"html"===e.toLowerCase()?t="text/html":"md"===e.toLowerCase()?t="text/x-markdown":"tsv"===e.toLowerCase()?t="text/tab-separated-values":"yaml"===e.toLowerCase()?t="application/yaml":"toml"===e.toLowerCase()&&(t="application/toml"),t},n.filename=function(e,t,n,o){let i=null;if(Is.definedString(n))i=`${n}.${o.toLowerCase()}`;else{const n=new Date,r=`${Str.padNumber(n.getDate())}-${Str.padNumber(n.getMonth()+1)}-${n.getFullYear()}`,a=`${Str.padNumber(n.getHours())}-${Str.padNumber(n.getMinutes())}`;let s="";t._currentView.type!==e.text.unknownTrendText&&(s=`${t._currentView.type.toLowerCase().replace(/ /g,"_")}_`),i=`${s}${r}_${a}.${o.toLowerCase()}`}return i},(e=>{function t(e){let t=e.toString().replace(/(\r\n|\n|\r)/gm,"").replace(/(\s\s)/gm," ");return t=t.replace(/"/g,'""'),t=`"${t}"`,t}function n(e){return e.join(",")}e.get=function(e,o,i){let r=null;return"csv"===e?r=function(e,o){const i=[];for(const o in e)e.hasOwnProperty(o)&&i.push(n([t(o),t(e[o].toString())]));i.length>0&&i.unshift(n([t(o.text.dateText),t(o.text.countText)]));return i.join("\n")}(o,i):"json"===e?r=function(e){return JSON.stringify(e)}(o):"xml"===e?r=function(e){const t=[];t.push('<?xml version="1.0" ?>'),t.push("<Dates>");for(const n in e)e.hasOwnProperty(n)&&(t.push("<Date>"),t.push(`<FullDate>${n}</FullDate>`),t.push(`<Count>${e[n].toString()}</Count>`),t.push("</Date>"));return t.push("</Dates>"),t.join("\n")}(o):"txt"===e?r=function(e){const t=[];for(const n in e)e.hasOwnProperty(n)&&t.push(`${n}: ${e[n].toString()}`);return t.join("\n")}(o):"html"===e?r=function(e,t){const n=[],o=DateTime.getCustomFormattedDateText(t,"{dddd}, {d}{0} {mmmm} {yyyy}",new Date);n.push("<!DOCTYPE html>"),n.push("<html>"),n.push("<head>"),n.push('<meta charset="utf-8" />'),n.push(`<meta http-equiv="Last-Modified" content="${o} GMT" />`),n.push("</head>"),n.push("<body>"),n.push("<ul>");for(const t in e)e.hasOwnProperty(t)&&n.push(`<li><b>${t}:</b> ${e[t].toString()}</li>`);return n.push("</ul>"),n.push("</body>"),n.push("</html>"),n.join("\n")}(o,i):"md"===e?r=function(e){const t=[];t.push("| Full Date | Count |"),t.push("| --- | --- |");for(const n in e)e.hasOwnProperty(n)&&t.push(`| ${n} | ${e[n].toString()} |`);return t.join("\n")}(o):"tsv"===e?r=function(e){const t=[];t.push("Full Date\tCount");for(const n in e)e.hasOwnProperty(n)&&t.push(`${n}\t${e[n].toString()}`);return t.join("\n")}(o):"yaml"===e?r=function(e,t){const n=[],o=DateTime.getCustomFormattedDateText(t,"{dddd}, {d}{o} {mmmm} {yyyy}",new Date);n.push(`Last-Modified: ${o}`);for(const t in e)e.hasOwnProperty(t)&&n.push(`${t}: ${e[t].toString()}`);return n.join("\n")}(o,i):"toml"===e&&(r=function(e,t){const n=[],o=DateTime.getCustomFormattedDateText(t,"{dddd}, {d}{o} {mmmm} {yyyy}",new Date);n.push(`last_modified = "${o}"`),n.push(""),n.push("[dates]");for(const t in e)e.hasOwnProperty(t)&&n.push(`${t} = ${e[t].toString()}`);return n.join("\n")}(o,i)),r}})(o=e.Contents||(e.Contents={}))})(Export||(Export={})),Convert2=Convert||(Convert={}),Convert2.toRgbOpacityColor=function(e,t){const n=e.indexOf(") ")>-1?`${e.split(") ")[0]})`:e;let o=n.replace("rgba(","").replace("rgb(","").replace(")","").split(",");return n.startsWith("rgba")?o[o.length-1]=t.toString():o.push(t.toString()),`rgba(${o.join()})`},Convert2.hexToRgba=function(e){const t=e.trim().replace("#","");let n=1;const o=parseInt(t.substring(0,2),16),i=parseInt(t.substring(2,4),16),r=parseInt(t.substring(4,6),16);return 8===e.length&&(n=parseInt(t.substring(6,8),16)),`rgba(${o}, ${i}, ${r}, ${n})`},Convert2.valuesToOpacitiesOrder=function(e){const t=Object.values(e.values).sort((e,t)=>e-t),n=t.length,o=1/n;for(let i=0;i<n;i++)e.valueOpacities[t[i]]=parseFloat((o*(i+1)).toFixed(2))},(()=>{let e={},t=null,n={};function o(){const t=e.domElementTypes,n=t.length;for(let e=0;e<n;e++){const n=document.getElementsByTagName(t[e]),o=[].slice.call(n),r=o.length;for(let e=0;e<r&&i(o[e]);e++);}}function i(t){let n=!0;if(Is.defined(t)&&t.hasAttribute(Constant.HEAT_JS_ATTRIBUTE_NAME)){const o=t.getAttribute(Constant.HEAT_JS_ATTRIBUTE_NAME);if(Is.definedString(o)){const i=Default2.getObjectFromString(o,e);i.parsed&&Is.definedObject(i.object)?r(Binding.Options.getForNewInstance(e,i.object,t)):e.safeMode||(console.error(e.text.attributeNotValidErrorText.replace("{{attribute_name}}",Constant.HEAT_JS_ATTRIBUTE_NAME)),n=!1)}else e.safeMode||(console.error(e.text.attributeNotSetErrorText.replace("{{attribute_name}}",Constant.HEAT_JS_ATTRIBUTE_NAME)),n=!1)}return n}function r(e){Trigger.customEvent(e.events.onBeforeRender,e._currentView.element),Is.definedString(e._currentView.element.id)||(e._currentView.element.id=crypto.randomUUID()),""===e._currentView.element.className.trim()?e._currentView.element.className="heat-js":DomElement.addClass(e._currentView.element,"heat-js"),e.resizable&&DomElement.addClass(e._currentView.element,"resizable"),e._currentView.element.removeAttribute(Constant.HEAT_JS_ATTRIBUTE_NAME),I(e._currentView.element.id,e),a(e),s(e),Trigger.customEvent(e.events.onRenderComplete,e._currentView.element)}function a(t,o=!1,i=!1,r=!1){o&&function(e){if(e.useLocalStorageForData&&window.localStorage){const t=e._currentView.element.id;!function(e){if(e.useLocalStorageForData&&window.localStorage){const t=window.localStorage.length,n=[],o=e._currentView.element.id;for(let e=0;e<t;e++)Str.startsWithAnyCase(window.localStorage.key(e),`${Constant.LOCAL_STORAGE_START_ID}${o}`)&&n.push(window.localStorage.key(e));const i=n.length;for(let e=0;e<i;e++)window.localStorage.removeItem(n[e])}}(e);const o=JSON.stringify(n[t].typeData);window.localStorage.setItem(`${Constant.LOCAL_STORAGE_START_ID}${t}`,o)}}(t),Is.defined(t._currentView.mapContents)&&(t._currentView.mapContentsScrollLeft=t._currentView.mapContents.scrollLeft),t.views.chart.enabled&&Is.defined(t._currentView.chartContents)&&(t._currentView.chartContentsScrollLeft=t._currentView.chartContents.scrollLeft),t.views.days.enabled&&Is.defined(t._currentView.daysContents)&&(t._currentView.daysContentsScrollLeft=t._currentView.daysContents.scrollLeft),t.views.statistics.enabled&&Is.defined(t._currentView.statisticsContents)&&(t._currentView.statisticsContentsScrollLeft=t._currentView.statisticsContents.scrollLeft),t._currentView.element.innerHTML="",t._currentView.yearsAvailable=function(e){let t=[];if(e.showOnlyDataForYearsAvailable){let n=M(e);for(const e in n)if(n.hasOwnProperty(e)){let n=parseInt(DateTime.getStorageDateYear(e));-1===t.indexOf(n)&&t.push(n)}}return t=t.sort(function(e,t){return e-t}),t}(t),ToolTip.hide(t),function(e){e._currentView.isInFetchMode&&(0===e._currentView.isInFetchModeTimer&&B(e),0===e._currentView.isInFetchModeTimer&&(e._currentView.isInFetchModeTimer=setInterval(()=>{B(e),a(e)},e.dataFetchDelay)))}(t),function(t){const o=E(t);if(n[t._currentView.element.id].totalTypes>1)for(const i in n[t._currentView.element.id].typeData)(i!==e.text.unknownTrendText||o>0)&&0===o&&t._currentView.type===e.text.unknownTrendText&&(t._currentView.type=i)}(t),(t.title.showConfigurationButton||t.title.showExportButton||t.title.showImportButton||t.allowTypeAdding)&&Disabled.Background.render(t),t.title.showConfigurationButton&&function(t){t._currentView.configurationDialog=DomElement.create(t._currentView.disabledBackground,"div","dialog configuration");const n=DomElement.create(t._currentView.configurationDialog,"div","dialog-title-bar"),o=DomElement.create(t._currentView.configurationDialog,"div","dialog-contents"),i=DomElement.create(n,"div","dialog-close"),r=DomElement.create(o,"div","side-container panel"),s=DomElement.create(o,"div","side-container panel");DomElement.createWithHTML(n,"span","dialog-title-bar-text",e.text.configurationTitleText),DomElement.createWithHTML(r,"div","side-container-title-text",`${e.text.visibleDaysText}:`),DomElement.createWithHTML(s,"div","side-container-title-text",`${e.text.visibleMonthsText}:`);const l=DomElement.create(s,"div","side-container"),c=DomElement.create(s,"div","side-container");i.onclick=()=>function(e){Disabled.Background.hide(e),Is.defined(e._currentView.configurationDialog)&&"none"!==e._currentView.configurationDialog.style.display&&(e._currentView.configurationDialog.style.display="none");const t=[],n=[];let o=!1;for(let n=0;n<7;n++)e._currentView.configurationDialogDayCheckBoxes[n].checked&&t.push(n+1);for(let t=0;t<12;t++)e._currentView.configurationDialogMonthCheckBoxes[t].checked&&n.push(t+1);t.length>=1&&(1===e._currentView.view?e.views.map.daysToShow=t:e.views.chart.enabled&&2===e._currentView.view?e.views.chart.daysToShow=t:e.views.days.enabled&&3===e._currentView.view?e.views.days.daysToShow=t:e.views.months.enabled&&5===e._currentView.view?e.views.months.daysToShow=t:e.views.statistics.enabled&&4===e._currentView.view?e.views.statistics.daysToShow=t:e.views.map.daysToShow=t,o=!0);n.length>=1&&(1===e._currentView.view?e.views.map.monthsToShow=n:e.views.chart.enabled&&2===e._currentView.view?e.views.chart.monthsToShow=n:e.views.days.enabled&&3===e._currentView.view?e.views.days.monthsToShow=n:e.views.months.enabled&&5===e._currentView.view?e.views.months.monthsToShow=n:e.views.statistics.enabled&&4===e._currentView.view?e.views.statistics.monthsToShow=n:e.views.map.monthsToShow=n,o=!0);o?(a(e),Trigger.customEvent(e.events.onOptionsUpdate,e._currentView.element,e)):ToolTip.hide(e)}(t);for(let n=0;n<7;n++)t._currentView.configurationDialogDayCheckBoxes[n]=DomElement.createCheckBox(r,e.text.dayNames[n],n.toString());let u=l,d=0;for(let n=t.startMonth;n<12+t.startMonth;n++){let o=n;t.startMonth>0&&n>11&&(o=n-12),t._currentView.configurationDialogMonthCheckBoxes[o]=DomElement.createCheckBox(u,e.text.monthNames[o],o.toString()),d++,d>6&&(u=c)}ToolTip.add(i,t,e.text.closeButtonText)}(t),t.title.showExportButton&&function(t){t._currentView.exportDialog=DomElement.create(t._currentView.disabledBackground,"div","dialog export");const n=DomElement.create(t._currentView.exportDialog,"div","dialog-title-bar"),o=DomElement.create(t._currentView.exportDialog,"div","dialog-contents"),i=DomElement.create(n,"div","dialog-close");DomElement.createWithHTML(n,"span","dialog-title-bar-text",e.text.selectTypeText),t._currentView.exportDialogExportTypeSelect=DomElement.create(o,"select","input-box"),t._currentView.exportDialogExportTypeSelect.name=crypto.randomUUID(),t._currentView.exportDialogExportFilenameInput=DomElement.create(o,"input","input-box filename"),t._currentView.exportDialogExportFilenameInput.name=crypto.randomUUID(),t._currentView.exportDialogExportFilenameInput.placeholder=e.text.filenamePlaceholderText,t._currentView.exportDialogExportOnlyDataBeingViewedCheckBox=DomElement.createCheckBox(o,e.text.onlyDataBeingViewedText,crypto.randomUUID()),t._currentView.exportDialogExportOnlyDataBeingViewedCheckBox.checked=t.exportOnlyDataBeingViewed;const r=DomElement.create(o,"div","buttons"),a=DomElement.createButton(r,"button","default",e.text.exportButtonText);!function(e){let t,n=[];for(t in ExportType){const o=DomElement.createWithNoContainer("option");o.value=ExportType[t],o.textContent=t.toString().toUpperCase(),o.selected=t===e.exportType,n.push(o)}n.sort((e,t)=>e.text.toLowerCase().localeCompare(t.text.toLowerCase())),n.forEach(t=>e._currentView.exportDialogExportTypeSelect.add(t))}(t);const s=()=>{const e=t._currentView.exportDialogExportTypeSelect.value,n=t._currentView.exportDialogExportFilenameInput.value,o=t._currentView.exportDialogExportOnlyDataBeingViewedCheckBox.checked;l(t),c(t,e,n,o)};t._currentView.exportDialogExportFilenameInput.onkeydown=e=>{"Enter"===e.key&&s()},a.onclick=()=>s(),i.onclick=()=>l(t),ToolTip.add(i,t,e.text.closeButtonText)}(t),t.title.showImportButton&&function(t){t._currentView.importDialog=DomElement.create(t._currentView.disabledBackground,"div","dialog import");const n=DomElement.create(t._currentView.importDialog,"div","dialog-title-bar"),o=DomElement.create(t._currentView.importDialog,"div","dialog-contents"),i=DomElement.create(n,"div","dialog-close");DomElement.createWithHTML(n,"span","dialog-title-bar-text",e.text.selectFilesText),t._currentView.importDialogDragAndDrop=DomElement.createWithHTML(o,"div","drag-and-drop-files",e.text.dragAndDropFilesText),function(e,t){t.allowFileImports&&!t._currentView.isInFetchMode&&(e.ondragover=DomElement.cancelBubble,e.ondragenter=DomElement.cancelBubble,e.ondragleave=DomElement.cancelBubble,e.ondrop=e=>{if(DomElement.cancelBubble(e),Is.defined(window.FileReader)&&e.dataTransfer.files.length>0){const n=new DataTransfer;if(t.allowFileImports){const t=e.dataTransfer.files.length;for(let o=0;o<t;o++)n.items.add(e.dataTransfer.files[o])}else n.items.add(e.dataTransfer.files[0]);d(t,n.files)}})}(t._currentView.importDialogDragAndDrop,t);const r=DomElement.create(o,"div","buttons"),a=DomElement.createButton(r,"button","","...");t._currentView.importDialogImportButton=DomElement.createButton(r,"button","default",e.text.importButtonText),t._currentView.importDialogImportButton.disabled=!0,i.onclick=()=>function(e){Disabled.Background.hide(e),Is.defined(e._currentView.importDialog)&&"none"!==e._currentView.importDialog.style.display&&(e._currentView.importDialogFileList=null,e._currentView.importDialogImportButton.disabled=!0,e._currentView.importDialog.style.display="none");ToolTip.hide(e)}(t),a.onclick=()=>u(t),t._currentView.importDialogImportButton.onclick=()=>w(t._currentView.importDialogFileList,t),ToolTip.add(i,t,e.text.closeButtonText)}(t),t.allowTypeAdding&&function(t){t._currentView.typeAddingDialog=DomElement.create(t._currentView.disabledBackground,"div","dialog add-type");const o=DomElement.create(t._currentView.typeAddingDialog,"div","dialog-title-bar"),i=DomElement.create(t._currentView.typeAddingDialog,"div","dialog-contents"),r=DomElement.create(o,"div","dialog-close");DomElement.createWithHTML(o,"span","dialog-title-bar-text",e.text.addTypeText),t._currentView.typeAddingDialogTypeInput=DomElement.create(i,"input","input-box type"),t._currentView.typeAddingDialogTypeInput.name=crypto.randomUUID(),t._currentView.typeAddingDialogTypeInput.placeholder=e.text.typePlaceholderText;const s=DomElement.create(i,"div","buttons"),c=DomElement.createButton(s,"button","default",e.text.addButtonText),u=()=>{const e=t._currentView.typeAddingDialogTypeInput.value.trim();if(Is.definedString(e)){const o=t._currentView.element.id;n[o].typeData.hasOwnProperty(e)||(n[o].typeData[e]={},n[o].totalTypes++),t._currentView.type=e,Trigger.customEvent(t.events.onTypeSwitch,e),l(t),a(t,!0)}else l(t)};t._currentView.typeAddingDialogTypeInput.onkeydown=e=>{"Enter"===e.key&&u()},c.onclick=()=>u(),r.onclick=()=>function(e){Disabled.Background.hide(e),Is.defined(e._currentView.typeAddingDialog)&&"none"!==e._currentView.typeAddingDialog.style.display&&(e._currentView.typeAddingDialog.style.display="none");ToolTip.hide(e)}(t),ToolTip.add(r,t,e.text.closeButtonText)}(t),ToolTip.render(t),function(t){if(t.title.showText||t.title.showYearSelector||t.title.showRefreshButton||t.title.showExportButton||t.title.showImportButton||t.title.showClearButton){const n=DomElement.create(t._currentView.element,"div","title-bar"),o=DomElement.create(n,"div","title"),i=t.title.showTitleDropDownMenu&&(t.views.chart.enabled||t.views.days.enabled||t.views.statistics.enabled);if(i?t.title.showTitleDropDownButton&&DomElement.create(o,"div","down-arrow"):DomElement.addClass(o,"no-click"),t.title.showText&&(o.innerHTML+=t.title.text,t.title.showSectionText&&(DomElement.createWithHTML(o,"span","section-text","["),1===t._currentView.view?DomElement.createWithHTML(o,"span","section-text-name",e.text.mapText):t.views.chart.enabled&&2===t._currentView.view?DomElement.createWithHTML(o,"span","section-text-name",e.text.chartText):t.views.days.enabled&&3===t._currentView.view?DomElement.createWithHTML(o,"span","section-text-name",e.text.daysText):t.views.months.enabled&&5===t._currentView.view?DomElement.createWithHTML(o,"span","section-text-name",e.text.monthsText):t.views.statistics.enabled&&4===t._currentView.view?DomElement.createWithHTML(o,"span","section-text-name",e.text.colorRangesText):DomElement.createWithHTML(o,"span","section-text-name",e.text.mapText),DomElement.createWithHTML(o,"span","section-text","]"))),i&&function(t,n){const o=DomElement.create(n,"div","titles-menu-container"),i=DomElement.create(o,"div","titles-menu");t.title.showTitleDropDownHeaders&&DomElement.createWithHTML(i,"div","title-menu-header",`${e.text.dataText}:`);const r=DomElement.createWithHTML(i,"div","title-menu-item",e.text.mapText);if(h(t,r,1,"map"),t.views.chart.enabled){h(t,DomElement.createWithHTML(i,"div","title-menu-item",e.text.chartText),2,"chart")}let a=null;if(t.views.days.enabled){t.title.showTitleDropDownHeaders&&(a=DomElement.createWithHTML(i,"div","title-menu-header",`${e.text.yearText}:`));h(t,DomElement.createWithHTML(i,"div","title-menu-item",e.text.daysText),3,"days")}if(t.views.months.enabled){t.title.showTitleDropDownHeaders&&!Is.defined(a)&&(a=DomElement.createWithHTML(i,"div","title-menu-header",`${e.text.yearText}:`));h(t,DomElement.createWithHTML(i,"div","title-menu-item",e.text.monthsText),5,"months")}if(t.views.statistics.enabled){t.title.showTitleDropDownHeaders&&DomElement.createWithHTML(i,"div","title-menu-header",`${e.text.statisticsText}:`);h(t,DomElement.createWithHTML(i,"div","title-menu-item",e.text.colorRangesText),4,"statistics")}}(t,o),t.title.showImportButton&&!t._currentView.isInFetchMode){const o=DomElement.createIconButton(n,"button","import","arrow-up");o.onclick=()=>function(e){Disabled.Background.show(e),Is.defined(e._currentView.importDialog)&&"block"!==e._currentView.importDialog.style.display&&(e._currentView.importDialog.style.display="block");ToolTip.hide(e)}(t),t.title.showToolTips&&ToolTip.add(o,t,e.text.importButtonText)}if(t.title.showExportButton){const o=DomElement.createIconButton(n,"button","export","arrow-down");o.onclick=()=>function(e){Disabled.Background.show(e),Is.defined(e._currentView.exportDialog)&&"block"!==e._currentView.exportDialog.style.display&&(e._currentView.exportDialogExportFilenameInput.value="",e._currentView.exportDialog.style.display="block",e._currentView.exportDialogExportFilenameInput.focus());ToolTip.hide(e)}(t),t.title.showToolTips&&ToolTip.add(o,t,e.text.exportButtonText)}if(t.title.showRefreshButton){const o=DomElement.createIconButton(n,"button","refresh","refresh");t.title.showToolTips&&ToolTip.add(o,t,e.text.refreshButtonText),o.onclick=()=>{a(t),Trigger.customEvent(t.events.onRefresh,t._currentView.element)}}if(t.title.showClearButton){const o=DomElement.createIconButton(n,"button","clear","close");t.title.showToolTips&&ToolTip.add(o,t,e.text.clearButtonText),o.onclick=()=>{!function(e){const t=e._currentView.year;let n=M(e);for(let o=e.startMonth;o<12+e.startMonth;o++){let i=o,r=t;e.startMonth>0&&o>11&&(i=o-12,r++);const a=DateTime.getTotalDaysInMonth(r,i);for(let e=0;e<a;e++){const t=new Date(r,i,e+1),o=DateTime.toStorageDate(t);n.hasOwnProperty(o)&&delete n[o]}}}(t),a(t,!0)}}if(t.title.showYearSelector){const o=DomElement.createIconButton(n,"button","back","arrow-left");o.onclick=()=>F(t),t.title.showToolTips&&ToolTip.add(o,t,e.text.backButtonText),Is.firstVisibleYear(t,t._currentView.year)&&(o.disabled=!0);let i=t._currentView.year.toString();if(t.startMonth>0&&(i+=` / ${t._currentView.year+1}`),t._currentView.yearText=DomElement.createWithHTML(n,"div","year-text",i),t.title.showYearSelectionDropDown?function(e){DomElement.create(e._currentView.yearText,"div","down-arrow");const t=DomElement.create(e._currentView.yearText,"div","years-menu-container"),n=DomElement.create(t,"div","years-menu"),o=(new Date).getFullYear();let i=null;t.style.display="block",t.style.visibility="hidden";for(let t=o-e.title.extraSelectionYears;t<o+e.title.extraSelectionYears;t++)if(Is.yearVisible(e,t)){let r=g(e,n,t,o);Is.defined(i)||(i=r)}Is.defined(i)&&(n.scrollTop=i.offsetTop-n.offsetHeight/2);t.style.display="none",t.style.visibility="visible"}(t):DomElement.addClass(t._currentView.yearText,"no-click"),t.title.showConfigurationButton){let o=DomElement.create(n,"div","configure");o.onclick=()=>function(e){Disabled.Background.show(e),Is.defined(e._currentView.configurationDialog)&&"block"!==e._currentView.configurationDialog.style.display&&(e._currentView.configurationDialog.style.display="block");const t=Visible.days(e),n=Visible.months(e);for(let n=0;n<7;n++)e._currentView.configurationDialogDayCheckBoxes[n].checked=Is.dayVisible(t,n+1);for(let t=0;t<12;t++)e._currentView.configurationDialogMonthCheckBoxes[t].checked=Is.monthVisible(n,t);ToolTip.hide(e)}(t),t.title.showToolTips&&ToolTip.add(o,t,e.text.configurationButtonText)}if(t.title.showCurrentYearButton){const o=DomElement.createIconButton(n,"button","current","pin");t.title.showToolTips&&ToolTip.add(o,t,e.text.currentYearText),o.onclick=()=>{t._currentView.year=(new Date).getFullYear()-1,R(t,!1),Trigger.customEvent(t.events.onSetYear,t._currentView.year)}}const r=DomElement.createIconButton(n,"button","next","arrow-right");r.onclick=()=>R(t),t.title.showToolTips&&ToolTip.add(r,t,e.text.nextButtonText),Is.lastVisibleYear(t,t._currentView.year)&&(r.disabled=!0)}}}(t),function(t){const o=new Date,i=t._currentView.year===o.getFullYear();if(t.yearlyStatistics.enabled&&(!t.yearlyStatistics.showOnlyForCurrentYear||i)){const r=DomElement.create(t._currentView.element,"div","yearly-statistics"),a=Visible.days(t),s=Visible.months(t),l=f(t,a,s,new Date(t._currentView.year,t.startMonth,1),new Date(t._currentView.year+1,t.startMonth,1));if(t.yearlyStatistics.showToday){let s=n[t._currentView.element.id].typeData[t._currentView.type][DateTime.toStorageDate(o)];const c=DomElement.create(r,"div","statistics-box"),u=DateTime.getWeekdayNumber(o)+1;Is.defined(s)&&Is.dayVisible(a,u)||(s=0);const d=i?Str.friendlyNumber(s):e.text.unavailableText;DomElement.createWithHTML(c,"div","statistics-box-title",`${e.text.todayText}:`);const m=DomElement.createWithHTML(c,"div","statistics-box-count",d);i||DomElement.addClass(m,"unavailable"),p(t,m,l,s,i)}if(t.yearlyStatistics.showThisWeek){let n=0;if(i){const e=DateTime.getDateForMondayOfCurrentWeek(),o=new Date(e);o.setDate(e.getDate()+7),n=f(t,a,s,e,o)}const o=i?Str.friendlyNumber(n):e.text.unavailableText,c=DomElement.create(r,"div","statistics-box");DomElement.createWithHTML(c,"div","statistics-box-title",`${e.text.thisWeekText}:`);const u=DomElement.createWithHTML(c,"div","statistics-box-count",o);i||DomElement.addClass(u,"unavailable"),p(t,u,l,n,i)}if(t.yearlyStatistics.showThisMonth){let n=0;if(i){n=f(t,a,s,new Date(o.getFullYear(),o.getMonth(),1),new Date(o.getFullYear(),o.getMonth(),DateTime.getTotalDaysInMonth(o.getFullYear(),o.getMonth())+1))}const c=i?Str.friendlyNumber(n):e.text.unavailableText,u=DomElement.create(r,"div","statistics-box");DomElement.createWithHTML(u,"div","statistics-box-title",`${e.text.thisMonthText}:`);const d=DomElement.createWithHTML(u,"div","statistics-box-count",c);i||DomElement.addClass(d,"unavailable"),p(t,d,l,n,i)}if(t.yearlyStatistics.showThisYear){const t=DomElement.create(r,"div","statistics-box");DomElement.createWithHTML(t,"div","statistics-box-title",`${e.text.thisYearText}:`),DomElement.createWithHTML(t,"div","statistics-box-count",Str.friendlyNumber(l))}""===r.innerHTML&&r.parentNode.removeChild(r)}}(t),function(t,n=!1,o){if(t._currentView.mapContentsContainer=DomElement.create(t._currentView.element,"div","map-contents-container"),t._currentView.mapContents=DomElement.create(t._currentView.mapContentsContainer,"div","map-contents"),t.views.map.showNoDataMessageWhenDataIsNotAvailable&&!function(e){let t=!1;const n=M(e),o=e._currentView.year.toString(),i=(e._currentView.year+1).toString();for(const r in n)if(n.hasOwnProperty(r)){if(DateTime.getStorageDateYear(r)===o){t=!0;break}if(e.startMonth>0&&DateTime.getStorageDateYear(r)===i){t=!0;break}}return t}(t)){const o=DomElement.createWithHTML(t._currentView.mapContents,"div","no-data-message",e.text.noMapDataMessage);n&&DomElement.addClass(o,"view-switch")}else{t._currentView.mapContents.style.minHeight="unset";const i=DomElement.create(t._currentView.mapContents,"div","map"),r=t._currentView.year;let s=!1;if(n&&DomElement.addClass(i,"view-switch"),t.views.map.showDayNames){const n=DomElement.create(i,"div","days"),o=t.views.map.showMinimalDayNames&&7===t.views.map.daysToShow.length;t.views.map.showMonthNames&&!t.views.map.placeMonthNamesOnTheBottom||(n.className="days-months-bottom");for(let i=0;i<7;i++)if(Is.dayVisible(t.views.map.daysToShow,i+1)){const r=o&&i%3!=0?" ":e.text.dayNames[i],a=DomElement.createWithHTML(n,"div","day-name",r);t.views.days.enabled&&(a.ondblclick=()=>S(t,3,"days"))}t.views.map.showDaysInReverseOrder&&DomElement.reverseChildrenOrder(n)}const l=DomElement.create(i,"div","months"),c=N(t);for(let n=t.startMonth;n<12+t.startMonth;n++){let o=n,i=r;if(t.startMonth>0&&n>11&&(o=n-12,i++),Is.monthVisible(t.views.map.monthsToShow,o)){const n=DomElement.create(l,"div","month"),r=DomElement.create(n,"div","day-columns");let a=DateTime.getTotalDaysInMonth(i,o),u=DomElement.create(r,"div","day-column"),d=!1;const m=new Date(i,o,1),w=DateTime.getWeekdayNumber(m);let h=1;a+=w;for(let e=0;e<a;e++){if(e>=w?d=!0:Is.dayVisible(t.views.map.daysToShow,h)&&DomElement.create(u,"div","day-disabled"),d){let n=null;if(Is.dayVisible(t.views.map.daysToShow,h)&&(n=y(t,u,e-w,o,i,c)),(e+1)%7==0&&(t.views.map.showDaysInReverseOrder&&DomElement.reverseChildrenOrder(u),u=DomElement.create(r,"div","day-column"),h=0,0===t._currentView.dayWidth&&Is.defined(n))){let e=DomElement.getStyleValueByName(n,"margin-left",!0),o=DomElement.getStyleValueByName(n,"margin-right",!0);t._currentView.dayWidth=n.offsetWidth+e+o}}h++}if(t.views.map.showMonthNames){let a;const s=n.offsetWidth;let l=e.text.monthNames[o];t.startMonth>0&&t.views.map.showYearsInMonthNames&&(l+=` ${i}`),a=t.views.map.placeMonthNamesOnTheBottom?DomElement.createWithHTML(n,"div","month-name-bottom",l):DomElement.createWithHTML(n,"div","month-name",l,r),t.views.map.showMonthDayGaps?a.style.width=`${s}px`:a.style.width=s-t._currentView.dayWidth+"px",t.views.months.enabled&&(a.ondblclick=()=>S(t,5,"months"))}s&&Is.defined(t._currentView.dayWidth)&&(w>0&&!t.views.map.showMonthDayGaps?n.style.marginLeft=-t._currentView.dayWidth+"px":0===w&&t.views.map.showMonthDayGaps&&(n.style.marginLeft=`${t._currentView.dayWidth}px`)),t.views.map.showMonthsInReverseOrder&&DomElement.reverseChildrenOrder(r),s=!0}}t.views.map.showMonthsInReverseOrder&&DomElement.reverseChildrenOrder(l),(t.views.map.keepScrollPositions||o)&&(t._currentView.mapContents.scrollLeft=t._currentView.mapContentsScrollLeft),function(t,n){const o=DomElement.getStyleValueByNameSizingMetic(document.documentElement,"--heat-js-day-size");let i=DomElement.getStyleValueByName(document.documentElement,"--heat-js-day-size",!0);-1===t._currentView.mapZoomIncrement&&(t._currentView.mapZoomIncrement=i/10);if(t.views.map.allowZooming){const r=DomElement.create(t._currentView.mapContentsContainer,"div","zooming"),s=DomElement.create(r,"div","zoom-close-button"),l=DomElement.createIconButton(r,"button","zoom-out","minus"),c=DomElement.createWithHTML(r,"span","zoom-level",`+${Str.friendlyNumber(10*t._currentView.mapZoomLevel)}%`),u=DomElement.createIconButton(r,"button","zoom-in","plus"),d=DomElement.getStyleValueByName(document.documentElement,"--heat-js-spacing",!0);i=DomElement.getStyleValueByName(t._currentView.element,"--heat-js-day-size",!0),0===i&&(i=DomElement.getStyleValueByName(document.documentElement,"--heat-js-day-size",!0)),ToolTip.add(s,t,e.text.closeButtonText),ToolTip.add(u,t,e.text.zoomInText),ToolTip.add(l,t,e.text.zoomOutText),r.style.bottom=t._currentView.mapContentsContainer.offsetHeight-n.offsetHeight+"px",t.views.map.zoomLevel>0&&-1===t._currentView.mapZoomLevel&&(i+=parseFloat((t.views.map.zoomLevel*t._currentView.mapZoomIncrement).toFixed(1)),t._currentView.mapZoomLevel=t.views.map.zoomLevel,t._currentView.element.style.setProperty("--heat-js-day-size",`${i}${o}`),c.innerText=`+${Str.friendlyNumber(10*t._currentView.mapZoomLevel)}%`),-1===t._currentView.mapZoomLevel&&(t._currentView.mapZoomLevel=0,c.innerText=`+${Str.friendlyNumber(10*t._currentView.mapZoomLevel)}%`),t._currentView.mapContents.style.paddingRight=`${r.offsetWidth+d}px`,l.disabled=0===t._currentView.mapZoomLevel,s.onclick=()=>{t.views.map.allowZooming=!1,t._currentView.mapContents.style.paddingRight="0px",r.parentNode.removeChild(r)},u.onclick=()=>{i+=t._currentView.mapZoomIncrement,i=parseFloat(i.toFixed(1)),t._currentView.mapZoomLevel++,t._currentView.element.style.setProperty("--heat-js-day-size",`${i}${o}`),l.disabled=!1,c.innerText=`+${Str.friendlyNumber(10*t._currentView.mapZoomLevel)}%`,Trigger.customEvent(t.events.onMapZoomLevelChange,t._currentView.element,t._currentView.mapZoomLevel),a(t,!1,!1,!0)},l.onclick=()=>{t._currentView.mapZoomLevel>0&&(i-=t._currentView.mapZoomIncrement,i=parseFloat(i.toFixed(1)),t._currentView.mapZoomLevel--,t._currentView.element.style.setProperty("--heat-js-day-size",`${i}${o}`),l.disabled=0===t._currentView.mapZoomLevel,c.innerText=`+${Str.friendlyNumber(10*t._currentView.mapZoomLevel)}%`,Trigger.customEvent(t.events.onMapZoomLevelChange,t._currentView.element,t._currentView.mapZoomLevel),a(t,!1,!1,!0))}}else t.views.map.zoomLevel>0&&-1===t._currentView.mapZoomLevel&&(i+=parseFloat((t.views.map.zoomLevel*t._currentView.mapZoomIncrement).toFixed(1)),t._currentView.mapZoomLevel=t.views.map.zoomLevel,t._currentView.element.style.setProperty("--heat-js-day-size",`${i}${o}`))}(t,i)}}(t,i,r),t.views.chart.enabled&&function(t,n){t._currentView.chartContents=DomElement.create(t._currentView.element,"div","chart-contents");const o=DomElement.create(t._currentView.chartContents,"div","chart");let i=DomElement.create(o,"div","y-labels");const r=DomElement.create(o,"div","day-lines"),a=N(t),s=function(e){let t=0;const n=M(e),o=e._currentView.year;for(let i=e.startMonth;i<12+e.startMonth;i++){let r=i,a=o;if(e.startMonth>0&&i>11&&(r=i-12,a++),Is.monthVisible(e.views.chart.monthsToShow,r)){const o=DateTime.getTotalDaysInMonth(a,r);for(let i=0;i<o;i++){const o=new Date(a,r,i+1),s=DateTime.toStorageDate(o),l=DateTime.getWeekdayNumber(o)+1;n.hasOwnProperty(s)&&Is.dayVisible(e.views.chart.daysToShow,l)&&(t=Math.max(t,n[s]))}}}return t}(t),l=t._currentView.year;let c=0;n&&DomElement.addClass(o,"view-switch");if(s>0&&t.views.chart.showChartYLabels){const e=DomElement.createWithHTML(i,"div","label-0",s.toString());DomElement.createWithHTML(i,"div","label-25",(3*Math.floor(s/4)).toString()),DomElement.createWithHTML(i,"div","label-50",Math.floor(s/2).toString()),DomElement.createWithHTML(i,"div","label-75",Math.floor(s/4).toString()),DomElement.createWithHTML(i,"div","label-100","0"),i.style.width=`${e.offsetWidth}px`,c=i.offsetWidth+DomElement.getStyleValueByName(i,"margin-right",!0)}else i.parentNode.removeChild(i),i=null;if(0===s){t._currentView.chartContents.style.minHeight=`${t._currentView.mapContents.offsetHeight}px`,o.parentNode.removeChild(o);const i=DomElement.createWithHTML(t._currentView.chartContents,"div","no-data-message",e.text.noChartDataMessage);n&&DomElement.addClass(i,"view-switch")}else{const n=r.offsetHeight/s;let o=0,i=0,u=[];for(let e=t.startMonth;e<12+t.startMonth;e++){let s=e,c=l;if(t.startMonth>0&&e>11&&(s=e-12,c++),Is.monthVisible(t.views.chart.monthsToShow,s)){const e=DateTime.getTotalDaysInMonth(c,s);let l=1,d=!1;o++;for(let o=0;o<e;o++){const e=new Date(c,s,l),m=DateTime.getWeekdayNumber(e)+1;if(Is.dayVisible(t.views.chart.daysToShow,m)){const e=D(r,t,o+1,s,c,a,n);d||(u.push(e),d=!0)}(o+1)%7==0&&(l=0),l++,i++}}}if(t.views.chart.showInReverseOrder&&(DomElement.reverseChildrenOrder(r),u=u.reverse()),t.views.chart.showMonthNames){const n=DomElement.create(t._currentView.chartContents,"div","chart-months");let o=0;const i=i=>{let r=i+t.startMonth,a=l;if(t.startMonth>0&&r>11&&(r-=12,a++),Is.monthVisible(t.views.chart.monthsToShow,r)){let i=e.text.monthNames[r];t.startMonth>0&&t.views.chart.showYearsInMonthNames&&(i+=` ${a}`);let s=DomElement.createWithHTML(n,"div","month-name",i);s.style.left=`${u[o].offsetLeft}px`,t.views.months.enabled&&(s.ondblclick=()=>S(t,5,"months")),o++}};if(t.views.chart.showInReverseOrder)for(let e=12;e--;)i(e);else for(let e=0;e<12;e++)i(e);n.style.width=`${r.offsetWidth}px`;const a=DomElement.create(n,"div","month-name-space");a.style.height=`${n.offsetHeight}px`,a.style.width=`${c}px`}t.views.chart.keepScrollPositions&&(t._currentView.chartContents.scrollLeft=t._currentView.chartContentsScrollLeft)}t._currentView.chartContents.style.display="none"}(t,i),t.views.days.enabled&&function(t,n){t._currentView.daysContents=DomElement.create(t._currentView.element,"div","days-contents");const o=DomElement.create(t._currentView.daysContents,"div","days"),i=DomElement.create(t._currentView.daysContents,"div","day-names");let r=DomElement.create(o,"div","y-labels");const a=DomElement.create(o,"div","day-lines"),s=function(e){const t={values:{1:0,2:0,3:0,4:0,5:0,6:0,7:0},valueOpacities:{},largestValue:0,totalValue:0},n=M(e),o=e._currentView.year;for(let i=e.startMonth;i<12+e.startMonth;i++){let r=i,a=o;if(e.startMonth>0&&i>11&&(r=i-12,a++),Is.monthVisible(e.views.days.monthsToShow,r)){const o=DateTime.getTotalDaysInMonth(a,r);for(let i=0;i<o;i++){const o=DateTime.toStorageDate(new Date(a,r,i+1));if(n.hasOwnProperty(o)){const i=DateTime.getStorageDate(o),r=new Date(parseInt(i[2]),parseInt(i[1]),parseInt(i[0])),a=DateTime.getWeekdayNumber(r)+1;!Is.holiday(e,r).matched&&Is.dayVisible(e.views.days.daysToShow,a)&&(t.values[a]+=n[o],t.totalValue+=n[o],t.largestValue=Math.max(t.largestValue,t.values[a]))}}}}return Convert.valuesToOpacitiesOrder(t),t}(t);!n||t.views.days.useDifferentOpacities&&t.views.days.showDayCounts||DomElement.addClass(o,"view-switch");if(s.largestValue>0&&t.views.days.showChartYLabels){const e=DomElement.createWithHTML(r,"div","label-0",s.largestValue.toString());DomElement.createWithHTML(r,"div","label-25",(3*Math.floor(s.largestValue/4)).toString()),DomElement.createWithHTML(r,"div","label-50",Math.floor(s.largestValue/2).toString()),DomElement.createWithHTML(r,"div","label-75",Math.floor(s.largestValue/4).toString()),DomElement.createWithHTML(r,"div","label-100","0"),r.style.width=`${e.offsetWidth}px`,i.style.paddingLeft=`${r.offsetWidth+DomElement.getStyleValueByName(r,"margin-right",!0)}px`}else r.parentNode.removeChild(r),r=null;if(0===s.largestValue){t._currentView.daysContents.style.minHeight=`${t._currentView.mapContents.offsetHeight}px`,o.parentNode.removeChild(o),i.parentNode.removeChild(i);const r=DomElement.createWithHTML(t._currentView.daysContents,"div","no-days-message",e.text.noDaysDataMessage);n&&DomElement.addClass(r,"view-switch")}else{const n=a.offsetHeight/s.largestValue;for(const o in s.values)if(s.values.hasOwnProperty(o)&&Is.dayVisible(t.views.days.daysToShow,parseInt(o))){const r=s.valueOpacities[s.values[o]];v(a,parseInt(o),s.values[o],t,n,r,s.totalValue),t.views.days.showDayNames&&DomElement.createWithHTML(i,"div","day-name",e.text.dayNames[parseInt(o)-1])}t.views.days.showInReverseOrder&&(DomElement.reverseChildrenOrder(a),DomElement.reverseChildrenOrder(i)),t.views.days.keepScrollPositions&&(t._currentView.daysContents.scrollLeft=t._currentView.daysContentsScrollLeft)}t._currentView.daysContents.style.display="none"}(t,i),t.views.months.enabled&&function(t,n){t._currentView.monthsContents=DomElement.create(t._currentView.element,"div","months-contents");const o=DomElement.create(t._currentView.monthsContents,"div","months"),i=DomElement.create(t._currentView.monthsContents,"div","month-names");let r=DomElement.create(o,"div","y-labels");const a=DomElement.create(o,"div","month-lines"),s=function(e){const t={values:{1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},valueOpacities:{},largestValue:0,totalValue:0},n=M(e),o=e._currentView.year;for(let i=e.startMonth;i<12+e.startMonth;i++){let r=i,a=o;if(e.startMonth>0&&i>11&&(r=i-12,a++),Is.monthVisible(e.views.months.monthsToShow,r)){const o=r+1,i=DateTime.getTotalDaysInMonth(a,r);for(let s=0;s<i;s++){const i=DateTime.toStorageDate(new Date(a,r,s+1));if(n.hasOwnProperty(i)){const r=DateTime.getStorageDate(i),a=new Date(parseInt(r[2]),parseInt(r[1]),parseInt(r[0])),s=DateTime.getWeekdayNumber(a)+1;!Is.holiday(e,a).matched&&Is.dayVisible(e.views.days.daysToShow,s)&&(t.values[o]+=n[i],t.totalValue+=n[i],t.largestValue=Math.max(t.largestValue,t.values[o]))}}}}return Convert.valuesToOpacitiesOrder(t),t}(t);!n||t.views.months.useDifferentOpacities&&t.views.months.showMonthCounts||DomElement.addClass(o,"view-switch");if(s.largestValue>0&&t.views.months.showChartYLabels){const e=DomElement.createWithHTML(r,"div","label-0",s.largestValue.toString());DomElement.createWithHTML(r,"div","label-25",(3*Math.floor(s.largestValue/4)).toString()),DomElement.createWithHTML(r,"div","label-50",Math.floor(s.largestValue/2).toString()),DomElement.createWithHTML(r,"div","label-75",Math.floor(s.largestValue/4).toString()),DomElement.createWithHTML(r,"div","label-100","0"),r.style.width=`${e.offsetWidth}px`,i.style.paddingLeft=`${r.offsetWidth+DomElement.getStyleValueByName(r,"margin-right",!0)}px`}else r.parentNode.removeChild(r),r=null;if(0===s.largestValue){t._currentView.monthsContents.style.minHeight=`${t._currentView.mapContents.offsetHeight}px`,o.parentNode.removeChild(o),i.parentNode.removeChild(i);const r=DomElement.createWithHTML(t._currentView.monthsContents,"div","no-months-message",e.text.noMonthsDataMessage);n&&DomElement.addClass(r,"view-switch")}else{const n=a.offsetHeight/s.largestValue;for(let o=t.startMonth;o<12+t.startMonth;o++){let r=o;t.startMonth>0&&o>11&&(r=o-12);const l=r+1;if(s.values.hasOwnProperty(l)&&Is.monthVisible(t.views.months.monthsToShow,r)){const o=s.valueOpacities[s.values[l]];T(a,l,s.values[l],t,n,o,s.totalValue),t.views.months.showMonthNames&&DomElement.createWithHTML(i,"div","month-name",e.text.monthNames[r])}}t.views.months.showInReverseOrder&&(DomElement.reverseChildrenOrder(a),DomElement.reverseChildrenOrder(i)),t.views.months.keepScrollPositions&&(t._currentView.monthsContents.scrollLeft=t._currentView.monthsContentsScrollLeft)}t._currentView.monthsContents.style.display="none"}(t,i),t.views.statistics.enabled&&function(t,n){t._currentView.statisticsContents=DomElement.create(t._currentView.element,"div","statistics-contents");const o=DomElement.create(t._currentView.statisticsContents,"div","statistics"),i=DomElement.create(t._currentView.statisticsContents,"div","statistics-ranges");let r=DomElement.create(o,"div","y-labels");const a=DomElement.create(o,"div","range-lines"),s=N(t),l=function(e,t){const n=M(e),o=e._currentView.year,i={types:{},largestValue:0,totalValue:0};for(let r=e.startMonth;r<12+e.startMonth;r++){let a=r,s=o;if(e.startMonth>0&&r>11&&(a=r-12,s++),Is.monthVisible(e.views.statistics.monthsToShow,a)){const o=DateTime.getTotalDaysInMonth(s,a);for(let r=0;r<o;r++){const o=DateTime.toStorageDate(new Date(s,a,r+1));if(n.hasOwnProperty(o)){const r=DateTime.getStorageDate(o),a=new Date(parseInt(r[2]),parseInt(r[1]),parseInt(r[0])),s=DateTime.getWeekdayNumber(a)+1;if(!Is.holiday(e,a).matched&&Is.dayVisible(e.views.statistics.daysToShow,s)){const r=k(e,t,n[o]),a=Is.defined(r)?r.minimum.toString():"0";i.types.hasOwnProperty(a)||(i.types[a]=0),i.types[a]++,i.totalValue++,i.largestValue=Math.max(i.largestValue,i.types[a])}}}}}return i}(t,s);n&&DomElement.addClass(o,"view-switch");if(l.largestValue>0&&t.views.statistics.showChartYLabels){const e=DomElement.createWithHTML(r,"div","label-0",l.largestValue.toString());DomElement.createWithHTML(r,"div","label-25",(3*Math.floor(l.largestValue/4)).toString()),DomElement.createWithHTML(r,"div","label-50",Math.floor(l.largestValue/2).toString()),DomElement.createWithHTML(r,"div","label-75",Math.floor(l.largestValue/4).toString()),DomElement.createWithHTML(r,"div","label-100","0"),r.style.width=`${e.offsetWidth}px`,i.style.paddingLeft=`${r.offsetWidth+DomElement.getStyleValueByName(r,"margin-right",!0)}px`}else r.parentNode.removeChild(r),r=null;if(0===l.largestValue){t._currentView.statisticsContents.style.minHeight=`${t._currentView.mapContents.offsetHeight}px`,o.parentNode.removeChild(o),i.parentNode.removeChild(i);const r=DomElement.createWithHTML(t._currentView.statisticsContents,"div","no-statistics-message",e.text.noStatisticsDataMessage);n&&DomElement.addClass(r,"view-switch")}else{const e=a.offsetHeight/l.largestValue;t.views.statistics.showColorRangeLabels||i.parentNode.removeChild(i);for(const n in l.types)if(l.types.hasOwnProperty(n)){x(parseInt(n),a,l.types[n],t,s,e,l.totalValue);const o=A(s,parseInt(n));t.views.statistics.showColorRangeLabels&&(t.views.statistics.useColorRangeNamesForLabels&&Is.defined(o)&&Is.definedString(o.name)?DomElement.createWithHTML(i,"div","range-name",o.name):DomElement.createWithHTML(i,"div","range-name",`${n}+`))}t.views.statistics.showInReverseOrder&&(DomElement.reverseChildrenOrder(a),DomElement.reverseChildrenOrder(i)),t.views.statistics.keepScrollPositions&&(t._currentView.statisticsContents.scrollLeft=t._currentView.statisticsContentsScrollLeft)}t._currentView.statisticsContents.style.display="none"}(t,i),function(t){const o=DomElement.create(t._currentView.element,"div","guide"),i=DomElement.create(o,"div","map-types"),r=E(t);if(n[t._currentView.element.id].totalTypes>1){if(Is.definedString(t.description.text)){const e=DomElement.create(t._currentView.element,"div","description",o);C(t,e)}const a=Object.keys(n[t._currentView.element.id].typeData).sort(),s=a.length;for(let n=0;n<s;n++){const o=a[n];(o!==e.text.unknownTrendText||r>0)&&b(t,i,o)}if(t.allowTypeAdding){const n=DomElement.createIconButton(i,"button","add","plus");ToolTip.add(n,t,e.text.addTypeText),n.onclick=()=>function(e){Disabled.Background.show(e),Is.defined(e._currentView.typeAddingDialog)&&"block"!==e._currentView.typeAddingDialog.style.display&&(e._currentView.typeAddingDialogTypeInput.value="",e._currentView.typeAddingDialog.style.display="block",e._currentView.typeAddingDialogTypeInput.focus());ToolTip.hide(e)}(t)}}else C(t,i);if(t.guide.enabled){const n=DomElement.create(o,"div","map-toggles");if(t.guide.showLessAndMoreLabels){let o=DomElement.createWithHTML(n,"div","less-text",e.text.lessText);t.guide.colorRangeTogglesEnabled?o.onclick=()=>L(t,!1):DomElement.addClass(o,"no-click")}const i=DomElement.create(n,"div","days"),r=N(t),a=r.length;for(let e=0;e<a;e++)V(t,i,r[e]);if(t.guide.showLessAndMoreLabels){const o=DomElement.createWithHTML(n,"div","more-text",e.text.moreText);t.guide.colorRangeTogglesEnabled?o.onclick=()=>L(t,!0):DomElement.addClass(o,"no-click")}}}(t),t._currentView.mapContentsContainer.style.display="none",1===t._currentView.view?t._currentView.mapContentsContainer.style.display="block":t.views.chart.enabled&&2===t._currentView.view?t._currentView.chartContents.style.display="block":t.views.days.enabled&&3===t._currentView.view?t._currentView.daysContents.style.display="block":t.views.months.enabled&&5===t._currentView.view?t._currentView.monthsContents.style.display="block":t.views.statistics.enabled&&4===t._currentView.view?t._currentView.statisticsContents.style.display="block":(t._currentView.view=1,t._currentView.mapContentsContainer.style.display="block")}function s(e,t=!0){(t?window.addEventListener:window.removeEventListener)("blur",()=>ToolTip.hide(e))}function l(e){Disabled.Background.hide(e),Is.defined(e._currentView.exportDialog)&&"none"!==e._currentView.exportDialog.style.display&&(e._currentView.exportDialog.style.display="none"),ToolTip.hide(e)}function c(t,n=null,o=null,i=!0){const r=Default2.getString(n,t.exportType).toLowerCase(),a=Export.File.mimeType(r),s=function(e,t){const n={},o=M(e);if(t){const t=e._currentView.year,i=Visible.days(e),r=Visible.months(e);for(let a=e.startMonth;a<12+e.startMonth;a++){let s=a,l=t;if(e.startMonth>0&&a>11&&(s=a-12,l++),Is.monthVisible(r,s)){const e=DateTime.getTotalDaysInMonth(l,s);for(let t=0;t<e;t++){const e=new Date(l,s,t+1),r=DateTime.toStorageDate(e),a=DateTime.getWeekdayNumber(e)+1;Is.dayVisible(i,a)&&o.hasOwnProperty(r)&&(n[r]=o[r])}}}}else{const e=[];for(const t in o)o.hasOwnProperty(t)&&e.push(t);e.sort();const t=e.length;for(let i=0;i<t;i++){const t=e[i];o.hasOwnProperty(t)&&(n[t]=o[t])}}return n}(t,i),l=Export.Contents.get(r,s,e);if(Is.definedString(l)){const n=DomElement.create(document.body,"a");n.style.display="none",n.setAttribute("target","_blank"),n.setAttribute("href",`data:${a};charset=utf-8,${encodeURIComponent(l)}`),n.setAttribute("download",Export.File.filename(e,t,o,r)),n.click(),document.body.removeChild(n),Trigger.customEvent(t.events.onExport,t._currentView.element)}}function u(e){const t=[];let n;for(n in ImportType)t.push(`.${n}`);const o=DomElement.createWithNoContainer("input");o.type="file",o.accept=t.join(", "),o.multiple=e.allowMultipleFileImports,o.onchange=()=>d(e,o.files),o.click()}function d(t,n){if(n.length<=0)t._currentView.importDialogDragAndDrop.innerHTML=e.text.dragAndDropFilesText,t._currentView.importDialogImportButton.disabled=!0;else{t._currentView.importDialogFileList=n,t._currentView.importDialogDragAndDrop.innerHTML="",t._currentView.importDialogImportButton.disabled=!1;const o=n.length;for(let i=0;i<o;i++){const o=n[i].name,r=DomElement.createWithHTML(t._currentView.importDialogDragAndDrop,"div","filename",`<b>${i+1}</b>. ${o}`),a=DomElement.create(r,"div","remove");ToolTip.add(a,t,e.text.removeButtonText),a.onclick=()=>m(t,i)}}}function m(e,t){const n=new DataTransfer,o=e._currentView.importDialogFileList.length;for(let i=0;i<o;i++)i!==t&&n.items.add(e._currentView.importDialogFileList[i]);d(e,n.files)}function w(t,n){const o=t.length,i=[],r=M(n),s=(e,t)=>{i.push(e);for(const e in t)t.hasOwnProperty(e)&&(r.hasOwnProperty(e)||(r[e]=0),r[e]+=t[e]);i.length===o&&(Trigger.customEvent(n.events.onImport,n._currentView.element),a(n,!0))};for(let n=0;n<o;n++){const o=t[n],i=o.name.split(".").pop().toLowerCase();Import.file(o,i,s,e)}}function h(e,t,n,o){e._currentView.view===n?DomElement.addClass(t,"title-menu-item-active"):t.onclick=()=>S(e,n,o)}function g(e,t,n,o){let i=null;const r=0===e.startMonth?n.toString():`${n} / ${n+1}`,s=DomElement.createWithHTML(t,"div","year-menu-item",r);return e._currentView.year!==n?(s.onclick=()=>{e._currentView.year=n,a(e),Trigger.customEvent(e.events.onSetYear,e._currentView.year)},n===o&&DomElement.addClass(s,"year-menu-item-current")):(DomElement.addClass(s,"year-menu-item-active"),i=s),i}function p(e,t,n,o,i){if(i&&e.yearlyStatistics.showPercentages){const i=o/n*100;if(!isNaN(i)){const n=`${i.toFixed(e.percentageDecimalPoints)}%`,o=DomElement.create(t,"span","percentage");DomElement.createWithHTML(o,"span","percentage-bracket","("),DomElement.createWithHTML(o,"span","percentage-text",n),DomElement.createWithHTML(o,"span","percentage-bracket",")")}}}function f(e,t,o,i,r){let a=0,s=new Date(i);for(;s<r;){const i=n[e._currentView.element.id].typeData[e._currentView.type][DateTime.toStorageDate(s)],r=DateTime.getWeekdayNumber(s)+1;Is.monthVisible(o,s.getMonth())&&Is.dayVisible(t,r)&&Is.definedNumber(i)&&(a+=i),s.setDate(s.getDate()+1)}return a}function y(t,o,i,r,a,s){const l=i+1,c=DomElement.create(o,"div","day"),u=new Date(a,r,l),d=Is.holiday(t,u);let m=n[t._currentView.element.id].typeData[t._currentView.type][DateTime.toStorageDate(u)];m=Default2.getNumber(m,0),c.setAttribute(Constant.HEAT_JS_MAP_DATE_ATTRIBUTE_NAME,`${Str.padNumber(l)}-${Str.padNumber(r+1)}-${a}`),t.views.map.showToolTips&&_(t,c,u,m,t.views.map.dayToolTipText,t.events.onMapDayToolTipRender,d.matched,t.views.map.showCountsInToolTips),t.views.map.showDayDateNumbers&&DomElement.createWithHTML(c,"div","count-date",`${l.toString()}<sup>${DateTime.getDayOrdinal(e,l)}</sup>`),t.views.map.showDayCounts&&m>0&&DomElement.createWithHTML(c,"div","count",Str.friendlyNumber(m)),Is.definedFunction(t.events.onMapDayClick)?c.onclick=()=>Trigger.customEvent(t.events.onMapDayClick,u,m,d.matched):Is.definedFunction(t.events.onMapDayDblClick)?c.ondblclick=()=>Trigger.customEvent(t.events.onMapDayDblClick,u,m,d.matched):DomElement.addClass(c,"no-hover");const w=k(t,s,m,u);return Is.defined(w)&&O(t,w.id)&&(Is.definedString(w.mapCssClassName)?DomElement.addClass(c,w.mapCssClassName):DomElement.addClass(c,w.cssClassName)),t.views.map.highlightCurrentDay&&DateTime.isTodaysDate(u)&&DomElement.addClass(c,"today"),c}function D(t,n,o,i,r,a,s){const l=new Date(r,i,o),c=DomElement.create(t,"div","day-line"),u=Is.holiday(n,l);let d=M(n)[DateTime.toStorageDate(l)];d=Default2.getNumber(d,0),c.setAttribute(Constant.HEAT_JS_CHART_DATE_ATTRIBUTE_NAME,`${Str.padNumber(o)}-${Str.padNumber(i+1)}-${r}`),n.views.chart.showToolTips&&_(n,c,l,d,n.views.chart.dayToolTipText,n.events.onChartDayToolTipRender,u.matched,n.views.chart.showCountsInToolTips),(n.views.chart.showLineCounts||n.views.chart.showLineDateNumbers)&&DomElement.addClass(c,"day-line-count"),n.views.chart.showLineDateNumbers&&DomElement.createWithHTML(c,"div","count-date",`${o.toString()}<sup>${DateTime.getDayOrdinal(e,o)}</sup>`),n.views.chart.showLineCounts&&d>0&&DomElement.createWithHTML(c,"div","count",Str.friendlyNumber(d));const m=d*s;c.style.height=`${m}px`,m<=0&&(c.style.visibility="hidden"),Is.definedFunction(n.events.onChartDayClick)?c.onclick=()=>Trigger.customEvent(n.events.onChartDayClick,l,d,u.matched):Is.definedFunction(n.events.onChartDayDblClick)?c.ondblclick=()=>Trigger.customEvent(n.events.onChartDayDblClick,l,d,u.matched):DomElement.addClass(c,"no-hover");const w=k(n,a,d,l);return Is.defined(w)&&O(n,w.id)&&(Is.definedString(w.chartCssClassName)?DomElement.addClass(c,w.chartCssClassName):DomElement.addClass(c,w.cssClassName)),n.views.chart.highlightCurrentDay&&DateTime.isTodaysDate(l)&&DomElement.addClass(c,"today"),n.views.chart.useGradients&&DomElement.addGradientEffect(n._currentView.element,c),c}function v(e,t,n,o,i,r,a){const s=DomElement.create(e,"div","day-line"),l=n*i;let c=null;if(s.style.height=`${l}px`,s.setAttribute(Constant.HEAT_JS_DAY_NUMBER_ATTRIBUTE_NAME,t.toString()),l<=0&&(s.style.visibility="hidden"),o.views.days.showToolTips&&ToolTip.add(s,o,Str.friendlyNumber(n)),Is.definedFunction(o.events.onWeekDayClick)?s.onclick=()=>Trigger.customEvent(o.events.onWeekDayClick,t,n,o._currentView.year):Is.definedFunction(o.events.onWeekDayDblClick)?s.ondblclick=()=>Trigger.customEvent(o.events.onWeekDayDblClick,t,n,o._currentView.year):DomElement.addClass(s,"no-hover"),o.views.days.showDayCounts&&n>0&&(DomElement.addClass(s,"day-line-count"),c=DomElement.createWithHTML(s,"div","count",Str.friendlyNumber(n)),o.views.days.showDayCountPercentages&&DomElement.createWithHTML(c,"div","percentage",`${(n/a*100).toFixed(o.percentageDecimalPoints)}%`)),o.views.days.useGradients)DomElement.addGradientEffect(o._currentView.element,s),Is.defined(c)&&DomElement.addClass(c,"blend-colors");else if(o.views.days.useDifferentOpacities){const e=DomElement.getStyleValueByName(s,"background-color"),t=DomElement.getStyleValueByName(s,"border-color");Is.defined(c)&&DomElement.addClass(c,"blend-colors"),Is.rgbColor(e)?s.style.backgroundColor=Convert.toRgbOpacityColor(e,r):Is.hexColor(e)&&(s.style.backgroundColor=Convert.toRgbOpacityColor(Convert.hexToRgba(e),r)),Is.rgbColor(t)?s.style.borderColor=Convert.toRgbOpacityColor(t,r):Is.hexColor(t)&&(s.style.borderColor=Convert.toRgbOpacityColor(Convert.hexToRgba(t),r))}}function T(e,t,n,o,i,r,a){const s=DomElement.create(e,"div","month-line"),l=n*i,c=new Date;let u=null;s.style.height=`${l}px`,s.setAttribute(Constant.HEAT_JS_MONTH_NUMBER_ATTRIBUTE_NAME,t.toString()),l<=0&&(s.style.visibility="hidden"),o.views.months.showToolTips&&ToolTip.add(s,o,Str.friendlyNumber(n));let d=o._currentView.year;if(o.startMonth>0&&t-1<o.startMonth&&d++,Is.definedFunction(o.events.onMonthClick)?s.onclick=()=>Trigger.customEvent(o.events.onMonthClick,t,n,d):Is.definedFunction(o.events.onMonthDblClick)?s.ondblclick=()=>Trigger.customEvent(o.events.onMonthDblClick,t,n,d):DomElement.addClass(s,"no-hover"),o.views.months.showMonthCounts&&n>0&&(DomElement.addClass(s,"month-line-count"),u=DomElement.createWithHTML(s,"div","count",Str.friendlyNumber(n)),o.views.months.showMonthCountPercentages&&DomElement.createWithHTML(u,"div","percentage",`${(n/a*100).toFixed(o.percentageDecimalPoints)}%`)),o.views.months.highlightCurrentMonth&&c.getMonth()===t-1&&o._currentView.year===c.getFullYear()&&DomElement.addClass(s,"today"),o.views.months.useGradients)DomElement.addGradientEffect(o._currentView.element,s),Is.defined(u)&&DomElement.addClass(u,"blend-colors");else if(o.views.months.useDifferentOpacities){const e=DomElement.getStyleValueByName(s,"background-color"),t=DomElement.getStyleValueByName(s,"border-color");Is.defined(u)&&DomElement.addClass(u,"blend-colors"),Is.rgbColor(e)?s.style.backgroundColor=Convert.toRgbOpacityColor(e,r):Is.hexColor(e)&&(s.style.backgroundColor=Convert.toRgbOpacityColor(Convert.hexToRgba(e),r)),Is.rgbColor(t)?s.style.borderColor=Convert.toRgbOpacityColor(t,r):Is.hexColor(t)&&(s.style.borderColor=Convert.toRgbOpacityColor(Convert.hexToRgba(t),r))}}function x(e,t,n,o,i,r,a){const s=DomElement.create(t,"div","range-line"),l=A(i,e),c=n*r;if(s.style.height=`${c}px`,Is.defined(l)&&Is.definedString(l.name)&&s.setAttribute(Constant.HEAT_JS_STATISTICS_COLOR_RANGE_NAME_ATTRIBUTE_NAME,l.name),c<=0&&(s.style.visibility="hidden"),o.views.statistics.showToolTips){let e;e=Is.defined(l)&&Is.definedString(l.name)&&o.views.statistics.showRangeNamesInToolTips?`${l.name}: <b class="tooltip-count">${Str.friendlyNumber(n)}</b>`:Str.friendlyNumber(n),ToolTip.add(s,o,e)}if(o.views.statistics.showRangeCounts&&n>0){DomElement.addClass(s,"range-line-count");const e=DomElement.createWithHTML(s,"div","count",Str.friendlyNumber(n));o.views.statistics.showRangeCountPercentages&&DomElement.createWithHTML(e,"div","percentage",`${(n/a*100).toFixed(o.percentageDecimalPoints)}%`)}Is.definedFunction(o.events.onStatisticClick)?s.onclick=()=>Trigger.customEvent(o.events.onStatisticClick,l,n,o._currentView.year):Is.definedFunction(o.events.onStatisticDblClick)?s.ondblclick=()=>Trigger.customEvent(o.events.onStatisticDblClick,l,n,o._currentView.year):DomElement.addClass(s,"no-hover"),Is.defined(l)&&O(o,l.id)&&(Is.definedString(l.statisticsCssClassName)?DomElement.addClass(s,l.statisticsCssClassName):DomElement.addClass(s,l.cssClassName)),o.views.statistics.useGradients&&DomElement.addGradientEffect(o._currentView.element,s)}function b(e,t,n){const o=DomElement.createButton(t,"button","type",n);e._currentView.type===n&&DomElement.addClass(o,"active"),o.onclick=()=>{e._currentView.type!==n&&(e._currentView.type=n,Trigger.customEvent(e.events.onTypeSwitch,n),a(e))}}function V(e,t,n){const o=DomElement.create(t,"div");o.className="day",e.guide.showToolTips&&ToolTip.add(o,e,n.tooltipText),O(e,n.id)&&(1===e._currentView.view&&Is.definedString(n.mapCssClassName)?DomElement.addClass(o,n.mapCssClassName):e.views.chart.enabled&&2===e._currentView.view&&Is.definedString(n.chartCssClassName)?DomElement.addClass(o,n.chartCssClassName):e.views.statistics.enabled&&4===e._currentView.view&&Is.definedString(n.statisticsCssClassName)?DomElement.addClass(o,n.statisticsCssClassName):DomElement.addClass(o,n.cssClassName)),e.guide.showNumbersInGuide&&(DomElement.addClass(o,"day-number"),o.innerHTML=`${n.minimum}+`),e.guide.colorRangeTogglesEnabled?o.onclick=()=>function(e,t){const n=e.colorRanges.length;for(let o=0;o<n;o++){const n=e.colorRanges[o];if(n.id===t){n.visible=!Default2.getBoolean(n.visible,!0),Trigger.customEvent(e.events.onColorRangeTypeToggle,n.id,n.visible),a(e);break}}}(e,n.id):DomElement.addClass(o,"no-hover")}function C(e,t){if(Is.definedString(e.description.text))if(Is.definedString(e.description.url)){const n=DomElement.createWithHTML(t,"a","label",e.description.text);n.href=e.description.url,n.target=e.description.urlTarget}else DomElement.createWithHTML(t,"span","label",e.description.text)}function _(t,n,o,i,r,a,s,l){if(Is.definedFunction(a))ToolTip.add(n,t,Trigger.customEvent(a,o,i,s));else{let a=DateTime.getCustomFormattedDateText(e,r,o);if(t.showHolidaysInDayToolTips){let e=Is.holiday(t,o);e.matched&&Is.definedString(e.name)&&(a+=`: ${e.name}`)}l&&(a+=`: <b class="tooltip-count">${Str.friendlyNumber(i)}</b>`),ToolTip.add(n,t,a)}}function S(e,t,n){e._currentView.view=t,Trigger.customEvent(e.events.onViewSwitch,n),a(e,!1,!0)}function E(t){let o=0;for(const i in n[t._currentView.element.id].typeData[e.text.unknownTrendText])if(n[t._currentView.element.id].typeData[e.text.unknownTrendText].hasOwnProperty(i)){o++;break}return o}function I(t,o,i=!0){n[t]={options:o,typeData:{},totalTypes:1},n[t].typeData[e.text.unknownTrendText]={},i&&!o._currentView.isInFetchMode&&function(t){if(t.useLocalStorageForData&&window.localStorage){const o=window.localStorage.length,i=t._currentView.element.id;for(let t=0;t<o;t++){const o=window.localStorage.key(t);if(Str.startsWithAnyCase(o,Constant.LOCAL_STORAGE_START_ID)){const t=window.localStorage.getItem(o),r=Default2.getObjectFromString(t,e);if(r.parsed){n[i].typeData=r.object,n[i].totalTypes=0;for(const e in n[i].typeData)n[i].typeData.hasOwnProperty(e)&&n[i].totalTypes++}}}}}(o)}function M(e){return n[e._currentView.element.id].typeData[e._currentView.type]}function B(t){const o=t._currentView.element.id,i=Trigger.customEvent(t.events.onDataFetch,o);if(Is.definedObject(i)){I(o,t,!1);for(const t in i)i.hasOwnProperty(t)&&(n[o].typeData[e.text.unknownTrendText].hasOwnProperty(t)||(n[o].typeData[e.text.unknownTrendText][t]=0),n[o].typeData[e.text.unknownTrendText][t]+=i[t])}}function O(e,t){let n=!1;if(t===Constant.COLOR_RANGE_HOLIDAY_ID)n=!0;else{const o=e.colorRanges.length;for(let i=0;i<o;i++){const o=e.colorRanges[i];if(o.id===t&&Default2.getBoolean(o.visible,!0)){n=!0;break}}}return n}function L(e,t){const n=e.colorRanges.length;for(let o=0;o<n;o++)e.colorRanges[o].visible=t,Trigger.customEvent(e.events.onColorRangeTypeToggle,e.colorRanges[o].id,t);a(e)}function k(e,t,n,o=null){let i=null;if(Is.defined(o)&&Is.holiday(e,o).matched&&(i={cssClassName:"holiday",id:Constant.COLOR_RANGE_HOLIDAY_ID,visible:!0,minimum:0}),!Is.defined(i)){const e=t.length;for(let o=0;o<e;o++){const e=t[o];if(!(n>=e.minimum))break;i=e}}return i}function A(e,t){const n=e.length;let o=null;for(let i=0;i<n;i++){const n=e[i];if(t.toString()===n.minimum.toString()){o=n;break}}return o}function N(e){return e.colorRanges.sort(function(e,t){return e.minimum-t.minimum})}function F(e,t=!0){let n=!0,o=e._currentView.year;for(o--;!Is.yearVisible(e,o);){if(Is.firstVisibleYear(e,o)){n=!1;break}o--}n&&(e._currentView.year=o,a(e),t&&Trigger.customEvent(e.events.onBackYear,e._currentView.year))}function R(e,t=!0){let n=!0,o=e._currentView.year;for(o++;!Is.yearVisible(e,o);){if(Is.lastVisibleYear(e,o)){n=!1;break}o++}n&&(e._currentView.year=o,a(e),t&&Trigger.customEvent(e.events.onNextYear,e._currentView.year))}function H(e){e._currentView.element.innerHTML="",DomElement.removeClass(e._currentView.element,"heat-js"),ToolTip.assignToEvents(e,!1),document.body.removeChild(e._currentView.tooltip),e._currentView.isInFetchMode&&Is.defined(e._currentView.isInFetchModeTimer)&&clearInterval(e._currentView.isInFetchModeTimer),Trigger.customEvent(e.events.onDestroy,e._currentView.element)}function W(){if(e.observationMode){if(!Is.defined(t)){t=new MutationObserver((e,t)=>{P.renderAll()});const e={attributes:!0,childList:!0,subtree:!0};t.observe(document.body,e)}}else t.disconnect(),t=null}const P={addType:function(e,t,o=!0){if(Is.definedString(e)&&Is.definedString(t)&&n.hasOwnProperty(e)){const i=n[e].options;!i._currentView.isInFetchMode&&i.allowTypeAdding&&(n[e].typeData.hasOwnProperty(t)||(n[e].typeData[t]={},n[e].totalTypes++),o&&a(i,!0))}return P},addDates:function(t,o,i=null,r=!0){if(Is.definedString(t)&&Is.definedArray(o)&&n.hasOwnProperty(t)){const s=n[t].options;if(!s._currentView.isInFetchMode){i=Default2.getString(i,e.text.unknownTrendText);const n=o.length;for(let e=0;e<n;e++)P.addDate(t,o[e],i,!1);r&&a(s,!0)}}return P},addDate:function(t,o,i=null,r=!0){if(Is.definedString(t)&&Is.definedDate(o)&&n.hasOwnProperty(t)){const s=n[t].options;if(!s._currentView.isInFetchMode){i=Default2.getString(i,e.text.unknownTrendText);const l=DateTime.toStorageDate(o);n[t].typeData.hasOwnProperty(i)||(n[t].typeData[i]={},n[t].totalTypes++),n[t].typeData[i].hasOwnProperty(l)||(n[t].typeData[i][l]=0),n[t].typeData[i][l]++,Trigger.customEvent(s.events.onAdd,s._currentView.element),r&&a(s,!0)}}return P},updateDate:function(t,o,i,r=null,s=!0){if(Is.definedString(t)&&Is.definedDate(o)&&n.hasOwnProperty(t)){const l=n[t].options;if(!l._currentView.isInFetchMode&&i>0){const c=DateTime.toStorageDate(o);n[t].typeData.hasOwnProperty(r)&&(r=Default2.getString(r,e.text.unknownTrendText),n[t].typeData[r][c]=i,Trigger.customEvent(l.events.onUpdate,l._currentView.element),s&&a(l,!0))}}return P},removeDates:function(t,o,i=null,r=!0){if(Is.definedString(t)&&Is.definedArray(o)&&n.hasOwnProperty(t)){const s=n[t].options;if(!s._currentView.isInFetchMode){i=Default2.getString(i,e.text.unknownTrendText);const n=o.length;for(let e=0;e<n;e++)P.removeDate(t,o[e],i,!1);r&&a(s,!0)}}return P},removeDate:function(t,o,i=null,r=!0){if(Is.definedString(t)&&Is.definedDate(o)&&n.hasOwnProperty(t)){const s=n[t].options;if(!s._currentView.isInFetchMode){const l=DateTime.toStorageDate(o);n[t].typeData.hasOwnProperty(i)&&n[t].typeData[i].hasOwnProperty(l)&&(i=Default2.getString(i,e.text.unknownTrendText),n[t].typeData[i][l]>0&&n[t].typeData[i][l]--,Trigger.customEvent(s.events.onRemove,s._currentView.element),r&&a(s,!0))}}return P},clearDate:function(t,o,i=null,r=!0){if(Is.definedString(t)&&Is.definedDate(o)&&n.hasOwnProperty(t)){const s=n[t].options;if(!s._currentView.isInFetchMode){const l=DateTime.toStorageDate(o);n[t].typeData.hasOwnProperty(i)&&n[t].typeData[i].hasOwnProperty(l)&&(i=Default2.getString(i,e.text.unknownTrendText),delete n[t].typeData[i][l],Trigger.customEvent(s.events.onClear,s._currentView.element),r&&a(s,!0))}}return P},resetAll:function(e=!0){for(const t in n)n.hasOwnProperty(t)&&P.reset(t,e);return P},reset:function(t,o=!0){if(Is.definedString(t)&&n.hasOwnProperty(t)){const i=n[t].options;i._currentView.isInFetchMode||(i._currentView.type=e.text.unknownTrendText,I(t,i,!1),Trigger.customEvent(i.events.onReset,i._currentView.element),o&&a(i,!0))}return P},import:function(e,t=null){return Is.definedString(e)&&n.hasOwnProperty(e)&&(Is.definedArray(t)?w(t,n[e].options):u(n[e].options)),P},export:function(e,t=null){if(Is.definedString(e)&&n.hasOwnProperty(e)){const o=n[e].options;c(o,t,null,o.exportOnlyDataBeingViewed)}return P},refresh:function(e){if(Is.definedString(e)&&n.hasOwnProperty(e)){const t=n[e].options;a(t,!0),Trigger.customEvent(t.events.onRefresh,t._currentView.element)}return P},refreshAll:function(){for(const e in n)if(n.hasOwnProperty(e)){const t=n[e].options;a(t,!0),Trigger.customEvent(t.events.onRefresh,t._currentView.element)}return P},setYear:function(e,t){if(Is.definedString(e)&&Is.definedNumber(t)&&n.hasOwnProperty(e)){const o=n[e].options;o._currentView.year=t,Is.yearVisible(o,o._currentView.year)?a(o):R(o,!1),Trigger.customEvent(o.events.onSetYear,o._currentView.year)}return P},setYearToHighest:function(e){if(Is.definedString(e)&&n.hasOwnProperty(e)){const t=n[e].options,o=M(t);let i=0;for(const e in o)o.hasOwnProperty(e)&&(i=Math.max(i,parseInt(DateTime.getStorageDateYear(e))));i>0&&(t._currentView.year=i,Is.yearVisible(t,t._currentView.year)?a(t):R(t,!1),Trigger.customEvent(t.events.onSetYear,t._currentView.year))}return P},setYearToLowest:function(e){if(Is.definedString(e)&&n.hasOwnProperty(e)){const t=n[e].options,o=M(t);let i=9999;for(const e in o)o.hasOwnProperty(e)&&(i=Math.min(i,parseInt(DateTime.getStorageDateYear(e))));i<9999&&(t._currentView.year=i,Is.yearVisible(t,t._currentView.year)?a(t):F(t,!1),Trigger.customEvent(t.events.onSetYear,t._currentView.year))}return P},moveToPreviousYear:function(e){return Is.definedString(e)&&n.hasOwnProperty(e)&&F(n[e].options),P},moveToNextYear:function(e){return Is.definedString(e)&&n.hasOwnProperty(e)&&R(n[e].options),P},moveToCurrentYear:function(e){if(Is.definedString(e)&&n.hasOwnProperty(e)){const t=n[e].options;t._currentView.year=(new Date).getFullYear(),Is.yearVisible(t,t._currentView.year)?a(t):R(t,!1),Trigger.customEvent(t.events.onSetYear,t._currentView.year)}return P},getYear:function(e){let t=-1;return Is.definedString(e)&&n.hasOwnProperty(e)&&(t=n[e].options._currentView.year),t},render:function(t,n){return Is.definedObject(t)&&Is.definedObject(n)&&r(Binding.Options.getForNewInstance(e,n,t)),P},renderAll:function(){return o(),P},switchView:function(e,t){if(Is.definedString(e)&&Is.definedString(t)&&n.hasOwnProperty(e)){const o=n[e].options;let i;i="map"===t.toLowerCase()?1:"chart"===t.toLowerCase()?2:"days"===t.toLowerCase()?3:"months"===t.toLowerCase()?5:"statistics"===t.toLowerCase()?4:1,Is.definedNumber(i)&&S(o,i,t)}return P},switchType:function(e,t){if(Is.definedString(e)&&Is.definedString(t)&&n.hasOwnProperty(e)&&n[e].typeData.hasOwnProperty(t)){const o=n[e].options;o._currentView.type!==t&&(o._currentView.type=t,Trigger.customEvent(o.events.onTypeSwitch,t),a(o))}return P},updateOptions:function(e,t){if(Is.definedString(e)&&Is.definedObject(t)&&n.hasOwnProperty(e)){const t=n[e].options,o=Binding.Options.get(t);let i=!1;for(const e in o)o.hasOwnProperty(e)&&t.hasOwnProperty(e)&&t[e]!==o[e]&&(t[e]=o[e],i=!0);i&&(a(t,!0),Trigger.customEvent(t.events.onRefresh,t._currentView.element),Trigger.customEvent(t.events.onOptionsUpdate,t._currentView.element,t))}return P},getActiveView:function(e){let t="";if(Is.definedString(e)&&n.hasOwnProperty(e)){const o=n[e].options;t=1===o._currentView.view?"map":2===o._currentView.view?"chart":3===o._currentView.view?"days":5===o._currentView.view?"months":4===o._currentView.view?"statistics":"map"}return t},destroyAll:function(){for(const e in n)n.hasOwnProperty(e)&&H(n[e].options);return n={},P},destroy:function(e){return Is.definedString(e)&&n.hasOwnProperty(e)&&(H(n[e].options),delete n[e]),P},setConfiguration:function(t,n=!0){if(Is.definedObject(t)){const o=e,i=t;let r=!1;for(const t in i)i.hasOwnProperty(t)&&e.hasOwnProperty(t)&&o[t]!==i[t]&&(o[t]=i[t],r=!0);r&&(e=Configuration.Options.get(o),W(),n&&P.refreshAll())}return P},getIds:function(){const e=[];for(const t in n)n.hasOwnProperty(t)&&e.push(t);return e},getVersion:function(){return"5.0.0"}};e=Configuration.Options.get(),document.addEventListener("DOMContentLoaded",()=>{W(),o()}),window.addEventListener("pagehide",()=>function(){for(const e in n)if(n.hasOwnProperty(e)){const t=n[e].options;s(t,!1),Is.defined(t._currentView.isInFetchModeTimer)&&(clearInterval(t._currentView.isInFetchModeTimer),t._currentView.isInFetchModeTimer=0)}e.observationMode&&Is.defined(t)&&(t.disconnect(),t=null)}()),Is.defined(window.$heat)||(window.$heat=P)})();