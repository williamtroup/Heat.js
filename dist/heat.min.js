/*! Heat.js v2.8.0 | (c) Bunoon 2024 | MIT License */
(function(){function ya(){for(var a=h.domElementTypes,b=a.length,c=0;c<b;c++){var d=F.getElementsByTagName(a[c]);d=[].slice.call(d);for(var e=d.length,f=0;f<e;f++){var g=d[f],l=!0;if(v(g)&&g.hasAttribute("data-heat-options")){var m=g.getAttribute("data-heat-options");q(m)?(m=na(m),m.parsed&&G(m.result)?za(Aa(m.result,g)):h.safeMode||(console.error("The attribute 'data-heat-options' is not a valid object."),l=!1)):h.safeMode||(console.error("The attribute 'data-heat-options' has not been set correctly."),
l=!1)}if(!l)break}}}function Aa(a,b){var c=Ba(a),d=q(c.view)?c.view.toLowerCase():r.empty;c.currentView={};c.currentView.element=b;c.currentView.tooltip=null;c.currentView.tooltipTimer=null;c.currentView.mapContents=null;c.currentView.mapContentsScrollLeft=0;c.currentView.year=c.year;c.currentView.type=h.unknownTrendText;c.currentView.isInFetchMode=N(c.onDataFetch);c.currentView.isInFetchModeTimer=null;c.currentView.yearsAvailable=[];c.views.chart.enabled&&(c.currentView.chartContents=null,c.currentView.chartContentsScrollLeft=
0);c.views.statistics.enabled&&(c.currentView.statisticsContents=null,c.currentView.statisticsContentsScrollLeft=0);c.currentView.view="map"===d?1:"chart"===d?2:"statistics"===d?3:1;return c}function za(a){w(a.onBeforeRender,a.currentView.element);q(a.currentView.element.id)||(a.currentView.element.id=V());a.currentView.element.className.trim()===r.empty?a.currentView.element.className="heat-js":x(a.currentView.element,"heat-js");a.currentView.element.removeAttribute("data-heat-options");oa(a.currentView.element.id,
a);z(a);w(a.onRenderComplete,a.currentView.element)}function z(a,b,c){b=n(b,!1);c=n(c,!1);if(b&&a.useLocalStorageForData&&B.localStorage){b=a.currentView.element.id;if(a.useLocalStorageForData&&B.localStorage){for(var d=B.localStorage.length,e=[],f=a.currentView.element.id,g=0;g<d;g++)Ca(B.localStorage.key(g),"HJS_"+f)&&e.push(B.localStorage.key(g));d=e.length;for(f=0;f<d;f++)B.localStorage.removeItem(e[f])}e=ba.stringify(k[b].type);B.localStorage.setItem("HJS_"+b,e)}v(a.currentView.mapContents)&&
(a.currentView.mapContentsScrollLeft=a.currentView.mapContents.scrollLeft);a.views.chart.enabled&&v(a.currentView.chartContents)&&(a.currentView.chartContentsScrollLeft=a.currentView.chartContents.scrollLeft);a.views.statistics.enabled&&v(a.currentView.statisticsContents)&&(a.currentView.statisticsContentsScrollLeft=a.currentView.statisticsContents.scrollLeft);a.currentView.element.innerHTML=r.empty;a.currentView.yearsAvailable=Na(a);ca(a);Oa(a);Pa(a);Qa(a);e=c;a.currentView.mapContents=t(a.currentView.element,
"div","map-contents");a.views.chart.enabled&&(a.currentView.chartContents=t(a.currentView.element,"div","chart-contents"),pa(a.currentView.chartContents,a));a.views.statistics.enabled&&(a.currentView.statisticsContents=t(a.currentView.element,"div","statistics-contents"),pa(a.currentView.statisticsContents,a));Ra(a);if(b=a.views.map.showNoDataMessageWhenDataIsNotAvailable){b=!1;d=K(a);f=a.currentView.year.toString();for(var l in d)if(d.hasOwnProperty(l)&&l.split(r.dash)[0]===f){b=!0;break}b=!b}if(b)l=
u(a.currentView.mapContents,"div","no-data-message",h.noMapDataMessage),e&&x(l,"view-switch");else{a.currentView.mapContents.style.minHeight="unset";pa(a.currentView.mapContents,a);d=t(a.currentView.mapContents,"div","map");l=a.currentView.year;b=!1;e&&x(d,"view-switch");if(a.views.map.showDayNames){e=t(d,"div","days");if(!a.views.map.showMonthNames||a.views.map.placeMonthNamesOnTheBottom)e.className="days-months-bottom";for(f=0;7>f;f++)a.views.map.daysToShow.indexOf(f+1)>L.notFound&&u(e,"div","day-name",
h.dayNames[f]);a.views.map.showDaysInReverseOrder&&Da(e)}e=t(d,"div","months");d=da(a);for(f=0;12>f;f++)if(ea(a.views.map.monthsToShow,f)){g=t(e,"div","month");var m=t(g,"div","day-columns"),C=Y(l,f),A=t(m,"div","day-column"),D=!1;var y=qa(new Date(l,f,1));var H=1;C+=y;for(var I=0;I<C;I++){I>=y?D=!0:a.views.map.daysToShow.indexOf(H)>L.notFound&&t(A,"div","day-disabled");if(D){var Q=null;a.views.map.daysToShow.indexOf(H)>L.notFound&&(Q=Sa(a,A,I-y,f,l,d));if(0===(I+1)%7&&(a.views.map.showDaysInReverseOrder&&
Da(A),A=t(m,"div","day-column"),H=0,!v(W)&&v(Q))){var Ta=fa(Q,"margin-left",!0),Ua=fa(Q,"margin-right",!0);W=Q.offsetWidth+Ta+Ua}}H++}a.views.map.showMonthNames&&(C=g.offsetWidth,m=a.views.map.placeMonthNamesOnTheBottom?u(g,"div","month-name-bottom",h.monthNames[f]):u(g,"div","month-name",h.monthNames[f],m),v(m)&&(m.style.width=a.views.map.showMonthDayGaps?C+"px":C-W+"px"));b&&v(W)&&(0<y&&!a.views.map.showMonthDayGaps?g.style.marginLeft=-W+"px":0===y&&a.views.map.showMonthDayGaps&&(g.style.marginLeft=
W+"px"));b=!0}a.keepScrollPositions&&(a.currentView.mapContents.scrollLeft=a.currentView.mapContentsScrollLeft)}if(a.views.chart.enabled){d=c;g=t(a.currentView.chartContents,"div","chart");y=t(g,"div","y-labels");l=t(g,"div","day-lines");b=da(a);e=0;f=K(a);for(m=0;12>m;m++)for(C=Y(a.currentView.year,m),A=0;A<C;A++)D=M(new Date(a.currentView.year,m,A+1)),f.hasOwnProperty(D)&&(e=J.max(e,parseInt(f[D])));m=e;f=a.currentView.year;e=0;d&&x(g,"view-switch");0<m&&a.views.chart.showChartYLabels?(e=u(y,"div",
"label-0",m.toString()),u(y,"div","label-25",(3*J.floor(m/4)).toString()),u(y,"div","label-50",J.floor(m/2).toString()),u(y,"div","label-75",J.floor(m/4).toString()),u(y,"div","label-100",r.zero),y.style.width=e.offsetWidth+"px",e=y.offsetWidth+fa(y,"margin-right",!0)):y.parentNode.removeChild(y);if(0===m)a.currentView.chartContents.style.minHeight=a.currentView.mapContents.offsetHeight+"px",g.parentNode.removeChild(g),l=u(a.currentView.chartContents,"div","no-data-message",h.noChartDataMessage),
d&&x(l,"view-switch");else{g=a.currentView.mapContents.offsetHeight/m;for(m=y=d=0;12>m;m++)if(ea(a.views.chart.monthsToShow,m))for(C=Y(f,m),A=1,d++,D=0;D<C;D++)a.views.chart.daysToShow.indexOf(A)>L.notFound&&Va(l,a,D+1,m,f,b,g),0===(D+1)%7&&(A=0),A++,y++;if(a.views.chart.showMonthNames){b=t(a.currentView.chartContents,"div","chart-months");d=l.offsetWidth/d;for(g=f=0;12>g;g++)ea(a.views.chart.monthsToShow,g)&&(u(b,"div","month-name",h.monthNames[g]).style.left=e+d*f+"px",f++);b.style.width=l.offsetWidth+
"px";l=t(b,"div","month-name-space");l.style.height=b.offsetHeight+"px";l.style.width=e+"px"}a.keepScrollPositions&&(a.currentView.chartContents.scrollLeft=a.currentView.chartContentsScrollLeft)}a.currentView.chartContents.style.display="none"}if(a.views.statistics.enabled){d=c;f=t(a.currentView.statisticsContents,"div","statistics");c=t(a.currentView.statisticsContents,"div","statistics-ranges");g=t(f,"div","y-labels");l=t(f,"div","range-lines");b=da(a);e={};y=0;m=K(a);for(C=e[r.zero]=0;12>C;C++)for(A=
Y(a.currentView.year,C),D=0;D<A;D++)H=M(new Date(a.currentView.year,C,D+1)),m.hasOwnProperty(H)&&(I=H.split(r.dash),I=new Date(I[2],I[1],I[0]),Q=qa(I),!ra(a,I).matched&&ea(a.views.statistics.monthsToShow,I.getMonth())&&a.views.statistics.daysToShow.indexOf(Q)>L.notFound&&(H=sa(a,b,m[H]),v(H)?(e.hasOwnProperty(H.minimum.toString())||(e[H.minimum.toString()]=0),e[H.minimum]++,y=J.max(y,e[H.minimum])):e[r.zero]++));d&&x(f,"view-switch");0<y&&a.views.statistics.showChartYLabels?(m=u(g,"div","label-0",
y.toString()),u(g,"div","label-25",(3*J.floor(y/4)).toString()),u(g,"div","label-50",J.floor(y/2).toString()),u(g,"div","label-75",J.floor(y/4).toString()),u(g,"div","label-100",r.zero),g.style.width=m.offsetWidth+"px",c.style.paddingLeft=g.offsetWidth+fa(g,"margin-right",!0)+"px"):g.parentNode.removeChild(g);if(0===y){a.currentView.statisticsContents.style.minHeight=a.currentView.mapContents.offsetHeight+"px";f.parentNode.removeChild(f);c.parentNode.removeChild(c);var R=u(a.currentView.statisticsContents,
"div","no-statistics-message",h.noStatisticsDataMessage);d&&x(R,"view-switch")}else{d=a.currentView.mapContents.offsetHeight/y;a.views.statistics.showColorRangeLabels||c.parentNode.removeChild(c);for(R in e)e.hasOwnProperty(R)&&(Wa(R,l,e[R],a,b,d),f=Ea(b,R),a.views.statistics.showColorRangeLabels&&(a.views.statistics.useColorRangeNamesForLabels&&v(f)&&q(f.name)?u(c,"div","range-name",f.name):u(c,"div","range-name",R+r.plus)));a.keepScrollPositions&&(a.currentView.statisticsContents.scrollLeft=a.currentView.statisticsContentsScrollLeft)}a.currentView.statisticsContents.style.display=
"none"}a.currentView.mapContents.style.display="none";1===a.currentView.view?a.currentView.mapContents.style.display="block":a.views.chart.enabled&&2===a.currentView.view?a.currentView.chartContents.style.display="block":a.views.statistics.enabled&&3===a.currentView.view?a.currentView.statisticsContents.style.display="block":(a.currentView.view=1,a.currentView.mapContents.style.display="block")}function Pa(a){v(a.currentView.tooltip)||(a.currentView.tooltip=t(F.body,"div","heat-js-tooltip"),a.currentView.tooltip.style.display=
"none",F.body.addEventListener("mousemove",function(){ca(a)}),F.addEventListener("scroll",function(){ca(a)}))}function ha(a,b,c){null!==a&&(a.onmousemove=function(d){Xa(d,b,c)})}function Xa(a,b,c){Z(a);ca(b);b.currentView.tooltipTimer=setTimeout(function(){b.currentView.tooltip.innerHTML=c;b.currentView.tooltip.style.display="block";var d=b.currentView.tooltip,e=a.pageX,f=a.pageY;var g=F.documentElement;var l=(B.pageXOffset||g.scrollLeft)-(g.clientLeft||0);g=(B.pageYOffset||g.scrollTop)-(g.clientTop||
0);d.style.display="block";e+d.offsetWidth>B.innerWidth?e-=d.offsetWidth:e++;f+d.offsetHeight>B.innerHeight?f-=d.offsetHeight:f++;e<l&&(e=a.pageX+1);f<g&&(f=a.pageY+1);d.style.left=e+"px";d.style.top=f+"px"},b.tooltipDelay)}function ca(a){v(a.currentView.tooltip)&&(v(a.currentView.tooltipTimer)&&(clearTimeout(a.currentView.tooltipTimer),a.currentView.tooltipTimer=null),"block"===a.currentView.tooltip.style.display&&(a.currentView.tooltip.style.display="none"))}function Qa(a){if(a.showTitle||a.showYearSelector||
a.showRefreshButton||a.showExportButton||a.showImportButton){var b=t(a.currentView.element,"div","title-bar"),c=t(b,"div","title");a.views.chart.enabled||a.views.statistics.enabled?t(c,"div","down-arrow"):x(c,"no-click");a.showTitle&&(c.innerHTML+=a.titleText);if(a.views.chart.enabled||a.views.statistics.enabled){c=t(c,"div","titles-list");c=t(c,"div","titles");var d=u(c,"div","title",h.mapText);ta(a,d,1,"map");a.views.chart.enabled&&(d=u(c,"div","title",h.chartText),ta(a,d,2,"chart"));a.views.statistics.enabled&&
(c=u(c,"div","title",h.statisticsText),ta(a,c,3,"statistics"))}a.showImportButton&&!a.currentView.isInFetchMode&&(u(b,"button","import",h.importButtonText).onclick=function(){Ya(a)});a.showExportButton&&(u(b,"button","export",h.exportButtonText).onclick=function(){Fa(a)});a.showRefreshButton&&(u(b,"button","refresh",h.refreshButtonText).onclick=function(){z(a);w(a.onRefresh,a.currentView.element)});if(a.showYearSelector){c=u(b,"button","back",h.backButtonText);c.onclick=function(){ua(a)};0<a.currentView.yearsAvailable.length&&
a.currentView.year<=a.currentView.yearsAvailable[0]&&(c.disabled=!0);a.currentView.yearText=u(b,"div","year-text",a.currentView.year);if(a.showYearSelectionDropDown){t(a.currentView.yearText,"div","down-arrow");c=t(a.currentView.yearText,"div","years-list");d=t(c,"div","years");var e=(new Date).getFullYear(),f=null;c.style.display="block";c.style.visibility="hidden";for(var g=e-a.extraSelectionYears;g<e+a.extraSelectionYears;g++)if(S(a,g)){var l=Za(a,d,g,e);v(f)||(f=l)}v(f)&&(d.scrollTop=f.offsetTop-
d.offsetHeight/2);c.style.display="none";c.style.visibility="visible"}else x(a.currentView.yearText,"no-click");b=u(b,"button","next",h.nextButtonText);b.onclick=function(){aa(a)};0<a.currentView.yearsAvailable.length&&a.currentView.year>=a.currentView.yearsAvailable[a.currentView.yearsAvailable.length-1]&&(b.disabled=!0)}}}function ta(a,b,c,d){a.currentView.view===c?x(b,"title-active"):b.onclick=function(){a.currentView.view=c;w(a.onViewSwitch,d);z(a,!1,!0)}}function Za(a,b,c,d){var e=null;b=u(b,
"div","year",c);a.currentView.year!==c?(b.onclick=function(){a.currentView.year=c;z(a);w(a.onSetYear,a.currentView.year)},c===d&&x(b,"year-current")):(x(b,"year-active"),e=b);return e}function Sa(a,b,c,d,e,f){c+=1;b=t(b,"div","day");var g=new Date(e,d,c),l=k[a.currentView.element.id].type[a.currentView.type][M(g)];l=T(l,0);Ga(a,b,g,l);a.views.map.showDayNumbers&&0<l&&(b.innerHTML=l.toString());N(a.onDayClick)?b.onclick=function(){w(a.onDayClick,g,l)}:x(b,"no-hover");d=sa(a,f,l,g);v(d)&&ia(a,d.id)&&
(q(d.mapCssClassName)?x(b,d.mapCssClassName):x(b,d.cssClassName));return b}function Va(a,b,c,d,e,f,g){var l=new Date(e,d,c);a=t(a,"div","day-line");var m=K(b)[M(l)];m=T(m,0);Ga(b,a,l,m);b.views.chart.showLineNumbers&&0<m&&(x(a,"day-line-number"),a.innerHTML=m.toString());g*=m;a.style.height=g+"px";0>=g&&(a.style.visibility="hidden");N(b.onDayClick)?a.onclick=function(){w(b.onDayClick,l,m)}:x(a,"no-hover");f=sa(b,f,m,l);v(f)&&ia(b,f.id)&&(q(f.chartCssClassName)?x(a,f.chartCssClassName):x(a,f.cssClassName))}
function Wa(a,b,c,d,e,f){b=t(b,"div","range-line");var g=Ea(e,a);a=c*f;b.style.height=a+"px";0>=a&&(b.style.visibility="hidden");ha(b,d,c.toString());d.views.statistics.showRangeNumbers&&0<c&&(x(b,"range-line-number"),u(b,"div","count",c));N(d.onStatisticClick)?b.onclick=function(){w(d.onStatisticClick,g)}:x(b,"no-hover");v(g)&&ia(d,g.id)&&(q(g.statisticsCssClassName)?x(b,g.statisticsCssClassName):x(b,g.cssClassName))}function Ra(a){var b=t(a.currentView.element,"div","guide"),c=t(b,"div","map-types"),
d=0;for(e in k[a.currentView.element.id].type[h.unknownTrendText])if(k[a.currentView.element.id].type[h.unknownTrendText].hasOwnProperty(e)){d++;break}if(1<k[a.currentView.element.id].types){if(q(a.descriptionText)){var e=t(a.currentView.element,"div","description",b);Ha(a,e)}for(var f in k[a.currentView.element.id].type)if(f!==h.unknownTrendText||0<d)0===d&&a.currentView.type===h.unknownTrendText&&(a.currentView.type=f),$a(a,c,f)}else Ha(a,c);if(a.showGuide){b=t(b,"div","map-toggles");a.showLessAndMoreLabels&&
(c=u(b,"div","less-text",h.lessText),a.colorRangeTogglesEnabled?c.onclick=function(){Ia(a,!1)}:x(c,"no-click"));c=t(b,"div","days");d=da(a);f=d.length;for(e=0;e<f;e++)ab(a,c,d[e]);a.showLessAndMoreLabels&&(b=u(b,"div","more-text",h.moreText),a.colorRangeTogglesEnabled?b.onclick=function(){Ia(a,!0)}:x(b,"no-click"))}}function $a(a,b,c){b=u(b,"button","type",c);a.currentView.type===c&&x(b,"active");b.onclick=function(){a.currentView.type!==c&&(a.currentView.type=c,w(a.onTypeSwitch,c),z(a))}}function ab(a,
b,c){b=t(b,"div");b.className="day";ha(b,a,c.tooltipText);ia(a,c.id)&&(1===a.currentView.view&&q(c.mapCssClassName)?x(b,c.mapCssClassName):a.views.chart.enabled&&2===a.currentView.view&&q(c.chartCssClassName)?x(b,c.chartCssClassName):a.views.statistics.enabled&&3===a.currentView.view&&q(c.statisticsCssClassName)?x(b,c.statisticsCssClassName):x(b,c.cssClassName));a.showNumbersInGuide&&(x(b,"day-number"),b.innerHTML=c.minimum+r.plus);a.colorRangeTogglesEnabled?b.onclick=function(){for(var d=c.id,e=
a.colorRanges.length,f=0;f<e;f++){var g=a.colorRanges[f];if(g.id===d){g.visible=!(va(g.visible)&&g.visible);w(a.onColorRangeTypeToggle,g.id,g.visible);z(a);break}}}:x(b,"no-hover")}function Ha(a,b){if(q(a.descriptionText))if(q(a.descriptionTextLink)){var c=u(b,"a","label",a.descriptionText);c.href=a.descriptionTextLink;c.target="_blank"}else u(b,"span","label",a.descriptionText)}function Ga(a,b,c,d){if(N(a.onDayToolTipRender))ha(b,a,w(a.onDayToolTipRender,c,d));else{d=a.dayToolTipText;var e=qa(c);
d=d.replace("{dddd}",h.dayNames[e]);d=d.replace("{dd}",O(c.getDate()));d=d.replace("{d}",c.getDate());e=d.replace;var f=c.getDate(),g=h.thText;if(31===f||21===f||1===f)g=h.stText;else if(22===f||2===f)g=h.ndText;else if(23===f||3===f)g=h.rdText;d=e.call(d,"{o}",g);d=d.replace("{mmmm}",h.monthNames[c.getMonth()]);d=d.replace("{mm}",O(c.getMonth()+1));d=d.replace("{m}",c.getMonth()+1);d=d.replace("{yyyy}",c.getFullYear());d=d.replace("{yyy}",c.getFullYear().toString().substring(1));d=d.replace("{yy}",
c.getFullYear().toString().substring(2));d=d.replace("{y}",parseInt(c.getFullYear().toString().substring(2)).toString());a.showHolidaysInDayToolTips&&(c=ra(a,c),c.matched&&q(c.name)&&(d+=": "+c.name));ha(b,a,d)}}function oa(a,b,c){c=n(c,!0);k[a]={options:b,type:{},types:1};k[a].type[h.unknownTrendText]={};if(c&&!b.currentView.isInFetchMode&&b.useLocalStorageForData&&B.localStorage)for(a=B.localStorage.length,b=b.currentView.element.id,c=0;c<a;c++){var d=B.localStorage.key(c);if(Ca(d,"HJS_")&&(d=B.localStorage.getItem(d),
d=na(d),d.parsed)){k[b].type=d.result;k[b].types=0;for(var e in k[b].type)k[b].type.hasOwnProperty(e)&&k[b].types++}}}function K(a){return k[a.currentView.element.id].type[a.currentView.type]}function ea(a,b){return a.indexOf(b+1)>L.notFound}function Na(a){var b=[];if(a.showOnlyDataForYearsAvailable){a=K(a);for(var c in a)if(a.hasOwnProperty(c)){var d=parseInt(c.split(r.dash)[0]);b.indexOf(d)===L.notFound&&b.push(d)}}return b=b.sort(function(e,f){return e-f})}function S(a,b){return a.yearsToHide.indexOf(b)===
L.notFound&&(0===a.currentView.yearsAvailable.length||a.currentView.yearsAvailable.indexOf(b)>L.notFound)}function Oa(a){a.currentView.isInFetchMode&&(v(a.currentView.isInFetchModeTimer)||Ja(a),v(a.currentView.isInFetchModeTimer)||(a.currentView.isInFetchModeTimer=setInterval(function(){Ja(a);z(a)},a.dataFetchDelay)))}function Ja(a){var b=a.currentView.element.id,c=w(a.onDataFetch,b);if(G(c)){oa(b,a,!1);for(var d in c)c.hasOwnProperty(d)&&(k[b].type[h.unknownTrendText].hasOwnProperty(d)||(k[b].type[h.unknownTrendText][d]=
0),k[b].type[h.unknownTrendText][d]+=c[d])}}function ia(a,b){var c=!1;if("HOLIDAY"===b)c=!0;else for(var d=a.colorRanges.length,e=0;e<d;e++){var f=a.colorRanges[e];if(f.id===b&&(!va(f.visible)||f.visible)){c=!0;break}}return c}function Ia(a,b){for(var c=a.colorRanges.length,d=0;d<c;d++)a.colorRanges[d].visible=b,w(a.onColorRangeTypeToggle,a.colorRanges[d].id,b);z(a)}function sa(a,b,c,d){var e=null;v(d)&&ra(a,d).matched&&(e={cssClassName:"holiday",id:"HOLIDAY",visible:!0});if(!v(e))for(a=b.length,
d=0;d<a;d++){var f=b[d];if(c>=f.minimum)e=f;else break}return e}function Ea(a,b){for(var c=a.length,d=null,e=0;e<c;e++){var f=a[e];if(b.toString()===f.minimum.toString()){d=f;break}}return d}function da(a){return a.colorRanges.sort(function(b,c){return b.minimum-c.minimum})}function ra(a,b){for(var c=a.holidays.length,d=!1,e=null,f=b.getDate(),g=b.getMonth()+1,l=b.getFullYear(),m=0;m<c;m++){var C=a.holidays[m];if(q(C.date)&&C.showInViews){var A=C.date.split("/");2===A.length?d=f===parseInt(A[0])&&
g===parseInt(A[1]):3===A.length&&(d=f===parseInt(A[0])&&g===parseInt(A[1])&&l===parseInt(A[2]));if(d){e=C.name;break}}}return{matched:d,name:e}}function pa(a,b){b.allowFileImports&&!b.currentView.isInFetchMode&&(a.ondragover=Z,a.ondragenter=Z,a.ondragleave=Z,a.ondrop=function(c){Z(c);v(B.FileReader)&&0<c.dataTransfer.files.length&&Ka(c.dataTransfer.files,b)})}function Ya(a){var b=bb("input");b.type="file";b.accept=".json, .txt";b.multiple="multiple";b.onchange=function(){Ka(b.files,a)};b.click()}
function Ka(a,b){for(var c=a.length,d=[],e=K(b),f=function(C,A){d.push(C);for(var D in A)A.hasOwnProperty(D)&&(e.hasOwnProperty(D)||(e[D]=0),e[D]+=A[D]);d.length===c&&(w(b.onImport,b.currentView.element),z(b))},g=0;g<c;g++){var l=a[g],m=l.name.split(".").pop().toLowerCase();"json"===m?cb(l,f):"txt"===m&&db(l,f)}}function cb(a,b){var c=new FileReader,d=null;c.readAsText(a);c.onloadend=function(){b(a.name,d)};c.onload=function(e){e=na(e.target.result);e.parsed&&G(e.result)&&(d=e.result)}}function db(a,
b){var c=new FileReader,d={};c.readAsText(a);c.onloadend=function(){b(a.name,d)};c.onload=function(e){e=e.target.result.toString().split(r.newLine);for(var f=e.length,g=0;g<f;g++){var l=e[g].split(":");d[l[0].trim()]=parseInt(l[1].trim())}}}function Fa(a,b){var c=null;var d=null;"csv"===a.exportType.toLowerCase()?d="text/csv":"json"===a.exportType.toLowerCase()?d="application/json":"xml"===a.exportType.toLowerCase()?d="application/xml":"txt"===a.exportType.toLowerCase()&&(d="text/plain");var e=p(b,
a.exportType).toLowerCase();if("csv"===e){var f=ja(a),g=[];for(l in f)f.hasOwnProperty(l)&&g.push([ka(l),ka(f[l])].join());0<g.length&&g.unshift([ka(h.dateText),ka(h.countText)].join());c=g.join(r.newLine)}else if("json"===e)c=ba.stringify(ja(a));else if("xml"===e){var l=ja(a);g=[];g.push('<?xml version="1.0" ?>');g.push("<Dates>");for(f in l)l.hasOwnProperty(f)&&(g.push("<Date>"),g.push("<FullDate>"+f+"</FullDate>"),g.push("<Count>"+l[f]+"</Count>"),g.push("</Date>"));g.push("</Dates>");c=g.join(r.newLine)}else if("txt"===
e){l=ja(a);f=[];for(g in l)l.hasOwnProperty(g)&&f.push(g+": "+l[g].toString());c=f.join(r.newLine)}q(c)&&(l=t(F.body,"a"),l.style.display="none",l.setAttribute("target","_blank"),l.setAttribute("href","data:"+d+";charset=utf-8,"+encodeURIComponent(c)),d=l.setAttribute,g=new Date,f=O(g.getDate())+r.dash+O(g.getMonth()+1)+r.dash+g.getFullYear(),g=O(g.getHours())+r.dash+O(g.getMinutes()),c=r.empty,a.currentView.type!==h.unknownTrendText&&(c=a.currentView.type.toLowerCase().replace(r.space,r.underscore)+
r.underscore),f=c+f+r.underscore+g+"."+a.exportType.toLowerCase(),d.call(l,"download",f),l.click(),F.body.removeChild(l),w(a.onExport,a.currentView.element))}function ja(a){var b={},c=K(a);if(a.exportOnlyYearBeingViewed)for(var d=0;12>d;d++)for(var e=Y(a.currentView.year,d),f=0;f<e;f++){var g=M(new Date(a.currentView.year,d,f+1));c.hasOwnProperty(g)&&(b[g]=c[g])}else{a=[];for(d in c)c.hasOwnProperty(d)&&a.push(d);a.sort();d=a.length;for(e=0;e<d;e++)f=a[e],c.hasOwnProperty(f)&&(b[f]=c[f])}return b}
function ka(a){a=a.toString().replace(/(\r\n|\n|\r)/gm,r.empty).replace(/(\s\s)/gm,r.space);a=a.replace(/"/g,'""');return'"'+a+'"'}function Ba(a){a=G(a)?a:{};a.views=G(a.views)?a.views:{};a.showGuide=n(a.showGuide,!0);a.showTitle=n(a.showTitle,!0);a.showYearSelector=n(a.showYearSelector,!0);a.showRefreshButton=n(a.showRefreshButton,!1);a.showExportButton=n(a.showExportButton,!1);a.colorRangeTogglesEnabled=n(a.colorRangeTogglesEnabled,!0);a.exportOnlyYearBeingViewed=n(a.exportOnlyYearBeingViewed,!0);
a.year=T(a.year,(new Date).getFullYear());a.keepScrollPositions=n(a.keepScrollPositions,!1);a.extraSelectionYears=T(a.extraSelectionYears,50);a.showYearSelectionDropDown=n(a.showYearSelectionDropDown,!0);a.view=p(a.view,"map");a.tooltipDelay=T(a.tooltipDelay,750);a.exportType=p(a.exportType,"csv");a.descriptionText=p(a.descriptionText,null);a.descriptionTextLink=p(a.descriptionTextLink,null);a.useLocalStorageForData=n(a.useLocalStorageForData,!1);a.allowFileImports=n(a.allowFileImports,!0);var b=
a;var c=a.yearsToHide;var d=[];c=U(c)?c:d;b.yearsToHide=c;a.showLessAndMoreLabels=n(a.showLessAndMoreLabels,!0);a.showNumbersInGuide=n(a.showNumbersInGuide,!1);a.showImportButton=n(a.showImportButton,!1);a.dataFetchDelay=T(a.dataFetchDelay,6E4);a.showOnlyDataForYearsAvailable=n(a.showOnlyDataForYearsAvailable,!1);a.showHolidaysInDayToolTips=n(a.showHolidaysInDayToolTips,!1);if(U(a.colorRanges))for(b=a.colorRanges.length,c=0;c<b;c++)d=a.colorRanges[c],d.id=p(d.id,V()),d.name=p(d.name,null),d.minimum=
T(d.minimum,0),d.cssClassName=p(d.cssClassName,null),d.mapCssClassName=p(d.mapCssClassName,null),d.chartCssClassName=p(d.chartCssClassName,null),d.statisticsCssClassName=p(d.statisticsCssClassName,null),d.tooltipText=p(d.tooltipText,null),d.visible=n(d.visible,!0);else a.colorRanges=[{id:V(),name:"Day Color 1",minimum:10,cssClassName:"day-color-1",tooltipText:"Day Color 1",visible:!0},{id:V(),name:"Day Color 2",minimum:15,cssClassName:"day-color-2",tooltipText:"Day Color 2",visible:!0},{id:V(),name:"Day Color 3",
minimum:20,cssClassName:"day-color-3",tooltipText:"Day Color 3",visible:!0},{id:V(),name:"Day Color 4",minimum:25,cssClassName:"day-color-4",tooltipText:"Day Color 4",visible:!0}];if(U(a.holidays))for(b=a.holidays.length,c=0;c<b;c++)d=a.holidays[c],d.date=p(d.date,null),d.name=p(d.name,null),d.showInViews=n(d.showInViews,!0);else a.holidays=[];a.views.map=G(a.views.map)?a.views.map:{};a.views.map.showMonthDayGaps=n(a.views.map.showMonthDayGaps,!0);a.views.map.showDayNames=n(a.views.map.showDayNames,
!0);a.views.map.placeMonthNamesOnTheBottom=n(a.views.map.placeMonthNamesOnTheBottom,!1);a.views.map.showDayNumbers=n(a.views.map.showDayNumbers,!1);a.views.map.showMonthNames=n(a.views.map.showMonthNames,!0);a.views.map.showDaysInReverseOrder=n(a.views.map.showDaysInReverseOrder,!1);a.views.map.showNoDataMessageWhenDataIsNotAvailable=n(a.views.map.showNoDataMessageWhenDataIsNotAvailable,!1);P(a.views.map.monthsToShow)&&(a.views.map.monthsToShow=wa);P(a.views.map.daysToShow)&&(a.views.map.daysToShow=
xa);a.views.chart=G(a.views.chart)?a.views.chart:{};a.views.chart.enabled=n(a.views.chart.enabled,!0);a.views.chart.showChartYLabels=n(a.views.chart.showChartYLabels,!0);a.views.chart.showMonthNames=n(a.views.chart.showMonthNames,!0);a.views.chart.showLineNumbers=n(a.views.chart.showLineNumbers,!1);P(a.views.chart.monthsToShow)&&(a.views.chart.monthsToShow=wa);P(a.views.chart.daysToShow)&&(a.views.chart.daysToShow=xa);a.views.statistics=G(a.views.statistics)?a.views.statistics:{};a.views.statistics.enabled=
n(a.views.statistics.enabled,!0);a.views.statistics.showChartYLabels=n(a.views.statistics.showChartYLabels,!0);a.views.statistics.showColorRangeLabels=n(a.views.statistics.showColorRangeLabels,!0);a.views.statistics.useColorRangeNamesForLabels=n(a.views.statistics.useColorRangeNamesForLabels,!1);a.views.statistics.showRangeNumbers=n(a.views.statistics.showRangeNumbers,!1);P(a.views.statistics.monthsToShow)&&(a.views.statistics.monthsToShow=wa);P(a.views.statistics.daysToShow)&&(a.views.statistics.daysToShow=
xa);a.titleText=p(a.titleText,"Heat.js");a.dayToolTipText=p(a.dayToolTipText,"{d}{o} {mmmm} {yyyy}");a.onDayClick=E(a.onDayClick,null);a.onBackYear=E(a.onBackYear,null);a.onNextYear=E(a.onNextYear,null);a.onRefresh=E(a.onRefresh,null);a.onBeforeRender=E(a.onBeforeRender,null);a.onRenderComplete=E(a.onRenderComplete,null);a.onDestroy=E(a.onDestroy,null);a.onExport=E(a.onExport,null);a.onSetYear=E(a.onSetYear,null);a.onTypeSwitch=E(a.onTypeSwitch,null);a.onDayToolTipRender=E(a.onDayToolTipRender,null);
a.onAdd=E(a.onAdd,null);a.onRemove=E(a.onRemove,null);a.onReset=E(a.onReset,null);a.onViewSwitch=E(a.onViewSwitch,null);a.onColorRangeTypeToggle=E(a.onColorRangeTypeToggle,null);a.onImport=E(a.onImport,null);a.onStatisticClick=E(a.onStatisticClick,null);a.onDataFetch=E(a.onDataFetch,null);a.onClear=E(a.onClear,null);a.onUpdate=E(a.onUpdate,null);return a}function Y(a,b){return(new Date(a,b+1,0)).getDate()}function qa(a){return 0>a.getDay()-1?6:a.getDay()-1}function v(a){return null!==a&&void 0!==
a&&a!==r.empty}function G(a){return v(a)&&"object"===typeof a}function va(a){return v(a)&&"boolean"===typeof a}function q(a){return v(a)&&"string"===typeof a}function N(a){return v(a)&&"function"===typeof a}function la(a){return v(a)&&"number"===typeof a}function U(a){return G(a)&&a instanceof Array}function ma(a){return G(a)&&a instanceof Date}function bb(a){a=a.toLowerCase();var b="text"===a;X.hasOwnProperty(a)||(X[a]=b?F.createTextNode(r.empty):F.createElement(a));return X[a].cloneNode(!1)}function t(a,
b,c,d){b=b.toLowerCase();var e="text"===b;X.hasOwnProperty(b)||(X[b]=e?F.createTextNode(r.empty):F.createElement(b));b=X[b].cloneNode(!1);v(c)&&(b.className=c);v(d)?a.insertBefore(b,d):a.appendChild(b);return b}function u(a,b,c,d,e){a=t(a,b,c,e);a.innerHTML=d;return a}function fa(a,b,c){var d=null;c=n(c,!1);B.getComputedStyle?d=F.defaultView.getComputedStyle(a,null).getPropertyValue(b):a.currentStyle&&(d=a.currentStyle[b]);c&&(d=parseFloat(d,10));return d}function x(a,b){a.className+=r.space+b;a.className=
a.className.trim()}function Z(a){a.preventDefault();a.cancelBubble=!0}function Da(a){for(var b=a.children,c=b.length-1;c--;)a.appendChild(b[c])}function w(a){var b=null;N(a)&&(b=a.apply(null,[].slice.call(arguments,1)));return b}function p(a,b){return q(a)?a:b}function n(a,b){return va(a)?a:b}function E(a,b){return N(a)?a:b}function T(a,b){return la(a)?a:b}function na(a){var b=!0,c=null;try{q(a)&&(c=ba.parse(a))}catch(d){try{c=eval("("+a+")"),N(c)&&(c=c())}catch(e){h.safeMode||(console.error(h.objectErrorText.replace("{{error_1}}",
d.message).replace("{{error_2}}",e.message)),b=!1),c=null}}return{parsed:b,result:c}}function V(){for(var a=[],b=0;32>b;b++){8!==b&&12!==b&&16!==b&&20!==b||a.push(r.dash);var c=J.floor(16*J.random()).toString(16);a.push(c)}return a.join(r.empty)}function O(a){a=a.toString();return 1===a.length?r.zero+a:a}function Ca(a,b){return a.substring(0,b.length).toLowerCase()===b.toLowerCase()}function M(a){return a.getFullYear()+r.dash+O(a.getMonth()+1)+r.dash+O(a.getDate())}function ua(a,b){b=n(b,!0);var c=
!0,d=a.currentView.year;for(d--;!S(a,d);){if(0<a.currentView.yearsAvailable.length&&d<=a.currentView.yearsAvailable[0]){c=!1;break}d--}c&&(a.currentView.year=d,z(a),b&&w(a.onBackYear,a.currentView.year))}function aa(a,b){b=n(b,!0);var c=!0,d=a.currentView.year;for(d++;!S(a,d);){if(0<a.currentView.yearsAvailable.length&&d>=a.currentView.yearsAvailable[a.currentView.yearsAvailable.length-1]){c=!1;break}d++}c&&(a.currentView.year=d,z(a),b&&w(a.onBackYear,a.currentView.year))}function La(a){a.currentView.element.innerHTML=
r.empty;var b=a.currentView.element;b.className=b.className.replace("heat-js",r.empty);b.className=b.className.trim();F.body.removeChild(a.currentView.tooltip);a.currentView.isInFetchMode&&v(a.currentView.isInFetchModeTimer)&&clearInterval(a.currentView.isInFetchModeTimer);w(a.onDestroy,a.currentView.element)}function Ma(a){h=G(a)?a:{};h.safeMode=n(h.safeMode,!0);a=h;var b=h.domElementTypes,c=["*"];q(b)?(b=b.split(r.space),0===b.length&&(b=c)):b=U(b)?b:c;a.domElementTypes=b;h.stText=p(h.stText,"st");
h.ndText=p(h.ndText,"nd");h.rdText=p(h.rdText,"rd");h.thText=p(h.thText,"th");h.backButtonText=p(h.backButtonText,"Back");h.nextButtonText=p(h.nextButtonText,"Next");h.refreshButtonText=p(h.refreshButtonText,"Refresh");h.exportButtonText=p(h.exportButtonText,"Export");h.lessText=p(h.lessText,"Less");h.moreText=p(h.moreText,"More");h.dateText=p(h.dateText,"Date");h.countText=p(h.countText,"Count");h.mapText=p(h.mapText,"Map");h.chartText=p(h.chartText,"Chart");h.noChartDataMessage=p(h.noChartDataMessage,
"There is currently no data to view.");h.statisticsText=p(h.statisticsText,"Statistics");h.noStatisticsDataMessage=p(h.noStatisticsDataMessage,"There are currently no statistics to view.");h.unknownTrendText=p(h.unknownTrendText,"Unknown");h.importButtonText=p(h.importButtonText,"Import");h.noMapDataMessage=p(h.noMapDataMessage,"There is currently no data to view.");h.objectErrorText=p(h.objectErrorText,"Errors in object: {{error_1}}, {{error_2}}");P(h.monthNames,12)&&(h.monthNames="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "));
P(h.dayNames,7)&&(h.dayNames="Mon Tue Wed Thu Fri Sat Sun".split(" "))}function P(a,b){b=la(b)?b:1;return!U(a)||a.length<b}var F=null,B=null,J=null,ba=null,h={},r={empty:"",space:" ",newLine:"\n",dash:"-",underscore:"_",plus:"+",zero:"0"},L={notFound:-1},wa=[1,2,3,4,5,6,7,8,9,10,11,12],xa=[1,2,3,4,5,6,7],X={},W=null,k={};this.addDates=function(a,b,c,d){if(q(a)&&U(b)&&k.hasOwnProperty(a)){var e=k[a].options;if(!e.currentView.isInFetchMode){c=p(c,h.unknownTrendText);d=n(d,!0);for(var f=b.length,g=0;g<
f;g++)this.addDate(a,b[g],c,!1);d&&z(e,!0)}}return this};this.addDate=function(a,b,c,d){if(q(a)&&ma(b)&&k.hasOwnProperty(a)){var e=k[a].options;e.currentView.isInFetchMode||(c=p(c,h.unknownTrendText),d=n(d,!0),b=M(b),k[a].type.hasOwnProperty(c)||(k[a].type[c]={},k[a].types++),k[a].type[c].hasOwnProperty(b)||(k[a].type[c][b]=0),k[a].type[c][b]++,w(e.onAdd,e.currentView.element),d&&z(e,!0))}return this};this.updateDate=function(a,b,c,d,e){if(q(a)&&ma(b)&&k.hasOwnProperty(a)){var f=k[a].options;!f.currentView.isInFetchMode&&
0<c&&(d=p(d,h.unknownTrendText),b=M(b),k[a].type.hasOwnProperty(d)&&(e=n(e,!0),k[a].type[d][b]=c,w(f.onUpdate,f.currentView.element),e&&z(f,!0)))}return this};this.removeDates=function(a,b,c,d){if(q(a)&&U(b)&&k.hasOwnProperty(a)){var e=k[a].options;if(!e.currentView.isInFetchMode){c=p(c,h.unknownTrendText);d=n(d,!0);for(var f=b.length,g=0;g<f;g++)this.removeDate(a,b[g],c,!1);d&&z(e,!0)}}return this};this.removeDate=function(a,b,c,d){if(q(a)&&ma(b)&&k.hasOwnProperty(a)){var e=k[a].options;e.currentView.isInFetchMode||
(c=p(c,h.unknownTrendText),b=M(b),k[a].type.hasOwnProperty(c)&&k[a].type[c].hasOwnProperty(b)&&(d=n(d,!0),0<k[a].type[c][b]&&k[a].type[c][b]--,w(e.onRemove,e.currentView.element),d&&z(e,!0)))}return this};this.clearDate=function(a,b,c,d){if(q(a)&&ma(b)&&k.hasOwnProperty(a)){var e=k[a].options;e.currentView.isInFetchMode||(c=p(c,h.unknownTrendText),b=M(b),k[a].type.hasOwnProperty(c)&&k[a].type[c].hasOwnProperty(b)&&(d=n(d,!0),delete k[a].type[c][b],w(e.onClear,e.currentView.element),d&&z(e,!0)))}return this};
this.resetAll=function(a){for(var b in k)k.hasOwnProperty(b)&&this.reset(b,a);return this};this.reset=function(a,b){if(q(a)&&k.hasOwnProperty(a)){var c=k[a].options;c.currentView.isInFetchMode||(b=n(b,!0),c.currentView.type=h.unknownTrendText,oa(a,c,!1),w(c.onReset,c.currentView.element),b&&z(c,!0))}return this};this["export"]=function(a,b){q(a)&&k.hasOwnProperty(a)&&Fa(k[a].options,b);return this};this.refresh=function(a){q(a)&&k.hasOwnProperty(a)&&(a=k[a].options,z(a,!0),w(a.onRefresh,a.currentView.element));
return this};this.refreshAll=function(){for(var a in k)if(k.hasOwnProperty(a)){var b=k[a].options;z(b,!0);w(b.onRefresh,b.currentView.element)}return this};this.setYear=function(a,b){if(q(a)&&la(b)&&k.hasOwnProperty(a)){var c=k[a].options;c.currentView.year=b;S(c,c.currentView.year)?z(c):aa(c,!1);w(c.onSetYear,c.currentView.year)}return this};this.setYearToHighest=function(a){if(q(a)&&k.hasOwnProperty(a)){a=k[a].options;var b=K(a),c=0,d;for(d in b)b.hasOwnProperty(d)&&(c=J.max(c,parseInt(d.split(r.dash)[0])));
0<c&&(a.currentView.year=c,S(a,a.currentView.year)?z(a):aa(a,!1),w(a.onSetYear,a.currentView.year))}return this};this.setYearToLowest=function(a){if(q(a)&&k.hasOwnProperty(a)){a=k[a].options;var b=K(a),c=9999,d;for(d in b)b.hasOwnProperty(d)&&(c=J.min(c,parseInt(d.split(r.dash)[0])));9999>c&&(a.currentView.year=c,S(a,a.currentView.year)?z(a):ua(a,!1),w(a.onSetYear,a.currentView.year))}return this};this.moveToPreviousYear=function(a){q(a)&&k.hasOwnProperty(a)&&ua(k[a].options);return this};this.moveToNextYear=
function(a){q(a)&&k.hasOwnProperty(a)&&aa(k[a].options);return this};this.moveToCurrentYear=function(a){q(a)&&k.hasOwnProperty(a)&&(a=k[a].options,a.currentView.year=(new Date).getFullYear(),S(a,a.currentView.year)?z(a):aa(a,!1),w(a.onSetYear,a.currentView.year));return this};this.getYear=function(a){var b=null;q(a)&&k.hasOwnProperty(a)&&(b=k[a].options.currentView.year);return b};this.render=function(a,b){G(a)&&G(b)&&za(Aa(b,a));return this};this.renderAll=function(){ya();return this};this.switchView=
function(a,b){if(q(a)&&q(b)&&k.hasOwnProperty(a)){var c=k[a].options,d=null;"map"===b.toLowerCase()?d=1:"chart"===b.toLowerCase()?d=2:"statistics"===b.toLowerCase()&&(d=3);la(d)&&(c.currentView.view=d,w(c.onViewSwitch,b),z(c,!1,!0))}return this};this.switchType=function(a,b){if(q(a)&&q(b)&&k.hasOwnProperty(a)&&k[a].type.hasOwnProperty(b)){var c=k[a].options;c.currentView.type!==b&&(c.currentView.type=b,w(c.onTypeSwitch,b),z(c))}return this};this.updateOptions=function(a,b){if(q(a)&&G(b)&&k.hasOwnProperty(a)){var c=
k[a].options,d=Ba(b),e=!1,f;for(f in d)d.hasOwnProperty(f)&&c.hasOwnProperty(f)&&c[f]!==d[f]&&(c[f]=d[f],e=!0);e&&(z(c,!0),w(c.onRefresh,c.currentView.element))}return this};this.destroyAll=function(){for(var a in k)k.hasOwnProperty(a)&&La(k[a].options);k={};return this};this.destroy=function(a){q(a)&&k.hasOwnProperty(a)&&(La(k[a].options),delete k[a]);return this};this.setConfiguration=function(a,b){if(G(a)){var c=!1,d;for(d in a)a.hasOwnProperty(d)&&h.hasOwnProperty(d)&&h[d]!==a[d]&&(h[d]=a[d],
c=!0);c&&(b=n(b,!0),Ma(h),b&&this.refreshAll())}return this};this.getIds=function(){var a=[],b;for(b in k)k.hasOwnProperty(b)&&a.push(b);return a};this.getVersion=function(){return"2.8.0"};(function(a,b,c,d){F=a;B=b;J=c;ba=d;Ma();F.addEventListener("DOMContentLoaded",function(){ya()});B.addEventListener("unload",function(){for(var e in k)if(k.hasOwnProperty(e)){var f=k[e].options;v(f.currentView.isInFetchModeTimer)&&clearInterval(f.currentView.isInFetchModeTimer)}});v(B.$heat)||(B.$heat=this)})(document,
window,Math,JSON)})();