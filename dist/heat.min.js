"use strict";var e,t;(t=e||(e={})).HEAT_JS_ATTRIBUTE_NAME="data-heat-js",t.HEAT_JS_MAP_DATE_ATTRIBUTE_NAME="data-heat-js-map-date",t.HEAT_JS_MAP_MONTH_NUMBER_ATTRIBUTE_NAME="data-heat-js-month-number",t.HEAT_JS_CHART_DATE_ATTRIBUTE_NAME="data-heat-js-chart-date",t.HEAT_JS_LINE_DATE_ATTRIBUTE_NAME="data-heat-js-line-date",t.HEAT_JS_DAY_NUMBER_ATTRIBUTE_NAME="data-heat-js-day-number",t.HEAT_JS_MONTH_NUMBER_ATTRIBUTE_NAME="data-heat-js-month-number",t.HEAT_JS_STATISTICS_COLOR_RANGE_NAME_ATTRIBUTE_NAME="data-heat-js-statistics-color-range-name",t.LOCAL_STORAGE_START_ID="HJS_",t.COLOR_RANGE_HOLIDAY_ID="HOLIDAY";var n,o,i,r,s,a,l,c,d,u,w,h,g,m,p,y,v,f,T,x=(e=>(e.csv="csv",e.json="json",e.txt="txt",e.md="md",e.tsv="tsv",e.yaml="yaml",e.toml="toml",e))(x||{}),b=(e=>(e.csv="csv",e.json="json",e.xml="xml",e.txt="txt",e.html="html",e.md="md",e.tsv="tsv",e.yaml="yaml",e.toml="toml",e))(b||{});(e=>{function t(e){return null!=e&&""!==e.toString()}function n(e){return t(e)&&"object"==typeof e}function o(e){return n(e)&&e instanceof Array}e.defined=t,e.definedObject=n,e.definedBoolean=function(e){return t(e)&&"boolean"==typeof e},e.definedString=function(e){return t(e)&&"string"==typeof e},e.definedFunction=function(e){return t(e)&&"function"==typeof e},e.definedNumber=function(e){return t(e)&&"number"==typeof e},e.definedArray=o,e.definedDate=function(e){return n(e)&&e instanceof Date},e.invalidOptionArray=function(e,t=1){return!o(e)||e.length<t},e.holiday=function(t,n){const o={matched:!1,name:null},i=t.holidays.length,r=n.getDate(),s=n.getMonth()+1,a=n.getFullYear();for(let n=0;n<i;n++){let i=t.holidays[n];if(e.definedString(i.date)&&i.showInViews){const e=i.date.split("/");if(2===e.length?o.matched=r===parseInt(e[0])&&s===parseInt(e[1]):3===e.length&&(o.matched=r===parseInt(e[0])&&s===parseInt(e[1])&&a===parseInt(e[2])),o.matched){o.name=i.name;break}}}return o},e.monthVisible=function(e,t){return e.indexOf(t+1)>-1},e.dayVisible=function(e,t){return e.indexOf(t)>-1},e.yearVisible=function(e,t){return-1===e.yearsToHide.indexOf(t)&&(0===e._currentView.yearsAvailable.length||e._currentView.yearsAvailable.indexOf(t)>-1)},e.firstVisibleYear=function(e,t){return e._currentView.yearsAvailable.length>0&&t<=e._currentView.yearsAvailable[0]},e.lastVisibleYear=function(e,t){return e._currentView.yearsAvailable.length>0&&t>=e._currentView.yearsAvailable[e._currentView.yearsAvailable.length-1]},e.rgbColor=function(e){return e.startsWith("rgba")||e.startsWith("rgb")},e.hexColor=function(e){return e.startsWith("#")&&(6===e.length||8===e.length)}})(n||(n={})),(e=>{function t(e,t){return n.definedArray(e)?e:t}e.getAnyString=function(e,t){return"string"==typeof e?e:t},e.getString=function(e,t){return n.definedString(e)?e:t},e.getBoolean=function(e,t){return n.definedBoolean(e)?e:t},e.getNumber=function(e,t){return n.definedNumber(e)?e:t},e.getNumberInRange=function(e,t,o,i){return n.definedNumber(e)&&e>=t&&e<=o?e:i},e.getFunction=function(e,t){return n.definedFunction(e)?e:t},e.getArray=t,e.getObject=function(e,t){return n.definedObject(e)?e:t},e.getStringOrArray=function(e,o){let i=o;if(n.definedString(e)){const t=e.toString().split(" ");0===t.length?e=o:i=t}else i=t(e,o);return i},e.getObjectFromString=function(e,t){const o={parsed:!0,object:null};try{if(n.definedString(e))try{o.object=JSON.parse(e)}catch(t){o.object=JSON.parse(e.replace(/'/g,'"'))}}catch(i){try{o.object=function(e){let t=null;const o=e.split("(");let i=[];o.length>1&&(i=o[1].replace(")","").replace(";","").trim().split(","),1===i.length&&""===i[0]&&(i=[]));const r=o[0].split("."),s=r.pop();let a=globalThis,l=!0;for(const e of r)if(a=a[e],!n.defined(a)){l=!1;break}l&&n.definedFunction(a[s])&&(t=a[s].apply(a,i));return t}(e)}catch(e){t.safeMode||(console.error(t.text.objectErrorText.replace("{{error_1}}",i.message).replace("{{error_2}}",e.message)),o.parsed=!1),o.object=null}}return o}})(o||(o={})),(r=i||(i={})).padNumber=function(e){const t=e.toString();return 1===t.length?"0"+t:t},r.startsWithAnyCase=function(e,t){return e.substring(0,t.length).toLowerCase()===t.toLowerCase()},r.friendlyNumber=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},(e=>{function t(e){return e.getDay()-1<0?6:e.getDay()-1}function n(e,t){let n=e.text.thText;return 31===t||21===t||1===t?n=e.text.stText:22===t||2===t?n=e.text.ndText:23!==t&&3!==t||(n=e.text.rdText),n}e.getTotalDaysInMonth=function(e,t){return new Date(e,t+1,0).getDate()},e.getWeekdayNumber=t,e.getDayOrdinal=n,e.getCustomFormattedDateText=function(e,o,r){let s=o;const a=t(r);return s=s.replace("{dddd}",e.text.dayNames[a]),s=s.replace("{dd}",i.padNumber(r.getDate())),s=s.replace("{d}",r.getDate().toString()),s=s.replace("{o}",n(e,r.getDate())),s=s.replace("{mmmm}",e.text.monthNames[r.getMonth()]),s=s.replace("{mm}",i.padNumber(r.getMonth()+1)),s=s.replace("{m}",(r.getMonth()+1).toString()),s=s.replace("{yyyy}",r.getFullYear().toString()),s=s.replace("{yyy}",r.getFullYear().toString().substring(1)),s=s.replace("{yy}",r.getFullYear().toString().substring(2)),s=s.replace("{y}",parseInt(r.getFullYear().toString().substring(2)).toString()),s},e.toStorageDate=function(e){return`${e.getFullYear()}-${i.padNumber(e.getMonth()+1)}-${i.padNumber(e.getDate())}`},e.getStorageDateYear=function(e){return e.split("-")[0]},e.getDateForMondayOfCurrentWeek=function(){const e=new Date,t=e.getDay(),n=(0===t?-6:1)-t,o=new Date(e);return o.setDate(e.getDate()+n),o},e.isTodaysDate=function(e){const t=new Date;return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}})(s||(s={})),(e=>{function t(e,t,o="",i=null){const r=t.toLowerCase();let s="text"===r?document.createTextNode(""):document.createElement(r);return n.defined(o)&&(s.className=o),n.defined(i)?e.insertBefore(s,i):e.appendChild(s),s}function o(e,n,o,i,r=null){const s=t(e,n,o,r);if(s.innerHTML=i,"button"===n){s.type="button"}return s}function i(){const e=document.documentElement;return{left:e.scrollLeft-(e.clientLeft||0),top:e.scrollTop-(e.clientTop||0)}}e.createWithNoContainer=function(e){const t=e.toLowerCase();return"text"===t?document.createTextNode(""):document.createElement(t)},e.create=t,e.createWithHTML=o,e.createButton=function(e,o,i,r=null,s=null){const a=t(e,o,i,s);return a.type="button",n.defined(r)&&(a.innerHTML=r),a},e.createIconButton=function(n,o,i,r,s=null){const a=t(n,o,i,s);return a.type="button",e.create(a,"i",r),a},e.getStyleValueByName=function(e,t,n=!1){let o=getComputedStyle(e).getPropertyValue(t);return n&&(o=parseFloat(o),o=isNaN(o)?0:o),o},e.getStyleValueByNameSizingMetic=function(e,t){const n=getComputedStyle(e).getPropertyValue(t),o=parseFloat(n);return n.replace(o.toString(),"")},e.addClass=function(e,t){e.classList.add(t)},e.removeClass=function(e,t){e.classList.remove(t)},e.cancelBubble=function(e){e.preventDefault(),e.stopPropagation()},e.getScrollPosition=i,e.showElementAtMousePosition=function(e,t){let n=e.pageX,o=e.pageY;const r=i();t.style.display="block",n+t.offsetWidth>window.innerWidth?n-=t.offsetWidth:n++,o+t.offsetHeight>window.innerHeight?o-=t.offsetHeight:o++,n<r.left&&(n=e.pageX+1),o<r.top&&(o=e.pageY+1),t.style.left=`${n}px`,t.style.top=`${o}px`},e.reverseChildrenOrder=function(e){const t=Array.from(e.children);t.reverse(),t.forEach(t=>e.appendChild(t))},e.createCheckBox=function(e,n,i){const r=t(e,"div"),s=t(r,"label","checkbox"),a=t(s,"input");return a.type="checkbox",a.name=i,t(s,"span","check-mark"),o(s,"span","text",n),a},e.addGradientEffect=function(t,n){const o=e.getStyleValueByName(t,"background-color"),i=e.getStyleValueByName(n,"background-color");n.style.background=`linear-gradient(to top, ${o}, ${i})`}})(a||(a={})),(e=>{function t(e,t=!0){let n=t?window.addEventListener:window.removeEventListener,o=t?document.addEventListener:document.removeEventListener;n("mousemove",()=>i(e)),o("scroll",()=>i(e))}function o(e,t,n){a.cancelBubble(e),i(t),t._currentView.tooltipTimer=setTimeout(()=>{t._currentView.tooltip.innerHTML=n,t._currentView.tooltip.style.display="block",a.showElementAtMousePosition(e,t._currentView.tooltip)},t.tooltip.delay)}function i(e){n.defined(e._currentView.tooltip)&&(0!==e._currentView.tooltipTimer&&(clearTimeout(e._currentView.tooltipTimer),e._currentView.tooltipTimer=0),"none"!==e._currentView.tooltip.style.display&&(e._currentView.tooltip.style.display="none"))}e.render=function(e){n.defined(e._currentView.tooltip)||(e._currentView.tooltip=a.create(document.body,"div","heat-js-tooltip"),e._currentView.tooltip.style.display="none",t(e))},e.assignToEvents=t,e.add=function(e,t,n){null!==e&&(e.onmousemove=e=>o(e,t,n))},e.show=o,e.hide=i})(l||(l={})),(c||(c={})).customEvent=function(e,...t){let o=null;return n.definedFunction(e)&&(o=e.apply(null,[].slice.call(t,0))),o},(e=>{let t;(e=>{const t=[1,2,3,4,5,6,7,8,9,10,11,12],i=[1,2,3,4,5,6,7];function r(e){const r=o.getObject(e,{});return r.views=o.getObject(r.views,{}),r.exportOnlyDataBeingViewed=o.getBoolean(r.exportOnlyDataBeingViewed,!0),r.year=o.getNumber(r.year,(new Date).getFullYear()),r.view=o.getString(r.view,"map"),r.exportType=o.getString(r.exportType,"json"),r.useLocalStorageForData=o.getBoolean(r.useLocalStorageForData,!1),r.allowFileImports=o.getBoolean(r.allowFileImports,!0),r.yearsToHide=o.getArray(r.yearsToHide,[]),r.dataFetchDelay=o.getNumber(r.dataFetchDelay,6e4),r.showOnlyDataForYearsAvailable=o.getBoolean(r.showOnlyDataForYearsAvailable,!1),r.showHolidaysInDayToolTips=o.getBoolean(r.showHolidaysInDayToolTips,!1),r.resizable=o.getBoolean(r.resizable,!1),r.startMonth=o.getNumberInRange(r.startMonth,0,11,0),r.allowMultipleFileImports=o.getBoolean(r.allowMultipleFileImports,!0),r.percentageDecimalPoints=o.getNumber(r.percentageDecimalPoints,2),r.allowTypeAdding=o.getBoolean(r.allowTypeAdding,!1),r.chartsAnimationDelay=o.getNumber(r.chartsAnimationDelay,50),r.exportDateTimeFormat=o.getString(r.exportDateTimeFormat,"{dddd}, {d}{o} {mmmm} {yyyy}"),r.colorRanges=function(e){let t=[];if(n.definedArray(e.colorRanges)){const n=e.colorRanges.length;for(let i=0;i<n;i++){const n=e.colorRanges[i];n.id=o.getString(n.id,crypto.randomUUID()),n.name=o.getString(n.name,""),n.minimum=o.getNumber(n.minimum,0),n.cssClassName=o.getString(n.cssClassName,""),n.mapCssClassName=o.getString(n.mapCssClassName,""),n.chartCssClassName=o.getString(n.chartCssClassName,""),n.lineCssClassName=o.getString(n.lineCssClassName,""),n.statisticsCssClassName=o.getString(n.statisticsCssClassName,""),n.tooltipText=o.getString(n.tooltipText,""),n.visible=o.getBoolean(n.visible,!0),t.push(n)}}else t=[{id:crypto.randomUUID(),name:"Day Color 1",minimum:10,cssClassName:"day-color-1",tooltipText:"Day Color 1",visible:!0},{id:crypto.randomUUID(),name:"Day Color 2",minimum:15,cssClassName:"day-color-2",tooltipText:"Day Color 2",visible:!0},{id:crypto.randomUUID(),name:"Day Color 3",minimum:20,cssClassName:"day-color-3",tooltipText:"Day Color 3",visible:!0},{id:crypto.randomUUID(),name:"Day Color 4",minimum:25,cssClassName:"day-color-4",tooltipText:"Day Color 4",visible:!0}];return t}(r),r.holidays=function(e){let t=[];if(n.definedArray(e.holidays)){const n=e.holidays.length;for(let i=0;i<n;i++){const n=e.holidays[i];n.date=o.getString(n.date,""),n.name=o.getString(n.name,""),n.showInViews=o.getBoolean(n.showInViews,!0),t.push(n)}}return t}(r),r.title=function(e){return e.title=o.getObject(e.title,{}),e.title.text=o.getString(e.title.text,"Heat.js"),e.title.showText=o.getBoolean(e.title.showText,!0),e.title.showYearSelector=o.getBoolean(e.title.showYearSelector,!0),e.title.showRefreshButton=o.getBoolean(e.title.showRefreshButton,!1),e.title.showExportButton=o.getBoolean(e.title.showExportButton,!1),e.title.extraSelectionYears=o.getNumber(e.title.extraSelectionYears,50),e.title.showYearSelectionDropDown=o.getBoolean(e.title.showYearSelectionDropDown,!0),e.title.showImportButton=o.getBoolean(e.title.showImportButton,!1),e.title.showConfigurationButton=o.getBoolean(e.title.showConfigurationButton,!0),e.title.showTitleDropDownButton=o.getBoolean(e.title.showTitleDropDownButton,!0),e.title.showTitleDropDownHeaders=o.getBoolean(e.title.showTitleDropDownHeaders,!0),e.title.showCurrentYearButton=o.getBoolean(e.title.showCurrentYearButton,!0),e.title.showSectionText=o.getBoolean(e.title.showSectionText,!0),e.title.showToolTips=o.getBoolean(e.title.showToolTips,!0),e.title.showTitleDropDownMenu=o.getBoolean(e.title.showTitleDropDownMenu,!0),e.title.showClearButton=o.getBoolean(e.title.showClearButton,!1),e.title}(r),r.description=function(e){return e.description=o.getObject(e.description,{}),e.description.text=o.getString(e.description.text,""),e.description.url=o.getString(e.description.url,""),e.description.urlTarget=o.getString(e.description.urlTarget,"_blank"),e.description}(r),r.guide=function(e){return e.guide=o.getObject(e.guide,{}),e.guide.enabled=o.getBoolean(e.guide.enabled,!0),e.guide.colorRangeTogglesEnabled=o.getBoolean(e.guide.colorRangeTogglesEnabled,!0),e.guide.showLessAndMoreLabels=o.getBoolean(e.guide.showLessAndMoreLabels,!0),e.guide.showNumbersInGuide=o.getBoolean(e.guide.showNumbersInGuide,!1),e.guide.showToolTips=o.getBoolean(e.guide.showToolTips,!0),e.guide.showInvertLabel=o.getBoolean(e.guide.showInvertLabel,!1),e.guide}(r),r.tooltip=function(e){return e.tooltip=o.getObject(e.tooltip,{}),e.tooltip.delay=o.getNumber(e.tooltip.delay,750),e.tooltip}(r),r.views.map=function(e){e.views.map=o.getObject(e.views.map,{}),e.views.map.showMonthDayGaps=o.getBoolean(e.views.map.showMonthDayGaps,!0),e.views.map.showDayNames=o.getBoolean(e.views.map.showDayNames,!0),e.views.map.placeMonthNamesOnTheBottom=o.getBoolean(e.views.map.placeMonthNamesOnTheBottom,!1),e.views.map.showDayCounts=o.getBoolean(e.views.map.showDayCounts,!1),e.views.map.showMonthNames=o.getBoolean(e.views.map.showMonthNames,!0),e.views.map.showDaysInReverseOrder=o.getBoolean(e.views.map.showDaysInReverseOrder,!1),e.views.map.showNoDataMessageWhenDataIsNotAvailable=o.getBoolean(e.views.map.showNoDataMessageWhenDataIsNotAvailable,!1),e.views.map.showMinimalDayNames=o.getBoolean(e.views.map.showMinimalDayNames,!1),e.views.map.showMonthsInReverseOrder=o.getBoolean(e.views.map.showMonthsInReverseOrder,!1),e.views.map.keepScrollPositions=o.getBoolean(e.views.map.keepScrollPositions,!1),e.views.map.showDayDateNumbers=o.getBoolean(e.views.map.showDayDateNumbers,!1),e.views.map.showToolTips=o.getBoolean(e.views.map.showToolTips,!0),e.views.map.highlightCurrentDay=o.getBoolean(e.views.map.highlightCurrentDay,!1),e.views.map.dayToolTipText=o.getString(e.views.map.dayToolTipText,"{dddd}, {d}{o} {mmmm} {yyyy}"),e.views.map.showYearsInMonthNames=o.getBoolean(e.views.map.showYearsInMonthNames,!0),e.views.map.allowZooming=o.getBoolean(e.views.map.allowZooming,!1),e.views.map.zoomLevel=o.getNumber(e.views.map.zoomLevel,0),e.views.map.showCountsInToolTips=o.getBoolean(e.views.map.showCountsInToolTips,!0),n.invalidOptionArray(e.views.map.monthsToShow)&&(e.views.map.monthsToShow=t);n.invalidOptionArray(e.views.map.daysToShow)&&(e.views.map.daysToShow=i);return e.views.map}(r),r.views.chart=function(e){e.views.chart=o.getObject(e.views.chart,{}),e.views.chart.enabled=o.getBoolean(e.views.chart.enabled,!0),e.views.chart.showChartYLabels=o.getBoolean(e.views.chart.showChartYLabels,!0),e.views.chart.showMonthNames=o.getBoolean(e.views.chart.showMonthNames,!0),e.views.chart.showLineCounts=o.getBoolean(e.views.chart.showLineCounts,!1),e.views.chart.showInReverseOrder=o.getBoolean(e.views.chart.showInReverseOrder,!1),e.views.chart.keepScrollPositions=o.getBoolean(e.views.chart.keepScrollPositions,!1),e.views.chart.showLineDateNumbers=o.getBoolean(e.views.chart.showLineDateNumbers,!1),e.views.chart.showToolTips=o.getBoolean(e.views.chart.showToolTips,!0),e.views.chart.useGradients=o.getBoolean(e.views.chart.useGradients,!1),e.views.chart.highlightCurrentDay=o.getBoolean(e.views.chart.highlightCurrentDay,!1),e.views.chart.dayToolTipText=o.getString(e.views.chart.dayToolTipText,"{dddd}, {d}{o} {mmmm} {yyyy}"),e.views.chart.showYearsInMonthNames=o.getBoolean(e.views.chart.showYearsInMonthNames,!0),e.views.chart.showCountsInToolTips=o.getBoolean(e.views.chart.showCountsInToolTips,!0),e.views.chart.addMonthSpacing=o.getBoolean(e.views.chart.addMonthSpacing,!1),n.invalidOptionArray(e.views.chart.monthsToShow)&&(e.views.chart.monthsToShow=t);n.invalidOptionArray(e.views.chart.daysToShow)&&(e.views.chart.daysToShow=i);return e.views.chart}(r),r.views.line=function(e){e.views.line=o.getObject(e.views.line,{}),e.views.line.enabled=o.getBoolean(e.views.line.enabled,!0),e.views.line.showMonthNames=o.getBoolean(e.views.line.showMonthNames,!0),e.views.line.showInReverseOrder=o.getBoolean(e.views.line.showInReverseOrder,!1),e.views.line.keepScrollPositions=o.getBoolean(e.views.line.keepScrollPositions,!1),e.views.line.showYearsInMonthNames=o.getBoolean(e.views.line.showYearsInMonthNames,!0),e.views.line.showToolTips=o.getBoolean(e.views.line.showToolTips,!0),e.views.line.dayToolTipText=o.getString(e.views.line.dayToolTipText,"{dddd}, {d}{o} {mmmm} {yyyy}"),e.views.line.showCountsInToolTips=o.getBoolean(e.views.line.showCountsInToolTips,!0),n.invalidOptionArray(e.views.line.monthsToShow)&&(e.views.line.monthsToShow=t);n.invalidOptionArray(e.views.line.daysToShow)&&(e.views.line.daysToShow=i);return e.views.line}(r),r.views.days=function(e){e.views.days=o.getObject(e.views.days,{}),e.views.days.enabled=o.getBoolean(e.views.days.enabled,!0),e.views.days.showChartYLabels=o.getBoolean(e.views.days.showChartYLabels,!0),e.views.days.showDayNames=o.getBoolean(e.views.days.showDayNames,!0),e.views.days.showInReverseOrder=o.getBoolean(e.views.days.showInReverseOrder,!1),e.views.days.showDayCounts=o.getBoolean(e.views.days.showDayCounts,!1),e.views.days.keepScrollPositions=o.getBoolean(e.views.days.keepScrollPositions,!1),e.views.days.showToolTips=o.getBoolean(e.views.days.showToolTips,!0),e.views.days.useGradients=o.getBoolean(e.views.days.useGradients,!1),e.views.days.useDifferentOpacities=o.getBoolean(e.views.days.useDifferentOpacities,!0),e.views.days.showDayCountPercentages=o.getBoolean(e.views.days.showDayCountPercentages,!0),n.invalidOptionArray(e.views.days.monthsToShow)&&(e.views.days.monthsToShow=t);n.invalidOptionArray(e.views.days.daysToShow)&&(e.views.days.daysToShow=i);return e.views.days}(r),r.views.months=function(e){e.views.months=o.getObject(e.views.months,{}),e.views.months.enabled=o.getBoolean(e.views.months.enabled,!0),e.views.months.showChartYLabels=o.getBoolean(e.views.months.showChartYLabels,!0),e.views.months.showMonthNames=o.getBoolean(e.views.months.showMonthNames,!0),e.views.months.showInReverseOrder=o.getBoolean(e.views.months.showInReverseOrder,!1),e.views.months.showMonthCounts=o.getBoolean(e.views.months.showMonthCounts,!1),e.views.months.keepScrollPositions=o.getBoolean(e.views.months.keepScrollPositions,!1),e.views.months.showToolTips=o.getBoolean(e.views.months.showToolTips,!0),e.views.months.useGradients=o.getBoolean(e.views.months.useGradients,!1),e.views.months.useDifferentOpacities=o.getBoolean(e.views.months.useDifferentOpacities,!0),e.views.months.highlightCurrentMonth=o.getBoolean(e.views.months.highlightCurrentMonth,!1),e.views.months.showMonthCountPercentages=o.getBoolean(e.views.months.showMonthCountPercentages,!0),n.invalidOptionArray(e.views.months.monthsToShow)&&(e.views.months.monthsToShow=t);n.invalidOptionArray(e.views.months.daysToShow)&&(e.views.months.daysToShow=i);return e.views.months}(r),r.views.statistics=function(e){e.views.statistics=o.getObject(e.views.statistics,{}),e.views.statistics.enabled=o.getBoolean(e.views.statistics.enabled,!0),e.views.statistics.showChartYLabels=o.getBoolean(e.views.statistics.showChartYLabels,!0),e.views.statistics.showColorRangeLabels=o.getBoolean(e.views.statistics.showColorRangeLabels,!0),e.views.statistics.useColorRangeNamesForLabels=o.getBoolean(e.views.statistics.useColorRangeNamesForLabels,!1),e.views.statistics.showRangeCounts=o.getBoolean(e.views.statistics.showRangeCounts,!1),e.views.statistics.showInReverseOrder=o.getBoolean(e.views.statistics.showInReverseOrder,!1),e.views.statistics.keepScrollPositions=o.getBoolean(e.views.statistics.keepScrollPositions,!1),e.views.statistics.showToolTips=o.getBoolean(e.views.statistics.showToolTips,!0),e.views.statistics.useGradients=o.getBoolean(e.views.statistics.useGradients,!1),e.views.statistics.showRangeCountPercentages=o.getBoolean(e.views.statistics.showRangeCountPercentages,!0),e.views.statistics.showRangeNamesInToolTips=o.getBoolean(e.views.statistics.showRangeNamesInToolTips,!0),n.invalidOptionArray(e.views.statistics.monthsToShow)&&(e.views.statistics.monthsToShow=t);n.invalidOptionArray(e.views.statistics.daysToShow)&&(e.views.statistics.daysToShow=i);return e.views.statistics}(r),r.yearlyStatistics=function(e){return e.yearlyStatistics=o.getObject(e.yearlyStatistics,{}),e.yearlyStatistics.enabled=o.getBoolean(e.yearlyStatistics.enabled,!1),e.yearlyStatistics.showToday=o.getBoolean(e.yearlyStatistics.showToday,!0),e.yearlyStatistics.showThisWeek=o.getBoolean(e.yearlyStatistics.showThisWeek,!0),e.yearlyStatistics.showThisMonth=o.getBoolean(e.yearlyStatistics.showThisMonth,!0),e.yearlyStatistics.showThisYear=o.getBoolean(e.yearlyStatistics.showThisYear,!0),e.yearlyStatistics.showOnlyForCurrentYear=o.getBoolean(e.yearlyStatistics.showOnlyForCurrentYear,!1),e.yearlyStatistics.showPercentages=o.getBoolean(e.yearlyStatistics.showPercentages,!0),e.yearlyStatistics}(r),r.events=function(e){return e.events=o.getObject(e.events,{}),e.events.onBackYear=o.getFunction(e.events.onBackYear,null),e.events.onNextYear=o.getFunction(e.events.onNextYear,null),e.events.onRefresh=o.getFunction(e.events.onRefresh,null),e.events.onBeforeRender=o.getFunction(e.events.onBeforeRender,null),e.events.onRenderComplete=o.getFunction(e.events.onRenderComplete,null),e.events.onDestroy=o.getFunction(e.events.onDestroy,null),e.events.onExport=o.getFunction(e.events.onExport,null),e.events.onSetYear=o.getFunction(e.events.onSetYear,null),e.events.onTypeSwitch=o.getFunction(e.events.onTypeSwitch,null),e.events.onMapDayToolTipRender=o.getFunction(e.events.onMapDayToolTipRender,null),e.events.onChartDayToolTipRender=o.getFunction(e.events.onChartDayToolTipRender,e.events.onMapDayToolTipRender),e.events.onLineDayToolTipRender=o.getFunction(e.events.onLineDayToolTipRender,e.events.onMapDayToolTipRender),e.events.onAdd=o.getFunction(e.events.onAdd,null),e.events.onRemove=o.getFunction(e.events.onRemove,null),e.events.onReset=o.getFunction(e.events.onReset,null),e.events.onViewSwitch=o.getFunction(e.events.onViewSwitch,null),e.events.onColorRangeTypeToggle=o.getFunction(e.events.onColorRangeTypeToggle,null),e.events.onImport=o.getFunction(e.events.onImport,null),e.events.onDataFetch=o.getFunction(e.events.onDataFetch,null),e.events.onClear=o.getFunction(e.events.onClear,null),e.events.onUpdate=o.getFunction(e.events.onUpdate,null),e.events.onOptionsUpdate=o.getFunction(e.events.onOptionsUpdate,null),e.events.onMapDayClick=o.getFunction(e.events.onMapDayClick,null),e.events.onMapDayDblClick=o.getFunction(e.events.onMapDayDblClick,null),e.events.onChartDayClick=o.getFunction(e.events.onChartDayClick,e.events.onMapDayClick),e.events.onChartDayDblClick=o.getFunction(e.events.onChartDayDblClick,e.events.onMapDayDblClick),e.events.onWeekDayClick=o.getFunction(e.events.onWeekDayClick,null),e.events.onWeekDayDblClick=o.getFunction(e.events.onWeekDayDblClick,null),e.events.onMonthClick=o.getFunction(e.events.onMonthClick,null),e.events.onMonthDblClick=o.getFunction(e.events.onMonthDblClick,null),e.events.onStatisticClick=o.getFunction(e.events.onStatisticClick,null),e.events.onStatisticDblClick=o.getFunction(e.events.onStatisticDblClick,null),e.events.onMapZoomLevelChange=o.getFunction(e.events.onMapZoomLevelChange,null),e.events}(r),r.startMonth>0&&(r.yearsToHide=[]),r}e.getForNewInstance=function(e,t,i){const s=r(t),a=o.getString(s.view,"").toLowerCase();return s._currentView={},s._currentView.element=i,s._currentView.disabledBackground=null,s._currentView.configurationDialog=null,s._currentView.configurationDialogDayCheckBoxes=[],s._currentView.configurationDialogMonthCheckBoxes=[],s._currentView.tooltip=null,s._currentView.tooltipTimer=0,s._currentView.mapContents=null,s._currentView.mapContentsScrollLeft=0,s._currentView.year=s.year,s._currentView.type=e.text.unknownTrendText,s._currentView.isInFetchMode=n.definedFunction(s.events.onDataFetch),s._currentView.isInFetchModeTimer=0,s._currentView.yearsAvailable=[],s._currentView.dayWidth=0,s._currentView.mapZoomLevel=-1,s._currentView.mapZoomIncrement=-1,s.views.chart.enabled&&(s._currentView.chartContents=null,s._currentView.chartContentsScrollLeft=0),s.views.days.enabled&&(s._currentView.daysContents=null,s._currentView.daysContentsScrollLeft=0),s.views.statistics.enabled&&(s._currentView.statisticsContents=null,s._currentView.statisticsContentsScrollLeft=0),s._currentView.view="map"===a?1:"chart"===a?2:"days"===a?3:"statistics"===a?4:1,s},e.get=r})(t=e.Options||(e.Options={}))})(d||(d={})),(e=>{let t;(t=e.Options||(e.Options={})).get=function(e=null){const t=o.getObject(e,{});return t.safeMode=o.getBoolean(t.safeMode,!0),t.observationMode=o.getBoolean(t.observationMode,!0),t.domElementTypes=o.getStringOrArray(t.domElementTypes,["*"]),t.text=function(e){return e.text=o.getObject(e.text,{}),e.text.stText=o.getAnyString(e.text.stText,"st"),e.text.ndText=o.getAnyString(e.text.ndText,"nd"),e.text.rdText=o.getAnyString(e.text.rdText,"rd"),e.text.thText=o.getAnyString(e.text.thText,"th"),e.text.backButtonText=o.getAnyString(e.text.backButtonText,"Back"),e.text.nextButtonText=o.getAnyString(e.text.nextButtonText,"Next"),e.text.refreshButtonText=o.getAnyString(e.text.refreshButtonText,"Refresh"),e.text.exportButtonText=o.getAnyString(e.text.exportButtonText,"Export"),e.text.lessText=o.getAnyString(e.text.lessText,"Less"),e.text.moreText=o.getAnyString(e.text.moreText,"More"),e.text.dateText=o.getAnyString(e.text.dateText,"Date"),e.text.countText=o.getAnyString(e.text.countText,"Count"),e.text.mapText=o.getAnyString(e.text.mapText,"Map"),e.text.chartText=o.getAnyString(e.text.chartText,"Chart"),e.text.noChartDataMessage=o.getAnyString(e.text.noChartDataMessage,"There is currently no data to view."),e.text.statisticsText=o.getAnyString(e.text.statisticsText,"Statistics"),e.text.noStatisticsDataMessage=o.getAnyString(e.text.noStatisticsDataMessage,"There are currently no statistics to view."),e.text.unknownTrendText=o.getAnyString(e.text.unknownTrendText,"Unknown"),e.text.importButtonText=o.getAnyString(e.text.importButtonText,"Import"),e.text.noMapDataMessage=o.getAnyString(e.text.noMapDataMessage,"There is currently no data to view."),e.text.objectErrorText=o.getAnyString(e.text.objectErrorText,"Errors in object: {{error_1}}, {{error_2}}"),e.text.attributeNotValidErrorText=o.getAnyString(e.text.attributeNotValidErrorText,"The attribute '{{attribute_name}}' is not a valid object."),e.text.attributeNotSetErrorText=o.getAnyString(e.text.attributeNotSetErrorText,"The attribute '{{attribute_name}}' has not been set correctly."),e.text.closeButtonText=o.getAnyString(e.text.closeButtonText,"Close"),e.text.configurationButtonText=o.getAnyString(e.text.configurationButtonText,"Configuration"),e.text.configurationTitleText=o.getAnyString(e.text.configurationTitleText,"Configuration"),e.text.visibleMonthsText=o.getAnyString(e.text.visibleMonthsText,"Visible Months"),e.text.visibleDaysText=o.getAnyString(e.text.visibleDaysText,"Visible Days"),e.text.dataText=o.getAnyString(e.text.dataText,"Data"),e.text.colorRangesText=o.getAnyString(e.text.colorRangesText,"Color Ranges"),e.text.yearText=o.getAnyString(e.text.yearText,"Year"),e.text.daysText=o.getAnyString(e.text.daysText,"Days"),e.text.noDaysDataMessage=o.getAnyString(e.text.noDaysDataMessage,"There are currently no days to view."),e.text.currentYearText=o.getAnyString(e.text.currentYearText,"Current Year"),e.text.todayText=o.getAnyString(e.text.todayText,"Today"),e.text.thisWeekText=o.getAnyString(e.text.thisWeekText,"This Week"),e.text.thisMonthText=o.getAnyString(e.text.thisMonthText,"This Month"),e.text.thisYearText=o.getAnyString(e.text.thisYearText,"This Year"),e.text.unavailableText=o.getAnyString(e.text.unavailableText,"Unavailable"),e.text.monthsText=o.getAnyString(e.text.monthsText,"Months"),e.text.noMonthsDataMessage=o.getAnyString(e.text.noMonthsDataMessage,"There are currently no months to view."),e.text.selectTypeText=o.getAnyString(e.text.selectTypeText,"Select Type"),e.text.filenamePlaceholderText=o.getAnyString(e.text.filenamePlaceholderText,"Filename (optional)"),e.text.onlyDataBeingViewedText=o.getAnyString(e.text.onlyDataBeingViewedText,"Only data being viewed"),e.text.zoomInText=o.getAnyString(e.text.zoomInText,"Zoom In"),e.text.zoomOutText=o.getAnyString(e.text.zoomOutText,"Zoom Out"),e.text.clearButtonText=o.getAnyString(e.text.clearButtonText,"Clear"),e.text.selectFilesText=o.getAnyString(e.text.selectFilesText,"Select File(s)"),e.text.dragAndDropFilesText=o.getAnyString(e.text.dragAndDropFilesText,"Drag and drop your file(s) here ..."),e.text.addTypeText=o.getAnyString(e.text.addTypeText,"Add Type"),e.text.typePlaceholderText=o.getAnyString(e.text.typePlaceholderText,"Type"),e.text.addButtonText=o.getAnyString(e.text.addButtonText,"Add"),e.text.removeButtonText=o.getAnyString(e.text.removeButtonText,"Remove"),e.text.invertText=o.getAnyString(e.text.invertText,"Invert"),e.text.lineText=o.getAnyString(e.text.lineText,"Line"),e.text.noLineDataMessage=o.getAnyString(e.text.noLineDataMessage,"There is currently no data to view."),e.text}(t),t.text=(i=t.text,n.invalidOptionArray(i.monthNames,12)&&(i.monthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),n.invalidOptionArray(i.dayNames,7)&&(i.dayNames=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]),i),t;var i}})(u||(u={})),(e=>{let t;var o;(o=t=e.Background||(e.Background={})).render=function(e){e._currentView.disabledBackground=a.create(e._currentView.element,"div","disabled")},o.show=function(e){n.defined(e._currentView.disabledBackground)&&"block"!==e._currentView.disabledBackground.style.display&&(e._currentView.disabledBackground.style.display="block")},o.hide=function(e){n.defined(e._currentView.disabledBackground)&&"none"!==e._currentView.disabledBackground.style.display&&(e._currentView.disabledBackground.style.display="none")}})(w||(w={})),(g=h||(h={})).months=function(e){let t=[];return t=1===e._currentView.view?e.views.map.monthsToShow:e.views.chart.enabled&&2===e._currentView.view?e.views.chart.monthsToShow:e.views.line.enabled&&6===e._currentView.view?e.views.line.monthsToShow:e.views.days.enabled&&3===e._currentView.view?e.views.days.monthsToShow:e.views.months.enabled&&5===e._currentView.view?e.views.months.monthsToShow:e.views.statistics.enabled&&4===e._currentView.view?e.views.statistics.monthsToShow:e.views.map.monthsToShow,t},g.days=function(e){let t=[];return t=1===e._currentView.view?e.views.map.daysToShow:e.views.chart.enabled&&2===e._currentView.view?e.views.chart.daysToShow:e.views.line.enabled&&6===e._currentView.view?e.views.line.daysToShow:e.views.days.enabled&&3===e._currentView.view?e.views.days.daysToShow:e.views.months.enabled&&5===e._currentView.view?e.views.months.daysToShow:e.views.statistics.enabled&&4===e._currentView.view?e.views.statistics.daysToShow:e.views.map.daysToShow,t},(m||(m={})).file=function(e,t,i,r){"json"===t?function(e,t,i){const r=new FileReader;let s={};r.onloadend=()=>t(e.name,s),r.onload=e=>{const t=o.getObjectFromString(e.target.result,i);t.parsed&&n.definedObject(t.object)&&(s=t.object)},r.readAsText(e)}(e,i,r):"txt"===t?function(e,t){const n=new FileReader,o={};n.onloadend=()=>t(e.name,o),n.onload=e=>{const t=e.target.result.toString().split("\n"),n=t.length;for(let e=0;e<n;e++){const n=t[e].split(":");o[n[0].trim()]=parseInt(n[1].trim())}},n.readAsText(e)}(e,i):"csv"===t?function(e,t){const n=new FileReader,o={};n.onloadend=()=>t(e.name,o),n.onload=e=>{const t=e.target.result.toString().replace(new RegExp('"',"g"),"").split("\n"),n=t.length;for(let e=1;e<n;e++){let n=t[e].split(",");o[n[0].trim()]=parseInt(n[1].trim())}},n.readAsText(e)}(e,i):"tsv"===t?function(e,t){const n=new FileReader,o={};n.onloadend=()=>t(e.name,o),n.onload=e=>{const t=e.target.result.toString().split("\n"),n=t.length;for(let e=1;e<n;e++){const n=t[e].split("\t");o[n[0].trim()]=parseInt(n[1].trim())}},n.readAsText(e)}(e,i):"md"===t?function(e,t){const n=new FileReader,o={};n.onloadend=()=>t(e.name,o),n.onload=e=>{const t=e.target.result.toString().split("\n"),n=t.length;for(let e=2;e<n;e++){const n=t[e].trim(),i=n.substring(1,n.length-1).trim().split("|");o[i[0].trim()]=parseInt(i[1].trim())}},n.readAsText(e)}(e,i):"yaml"===t?function(e,t){const n=new FileReader,o={};n.onloadend=()=>t(e.name,o),n.onload=e=>{const t=e.target.result.toString().split("\n"),n=t.length;for(let e=1;e<n;e++){const n=t[e].split(":");o[n[0].trim()]=parseInt(n[1].trim())}},n.readAsText(e)}(e,i):"toml"===t&&function(e,t){const n=new FileReader,o={};n.onloadend=()=>t(e.name,o),n.onload=e=>{const t=e.target.result.toString().split("\n"),n=t.length;for(let e=3;e<n;e++){const n=t[e].split("=");o[n[0].trim()]=parseInt(n[1].trim())}},n.readAsText(e)}(e,i)},(e=>{let t;var o;let r;(o=t=e.File||(e.File={})).mimeType=function(e){let t=null;return"csv"===e.toLowerCase()?t="text/csv":"json"===e.toLowerCase()?t="application/json":"xml"===e.toLowerCase()?t="application/xml":"txt"===e.toLowerCase()?t="text/plain":"html"===e.toLowerCase()?t="text/html":"md"===e.toLowerCase()?t="text/x-markdown":"tsv"===e.toLowerCase()?t="text/tab-separated-values":"yaml"===e.toLowerCase()?t="application/yaml":"toml"===e.toLowerCase()&&(t="application/toml"),t},o.filename=function(e,t,o,r){let s=null;if(n.definedString(o))s=`${o}.${r.toLowerCase()}`;else{const n=new Date,o=`${i.padNumber(n.getDate())}-${i.padNumber(n.getMonth()+1)}-${n.getFullYear()}`,a=`${i.padNumber(n.getHours())}-${i.padNumber(n.getMinutes())}`;let l="";t._currentView.type!==e.text.unknownTrendText&&(l=`${t._currentView.type.toLowerCase().replace(/ /g,"_")}_`),s=`${l}${o}_${a}.${r.toLowerCase()}`}return s},(e=>{function t(e){let t=e.toString().replace(/(\r\n|\n|\r)/gm,"").replace(/(\s\s)/gm," ");return t=t.replace(/"/g,'""'),t=`"${t}"`,t}function n(e){return e.join(",")}e.get=function(e,o,i,r){let a=null;return"csv"===e?a=function(e,o){const i=[];for(const o in e)e.hasOwnProperty(o)&&i.push(n([t(o),t(e[o].toString())]));i.length>0&&i.unshift(n([t(o.text.dateText),t(o.text.countText)]));return i.join("\n")}(o,i):"json"===e?a=function(e){return JSON.stringify(e)}(o):"xml"===e?a=function(e){const t=[];t.push('<?xml version="1.0" ?>'),t.push("<Dates>");for(const n in e)e.hasOwnProperty(n)&&(t.push("<Date>"),t.push(`<FullDate>${n}</FullDate>`),t.push(`<Count>${e[n].toString()}</Count>`),t.push("</Date>"));return t.push("</Dates>"),t.join("\n")}(o):"txt"===e?a=function(e){const t=[];for(const n in e)e.hasOwnProperty(n)&&t.push(`${n}: ${e[n].toString()}`);return t.join("\n")}(o):"html"===e?a=function(e,t,n){const o=[],i=s.getCustomFormattedDateText(t,n.exportDateTimeFormat,new Date);o.push("<!DOCTYPE html>"),o.push("<html>"),o.push("<head>"),o.push('<meta charset="utf-8" />'),o.push(`<meta http-equiv="Last-Modified" content="${i} GMT" />`),o.push("</head>"),o.push("<body>"),o.push("<ul>");for(const t in e)e.hasOwnProperty(t)&&o.push(`<li><b>${t}:</b> ${e[t].toString()}</li>`);return o.push("</ul>"),o.push("</body>"),o.push("</html>"),o.join("\n")}(o,i,r):"md"===e?a=function(e){const t=[];t.push("| Full Date | Count |"),t.push("| --- | --- |");for(const n in e)e.hasOwnProperty(n)&&t.push(`| ${n} | ${e[n].toString()} |`);return t.join("\n")}(o):"tsv"===e?a=function(e){const t=[];t.push("Full Date\tCount");for(const n in e)e.hasOwnProperty(n)&&t.push(`${n}\t${e[n].toString()}`);return t.join("\n")}(o):"yaml"===e?a=function(e,t,n){const o=[],i=s.getCustomFormattedDateText(t,n.exportDateTimeFormat,new Date);o.push(`Last-Modified: ${i}`);for(const t in e)e.hasOwnProperty(t)&&o.push(`${t}: ${e[t].toString()}`);return o.join("\n")}(o,i,r):"toml"===e&&(a=function(e,t,n){const o=[],i=s.getCustomFormattedDateText(t,n.exportDateTimeFormat,new Date);o.push(`last_modified = "${i}"`),o.push(""),o.push("[dates]");for(const t in e)e.hasOwnProperty(t)&&o.push(`${t} = ${e[t].toString()}`);return o.join("\n")}(o,i,r)),a}})(r=e.Contents||(e.Contents={}))})(p||(p={})),(v=y||(y={})).toRgbOpacityColor=function(e,t){const n=e.indexOf(") ")>-1?`${e.split(") ")[0]})`:e;let o=n.replace("rgba(","").replace("rgb(","").replace(")","").split(",");return n.startsWith("rgba")?o[o.length-1]=t.toString():o.push(t.toString()),`rgba(${o.join()})`},v.hexToRgba=function(e){const t=e.trim().replace("#","");let n=1;const o=parseInt(t.substring(0,2),16),i=parseInt(t.substring(2,4),16),r=parseInt(t.substring(4,6),16);return 8===e.length&&(n=parseInt(t.substring(6,8),16)),`rgba(${o}, ${i}, ${r}, ${n})`},v.valuesToOpacitiesOrder=function(e){const t=Object.values(e.values).sort((e,t)=>e-t),n=t.length,o=1/n;for(let i=0;i<n;i++)e.valueOpacities[t[i]]=parseFloat((o*(i+1)).toFixed(2))},(e=>{let t;var n;(n=t=e.Variables||(e.Variables={})).DaySize="--heat-js-day-size",n.Spacing="--heat-js-spacing"})(f||(f={})),(T||(T={})).setHeight=function(e,t,n,o=!0){n>0&&(o&&e.chartsAnimationDelay>0?setTimeout(()=>{t.style.height=`${n}px`},e.chartsAnimationDelay):t.style.height=`${n}px`)},(()=>{let t={},r=null,g={};function v(){const e=t.domElementTypes,n=e.length;for(let t=0;t<n;t++){const n=document.getElementsByTagName(e[t]),o=[].slice.call(n),i=o.length;for(let e=0;e<i&&V(o[e]);e++);}}function V(i){let r=!0;if(n.defined(i)&&i.hasAttribute(e.HEAT_JS_ATTRIBUTE_NAME)){const s=i.getAttribute(e.HEAT_JS_ATTRIBUTE_NAME);if(n.definedString(s)){const a=o.getObjectFromString(s,t);a.parsed&&n.definedObject(a.object)?_(d.Options.getForNewInstance(t,a.object,i)):t.safeMode||(console.error(t.text.attributeNotValidErrorText.replace("{{attribute_name}}",e.HEAT_JS_ATTRIBUTE_NAME)),r=!1)}else t.safeMode||(console.error(t.text.attributeNotSetErrorText.replace("{{attribute_name}}",e.HEAT_JS_ATTRIBUTE_NAME)),r=!1)}return r}function _(t){c.customEvent(t.events.onBeforeRender,t._currentView.element),n.definedString(t._currentView.element.id)||(t._currentView.element.id=crypto.randomUUID()),""===t._currentView.element.className.trim()?t._currentView.element.className="heat-js":a.addClass(t._currentView.element,"heat-js"),t.resizable&&a.addClass(t._currentView.element,"resizable"),t._currentView.element.removeAttribute(e.HEAT_JS_ATTRIBUTE_NAME),q(t._currentView.element.id,t),C(t),D(t),c.customEvent(t.events.onRenderComplete,t._currentView.element)}function C(o,r=!1,d=!1,u=!1){r&&function(t){if(t.useLocalStorageForData&&window.localStorage){const n=t._currentView.element.id;!function(t){if(t.useLocalStorageForData&&window.localStorage){const n=window.localStorage.length,o=[],r=t._currentView.element.id;for(let t=0;t<n;t++)i.startsWithAnyCase(window.localStorage.key(t),`${e.LOCAL_STORAGE_START_ID}${r}`)&&o.push(window.localStorage.key(t));const s=o.length;for(let e=0;e<s;e++)window.localStorage.removeItem(o[e])}}(t);const o=JSON.stringify(g[n].typeData);window.localStorage.setItem(`${e.LOCAL_STORAGE_START_ID}${n}`,o)}}(o),function(e){n.defined(e._currentView.mapContents)&&(e._currentView.mapContentsScrollLeft=e._currentView.mapContents.scrollLeft);e.views.chart.enabled&&n.defined(e._currentView.chartContents)&&(e._currentView.chartContentsScrollLeft=e._currentView.chartContents.scrollLeft);e.views.line.enabled&&n.defined(e._currentView.lineContents)&&(e._currentView.lineContentsScrollLeft=e._currentView.lineContents.scrollLeft);e.views.days.enabled&&n.defined(e._currentView.daysContents)&&(e._currentView.daysContentsScrollLeft=e._currentView.daysContents.scrollLeft);e.views.statistics.enabled&&n.defined(e._currentView.statisticsContents)&&(e._currentView.statisticsContentsScrollLeft=e._currentView.statisticsContents.scrollLeft);""!==e._currentView.element.innerHTML&&(e._currentView.element.style.height=`${e._currentView.element.offsetHeight}px`);e._currentView.element.innerHTML="",e._currentView.yearsAvailable=function(e){let t=[];if(e.showOnlyDataForYearsAvailable){let n=K(e);for(const e in n)if(n.hasOwnProperty(e)){let n=parseInt(s.getStorageDateYear(e));-1===t.indexOf(n)&&t.push(n)}}return t=t.sort((e,t)=>e-t),t}(e)}(o),l.hide(o),function(e){e._currentView.isInFetchMode&&(0===e._currentView.isInFetchModeTimer&&ee(e),0===e._currentView.isInFetchModeTimer&&(e._currentView.isInFetchModeTimer=setInterval(()=>{ee(e),C(e)},e.dataFetchDelay)))}(o),function(e){const n=X(e);if(g[e._currentView.element.id].totalTypes>1)for(const o in g[e._currentView.element.id].typeData)(o!==t.text.unknownTrendText||n>0)&&0===n&&e._currentView.type===t.text.unknownTrendText&&(e._currentView.type=o)}(o),(o.title.showConfigurationButton||o.title.showExportButton||o.title.showImportButton||o.allowTypeAdding)&&w.Background.render(o),o.title.showConfigurationButton&&function(e){e._currentView.configurationDialog=a.create(e._currentView.disabledBackground,"div","dialog configuration");const o=a.create(e._currentView.configurationDialog,"div","dialog-title-bar"),i=a.create(e._currentView.configurationDialog,"div","dialog-contents"),r=a.create(o,"div","dialog-close"),s=a.create(i,"div","side-container panel"),d=a.create(i,"div","side-container panel");a.createWithHTML(o,"span","dialog-title-bar-text",t.text.configurationTitleText),a.createWithHTML(s,"div","side-container-title-text",`${t.text.visibleDaysText}:`),a.createWithHTML(d,"div","side-container-title-text",`${t.text.visibleMonthsText}:`);const u=a.create(d,"div","side-container"),h=a.create(d,"div","side-container");r.onclick=()=>function(e){w.Background.hide(e),n.defined(e._currentView.configurationDialog)&&"none"!==e._currentView.configurationDialog.style.display&&(e._currentView.configurationDialog.style.display="none");const t=[],o=[];let i=!1;for(let n=0;n<7;n++)e._currentView.configurationDialogDayCheckBoxes[n].checked&&t.push(n+1);for(let t=0;t<12;t++)e._currentView.configurationDialogMonthCheckBoxes[t].checked&&o.push(t+1);t.length>=1&&(1===e._currentView.view?e.views.map.daysToShow=t:e.views.chart.enabled&&2===e._currentView.view?e.views.chart.daysToShow=t:e.views.line.enabled&&6===e._currentView.view?e.views.line.daysToShow=t:e.views.days.enabled&&3===e._currentView.view?e.views.days.daysToShow=t:e.views.months.enabled&&5===e._currentView.view?e.views.months.daysToShow=t:e.views.statistics.enabled&&4===e._currentView.view?e.views.statistics.daysToShow=t:e.views.map.daysToShow=t,i=!0);o.length>=1&&(1===e._currentView.view?e.views.map.monthsToShow=o:e.views.chart.enabled&&2===e._currentView.view?e.views.chart.monthsToShow=o:e.views.line.enabled&&6===e._currentView.view?e.views.line.monthsToShow=o:e.views.days.enabled&&3===e._currentView.view?e.views.days.monthsToShow=o:e.views.months.enabled&&5===e._currentView.view?e.views.months.monthsToShow=o:e.views.statistics.enabled&&4===e._currentView.view?e.views.statistics.monthsToShow=o:e.views.map.monthsToShow=o,i=!0);i?(C(e),c.customEvent(e.events.onOptionsUpdate,e._currentView.element,e)):l.hide(e)}(e);for(let n=0;n<7;n++)e._currentView.configurationDialogDayCheckBoxes[n]=a.createCheckBox(s,t.text.dayNames[n],n.toString());let g=u,m=0;for(let n=e.startMonth;n<12+e.startMonth;n++){let o=n;e.startMonth>0&&n>11&&(o=n-12),e._currentView.configurationDialogMonthCheckBoxes[o]=a.createCheckBox(g,t.text.monthNames[o],o.toString()),m++,m>6&&(g=h)}l.add(r,e,t.text.closeButtonText)}(o),o.title.showExportButton&&function(e){e._currentView.exportDialog=a.create(e._currentView.disabledBackground,"div","dialog export");const n=a.create(e._currentView.exportDialog,"div","dialog-title-bar"),o=a.create(e._currentView.exportDialog,"div","dialog-contents"),i=a.create(n,"div","dialog-close");a.createWithHTML(n,"span","dialog-title-bar-text",t.text.selectTypeText),e._currentView.exportDialogExportTypeSelect=a.create(o,"select","input-box"),e._currentView.exportDialogExportTypeSelect.name=crypto.randomUUID(),e._currentView.exportDialogExportFilenameInput=a.create(o,"input","input-box filename"),e._currentView.exportDialogExportFilenameInput.name=crypto.randomUUID(),e._currentView.exportDialogExportFilenameInput.placeholder=t.text.filenamePlaceholderText,e._currentView.exportDialogExportOnlyDataBeingViewedCheckBox=a.createCheckBox(o,t.text.onlyDataBeingViewedText,crypto.randomUUID()),e._currentView.exportDialogExportOnlyDataBeingViewedCheckBox.checked=e.exportOnlyDataBeingViewed;const r=a.create(o,"div","buttons"),s=a.createButton(r,"button","default",t.text.exportButtonText);!function(e){let t,n=[];for(t in b){const o=a.createWithNoContainer("option");o.value=b[t],o.textContent=t.toString().toUpperCase(),o.selected=t===e.exportType,n.push(o)}n.sort((e,t)=>e.text.toLowerCase().localeCompare(t.text.toLowerCase())),n.forEach(t=>e._currentView.exportDialogExportTypeSelect.add(t))}(e);const c=()=>{const t=e._currentView.exportDialogExportTypeSelect.value,n=e._currentView.exportDialogExportFilenameInput.value,o=e._currentView.exportDialogExportOnlyDataBeingViewedCheckBox.checked;S(e),M(e,t,n,o)};e._currentView.exportDialogExportFilenameInput.onkeydown=e=>{"Enter"===e.key&&c()},s.onclick=()=>c(),i.onclick=()=>S(e),l.add(i,e,t.text.closeButtonText)}(o),o.title.showImportButton&&function(e){e._currentView.importDialog=a.create(e._currentView.disabledBackground,"div","dialog import");const o=a.create(e._currentView.importDialog,"div","dialog-title-bar"),i=a.create(e._currentView.importDialog,"div","dialog-contents"),r=a.create(o,"div","dialog-close");a.createWithHTML(o,"span","dialog-title-bar-text",t.text.selectFilesText),e._currentView.importDialogDragAndDrop=a.createWithHTML(i,"div","drag-and-drop-files",t.text.dragAndDropFilesText),function(e,t){t.allowFileImports&&!t._currentView.isInFetchMode&&(e.ondragover=a.cancelBubble,e.ondragenter=a.cancelBubble,e.ondragleave=a.cancelBubble,e.ondrop=e=>{if(a.cancelBubble(e),n.defined(window.FileReader)&&e.dataTransfer.files.length>0){const n=new DataTransfer;if(t.allowFileImports){const t=e.dataTransfer.files.length;for(let o=0;o<t;o++)n.items.add(e.dataTransfer.files[o])}else n.items.add(e.dataTransfer.files[0]);N(t,n.files)}})}(e._currentView.importDialogDragAndDrop,e);const s=a.create(i,"div","buttons"),c=a.createButton(s,"button","","...");e._currentView.importDialogImportButton=a.createButton(s,"button","default",t.text.importButtonText),e._currentView.importDialogImportButton.disabled=!0,r.onclick=()=>function(e){w.Background.hide(e),n.defined(e._currentView.importDialog)&&"none"!==e._currentView.importDialog.style.display&&(e._currentView.importDialogFileList=null,e._currentView.importDialogImportButton.disabled=!0,e._currentView.importDialog.style.display="none");l.hide(e)}(e),c.onclick=()=>B(e),e._currentView.importDialogImportButton.onclick=()=>A(e._currentView.importDialogFileList,e),l.add(r,e,t.text.closeButtonText)}(o),o.allowTypeAdding&&function(e){e._currentView.typeAddingDialog=a.create(e._currentView.disabledBackground,"div","dialog add-type");const o=a.create(e._currentView.typeAddingDialog,"div","dialog-title-bar"),i=a.create(e._currentView.typeAddingDialog,"div","dialog-contents"),r=a.create(o,"div","dialog-close");a.createWithHTML(o,"span","dialog-title-bar-text",t.text.addTypeText),e._currentView.typeAddingDialogTypeInput=a.create(i,"input","input-box type"),e._currentView.typeAddingDialogTypeInput.name=crypto.randomUUID(),e._currentView.typeAddingDialogTypeInput.placeholder=t.text.typePlaceholderText;const s=a.create(i,"div","buttons"),d=a.createButton(s,"button","default",t.text.addButtonText),u=()=>{const t=e._currentView.typeAddingDialogTypeInput.value.trim();if(n.definedString(t)){const n=e._currentView.element.id;g[n].typeData.hasOwnProperty(t)||(g[n].typeData[t]={},g[n].totalTypes++),e._currentView.type=t,c.customEvent(e.events.onTypeSwitch,t),S(e),C(e,!0)}else S(e)};e._currentView.typeAddingDialogTypeInput.onkeydown=e=>{"Enter"===e.key&&u()},d.onclick=()=>u(),r.onclick=()=>function(e){w.Background.hide(e),n.defined(e._currentView.typeAddingDialog)&&"none"!==e._currentView.typeAddingDialog.style.display&&(e._currentView.typeAddingDialog.style.display="none");l.hide(e)}(e),l.add(r,e,t.text.closeButtonText)}(o),l.render(o),function(e){if(e.title.showText||e.title.showYearSelector||e.title.showRefreshButton||e.title.showExportButton||e.title.showImportButton||e.title.showClearButton){const o=a.create(e._currentView.element,"div","title-bar"),i=a.create(o,"div","title"),r=e.title.showTitleDropDownMenu&&(e.views.chart.enabled||e.views.days.enabled||e.views.statistics.enabled||e.views.months.enabled||e.views.line.enabled);if(r?e.title.showTitleDropDownButton&&a.create(i,"div","down-arrow"):a.addClass(i,"no-click"),e.title.showText&&(i.innerHTML+=e.title.text,e.title.showSectionText&&(a.createWithHTML(i,"span","section-text","["),1===e._currentView.view?a.createWithHTML(i,"span","section-text-name",t.text.mapText):e.views.chart.enabled&&2===e._currentView.view?a.createWithHTML(i,"span","section-text-name",t.text.chartText):e.views.line.enabled&&6===e._currentView.view?a.createWithHTML(i,"span","section-text-name",t.text.lineText):e.views.days.enabled&&3===e._currentView.view?a.createWithHTML(i,"span","section-text-name",t.text.daysText):e.views.months.enabled&&5===e._currentView.view?a.createWithHTML(i,"span","section-text-name",t.text.monthsText):e.views.statistics.enabled&&4===e._currentView.view?a.createWithHTML(i,"span","section-text-name",t.text.colorRangesText):a.createWithHTML(i,"span","section-text-name",t.text.mapText),a.createWithHTML(i,"span","section-text","]"))),r&&function(e,o){const i=a.create(o,"div","titles-menu-container"),r=a.create(i,"div","titles-menu");e.title.showTitleDropDownHeaders&&a.createWithHTML(r,"div","title-menu-header",`${t.text.dataText}:`);const s=O(e,r,t.text.mapText);if(k(e,s,1,"map"),e.views.chart.enabled){k(e,O(e,r,t.text.chartText),2,"chart")}if(e.views.line.enabled){k(e,O(e,r,t.text.lineText),6,"line")}let l=null;if(e.views.days.enabled){e.title.showTitleDropDownHeaders&&(l=a.createWithHTML(r,"div","title-menu-header",`${t.text.yearText}:`));k(e,O(e,r,t.text.daysText),3,"days")}if(e.views.months.enabled){e.title.showTitleDropDownHeaders&&!n.defined(l)&&(l=a.createWithHTML(r,"div","title-menu-header",`${t.text.yearText}:`));k(e,O(e,r,t.text.monthsText),5,"months")}if(e.views.statistics.enabled){e.title.showTitleDropDownHeaders&&a.createWithHTML(r,"div","title-menu-header",`${t.text.statisticsText}:`);k(e,O(e,r,t.text.colorRangesText),4,"statistics")}}(e,i),e.title.showImportButton&&!e._currentView.isInFetchMode){const i=a.createIconButton(o,"button","import","arrow-up");i.onclick=()=>function(e){w.Background.show(e),n.defined(e._currentView.importDialog)&&"block"!==e._currentView.importDialog.style.display&&(e._currentView.importDialog.style.display="block");l.hide(e)}(e),e.title.showToolTips&&l.add(i,e,t.text.importButtonText)}if(e.title.showExportButton){const i=a.createIconButton(o,"button","export","arrow-down");i.onclick=()=>function(e){w.Background.show(e),n.defined(e._currentView.exportDialog)&&"block"!==e._currentView.exportDialog.style.display&&(e._currentView.exportDialogExportFilenameInput.value="",e._currentView.exportDialog.style.display="block",e._currentView.exportDialogExportFilenameInput.focus());l.hide(e)}(e),e.title.showToolTips&&l.add(i,e,t.text.exportButtonText)}if(e.title.showRefreshButton){const n=a.createIconButton(o,"button","refresh","refresh");e.title.showToolTips&&l.add(n,e,t.text.refreshButtonText),n.onclick=()=>{C(e),c.customEvent(e.events.onRefresh,e._currentView.element)}}if(e.title.showClearButton){const n=a.createIconButton(o,"button","clear","close");e.title.showToolTips&&l.add(n,e,t.text.clearButtonText),n.onclick=()=>{!function(e){const t=e._currentView.year;let n=K(e);for(let o=e.startMonth;o<12+e.startMonth;o++){let i=o,r=t;e.startMonth>0&&o>11&&(i=o-12,r++);const a=s.getTotalDaysInMonth(r,i);for(let e=0;e<a;e++){const t=new Date(r,i,e+1),o=s.toStorageDate(t);n.hasOwnProperty(o)&&delete n[o]}}}(e),C(e,!0)}}if(e.title.showYearSelector){const i=a.createIconButton(o,"button","back","arrow-left");i.onclick=()=>se(e),e.title.showToolTips&&l.add(i,e,t.text.backButtonText),n.firstVisibleYear(e,e._currentView.year)&&(i.disabled=!0);let r=e._currentView.year.toString();if(e.startMonth>0&&(r+=` / ${e._currentView.year+1}`),e._currentView.yearText=a.createWithHTML(o,"div","year-text",r),e.title.showYearSelectionDropDown?function(e){a.create(e._currentView.yearText,"div","down-arrow");const t=a.create(e._currentView.yearText,"div","years-menu-container"),o=a.create(t,"div","years-menu"),i=(new Date).getFullYear();let r=null;t.style.display="block",t.style.visibility="hidden";for(let t=i-e.title.extraSelectionYears;t<i+e.title.extraSelectionYears;t++)if(n.yearVisible(e,t)){let s=I(e,o,t,i);n.defined(r)||(r=s)}n.defined(r)&&(o.scrollTop=r.offsetTop-o.offsetHeight/2);t.style.display="none",t.style.visibility="visible"}(e):a.addClass(e._currentView.yearText,"no-click"),e.title.showConfigurationButton){let i=a.create(o,"div","configure");i.onclick=()=>function(e){w.Background.show(e),n.defined(e._currentView.configurationDialog)&&"block"!==e._currentView.configurationDialog.style.display&&(e._currentView.configurationDialog.style.display="block");const t=h.days(e),o=h.months(e);for(let o=0;o<7;o++)e._currentView.configurationDialogDayCheckBoxes[o].checked=n.dayVisible(t,o+1);for(let t=0;t<12;t++)e._currentView.configurationDialogMonthCheckBoxes[t].checked=n.monthVisible(o,t);l.hide(e)}(e),e.title.showToolTips&&l.add(i,e,t.text.configurationButtonText)}if(e.title.showCurrentYearButton){const n=a.createIconButton(o,"button","current","pin");e.title.showToolTips&&l.add(n,e,t.text.currentYearText),n.onclick=()=>{e._currentView.year=(new Date).getFullYear()-1,ae(e,!1),c.customEvent(e.events.onSetYear,e._currentView.year)}}const s=a.createIconButton(o,"button","next","arrow-right");s.onclick=()=>ae(e),e.title.showToolTips&&l.add(s,e,t.text.nextButtonText),n.lastVisibleYear(e,e._currentView.year)&&(s.disabled=!0)}}}(o),function(e){const o=new Date,r=e._currentView.year===o.getFullYear();if(e.yearlyStatistics.enabled&&(!e.yearlyStatistics.showOnlyForCurrentYear||r)){const l=a.create(e._currentView.element,"div","yearly-statistics"),c=h.days(e),d=h.months(e),u=F(e,c,d,new Date(e._currentView.year,e.startMonth,1),new Date(e._currentView.year+1,e.startMonth,1));if(e.yearlyStatistics.showToday){let d=K(e)[s.toStorageDate(o)];const w=a.create(l,"div","statistics-box"),h=s.getWeekdayNumber(o)+1;n.defined(d)&&n.dayVisible(c,h)||(d=0);const g=r?i.friendlyNumber(d):t.text.unavailableText;a.createWithHTML(w,"div","statistics-box-title",`${t.text.todayText}:`);const m=a.createWithHTML(w,"div","statistics-box-count",g);r||a.addClass(m,"unavailable"),E(e,m,u,d,r)}if(e.yearlyStatistics.showThisWeek){let n=0;if(r){const t=s.getDateForMondayOfCurrentWeek(),o=new Date(t);o.setDate(t.getDate()+7),n=F(e,c,d,t,o)}const o=r?i.friendlyNumber(n):t.text.unavailableText,w=a.create(l,"div","statistics-box");a.createWithHTML(w,"div","statistics-box-title",`${t.text.thisWeekText}:`);const h=a.createWithHTML(w,"div","statistics-box-count",o);r||a.addClass(h,"unavailable"),E(e,h,u,n,r)}if(e.yearlyStatistics.showThisMonth){let n=0;if(r){n=F(e,c,d,new Date(o.getFullYear(),o.getMonth(),1),new Date(o.getFullYear(),o.getMonth(),s.getTotalDaysInMonth(o.getFullYear(),o.getMonth())+1))}const w=r?i.friendlyNumber(n):t.text.unavailableText,h=a.create(l,"div","statistics-box");a.createWithHTML(h,"div","statistics-box-title",`${t.text.thisMonthText}:`);const g=a.createWithHTML(h,"div","statistics-box-count",w);r||a.addClass(g,"unavailable"),E(e,g,u,n,r)}if(e.yearlyStatistics.showThisYear){const e=a.create(l,"div","statistics-box");a.createWithHTML(e,"div","statistics-box-title",`${t.text.thisYearText}:`),a.createWithHTML(e,"div","statistics-box-count",i.friendlyNumber(u))}""===l.innerHTML&&l.parentNode.removeChild(l)}}(o),function(o,r=!1,d){if(o._currentView.mapContentsContainer=a.create(o._currentView.element,"div","map-contents-container"),o._currentView.mapContents=a.create(o._currentView.mapContentsContainer,"div","map-contents"),o.views.map.showNoDataMessageWhenDataIsNotAvailable&&!function(e){let t=!1;const n=K(e),o=e._currentView.year.toString(),i=(e._currentView.year+1).toString();for(const r in n)if(n.hasOwnProperty(r)){if(s.getStorageDateYear(r)===o){t=!0;break}if(e.startMonth>0&&s.getStorageDateYear(r)===i){t=!0;break}}return t}(o)){const e=a.createWithHTML(o._currentView.mapContents,"div","no-data-message",t.text.noMapDataMessage);r&&a.addClass(e,"view-switch")}else{o._currentView.mapContents.style.minHeight="unset",o._currentView.mapContents.onscroll=()=>l.hide(o);const u=a.create(o._currentView.mapContents,"div","map"),w=o._currentView.year;if(r&&a.addClass(u,"view-switch"),o.views.map.showDayNames){const e=a.create(u,"div","days"),i=o.views.map.showMinimalDayNames&&7===o.views.map.daysToShow.length;o.views.map.showMonthNames&&!o.views.map.placeMonthNamesOnTheBottom||(e.className="days-months-bottom");for(let r=0;r<7;r++)if(n.dayVisible(o.views.map.daysToShow,r+1)){const n=i&&r%3!=0?" ":t.text.dayNames[r],s=a.createWithHTML(e,"div","day-name",n);o.views.days.enabled&&(s.ondblclick=()=>J(o,3,"days"))}o.views.map.showDaysInReverseOrder&&a.reverseChildrenOrder(e)}const h=a.create(u,"div","months"),g=re(o);for(let i=o.startMonth;i<12+o.startMonth;i++){let r=i,l=w;if(o.startMonth>0&&i>11&&(r=i-12,l++),n.monthVisible(o.views.map.monthsToShow,r)){const i=a.create(h,"div","month"),c=a.create(i,"div","day-columns"),d=new Date(l,r,1),u=s.getWeekdayNumber(d);let w=s.getTotalDaysInMonth(l,r),m=a.create(c,"div","day-column"),p=!1,y=1;i.setAttribute(e.HEAT_JS_MAP_MONTH_NUMBER_ATTRIBUTE_NAME,`${r+1}`),w+=u;for(let e=0;e<w;e++){if(e>=u?p=!0:n.dayVisible(o.views.map.daysToShow,y)&&a.create(m,"div","day-disabled"),p){let t=null;if(n.dayVisible(o.views.map.daysToShow,y)&&(t=H(o,m,e-u,r,l,g)),(e+1)%7==0&&(o.views.map.showDaysInReverseOrder&&a.reverseChildrenOrder(m),m=a.create(c,"div","day-column"),y=0,0===o._currentView.dayWidth&&n.defined(t))){let e=a.getStyleValueByName(t,"margin-left",!0),n=a.getStyleValueByName(t,"margin-right",!0);o._currentView.dayWidth=t.offsetWidth+e+n}}y++}if(R(o,y,m),o.views.map.showMonthNames){let e;const n=i.offsetWidth;let s=t.text.monthNames[r];o.startMonth>0&&o.views.map.showYearsInMonthNames&&(s+=` ${l}`),e=o.views.map.placeMonthNamesOnTheBottom?a.createWithHTML(i,"div","month-name-bottom",s):a.createWithHTML(i,"div","month-name",s,c),o.views.map.showMonthDayGaps?e.style.width=`${n}px`:e.style.width=n-o._currentView.dayWidth+"px",o.views.months.enabled&&(e.ondblclick=()=>J(o,5,"months"))}o.views.map.showMonthsInReverseOrder&&a.reverseChildrenOrder(c)}}o.views.map.showMonthsInReverseOrder&&a.reverseChildrenOrder(h),function(e,t){const n=t.children.length;for(let o=1;o<n;o++){const n=t.children[o],i=n.getElementsByClassName("day-column"),r=[].slice.call(i)[0].getElementsByClassName("day-disabled");!e.views.map.showMonthDayGaps&&r.length>0?n.style.marginLeft=-e._currentView.dayWidth+"px":e.views.map.showMonthDayGaps&&0===r.length&&(n.style.marginLeft=`${e._currentView.dayWidth}px`)}}(o,h),function(e,n){const o=a.getStyleValueByNameSizingMetic(document.documentElement,f.Variables.DaySize);let r=a.getStyleValueByName(document.documentElement,f.Variables.DaySize,!0);-1===e._currentView.mapZoomIncrement&&(e._currentView.mapZoomIncrement=r/10);if(e.views.map.allowZooming){const s=a.create(e._currentView.mapContentsContainer,"div","zooming"),d=a.create(s,"div","zoom-close-button"),u=a.createIconButton(s,"button","zoom-out","minus"),w=a.createWithHTML(s,"span","zoom-level",`+${i.friendlyNumber(10*e._currentView.mapZoomLevel)}%`),h=a.createIconButton(s,"button","zoom-in","plus"),g=a.getStyleValueByName(document.documentElement,f.Variables.Spacing,!0);r=a.getStyleValueByName(e._currentView.element,f.Variables.DaySize,!0),0===r&&(r=a.getStyleValueByName(document.documentElement,f.Variables.DaySize,!0)),l.add(d,e,t.text.closeButtonText),l.add(h,e,t.text.zoomInText),l.add(u,e,t.text.zoomOutText),s.style.bottom=e._currentView.mapContentsContainer.offsetHeight-n.offsetHeight+"px",e.views.map.zoomLevel>0&&-1===e._currentView.mapZoomLevel&&(r+=parseFloat((e.views.map.zoomLevel*e._currentView.mapZoomIncrement).toFixed(1)),e._currentView.mapZoomLevel=e.views.map.zoomLevel,e._currentView.element.style.setProperty(f.Variables.DaySize,`${r}${o}`),e._currentView.dayWidth=0,w.innerText=`+${i.friendlyNumber(10*e._currentView.mapZoomLevel)}%`,C(e,!1,!1,!0)),-1===e._currentView.mapZoomLevel&&(e._currentView.mapZoomLevel=0,w.innerText=`+${i.friendlyNumber(10*e._currentView.mapZoomLevel)}%`),e._currentView.mapContents.style.paddingRight=`${s.offsetWidth+g}px`,u.disabled=0===e._currentView.mapZoomLevel,d.onclick=()=>{e.views.map.allowZooming=!1,e._currentView.mapContents.style.paddingRight="0px",s.parentNode.removeChild(s)},h.onclick=()=>{r+=e._currentView.mapZoomIncrement,r=parseFloat(r.toFixed(1)),e._currentView.mapZoomLevel++,e._currentView.element.style.setProperty(f.Variables.DaySize,`${r}${o}`),e._currentView.dayWidth=0,u.disabled=!1,w.innerText=`+${i.friendlyNumber(10*e._currentView.mapZoomLevel)}%`,c.customEvent(e.events.onMapZoomLevelChange,e._currentView.element,e._currentView.mapZoomLevel),C(e,!1,!1,!0)},u.onclick=()=>{e._currentView.mapZoomLevel>0&&(r-=e._currentView.mapZoomIncrement,r=parseFloat(r.toFixed(1)),e._currentView.mapZoomLevel--,e._currentView.element.style.setProperty(f.Variables.DaySize,`${r}${o}`),e._currentView.dayWidth=0,u.disabled=0===e._currentView.mapZoomLevel,w.innerText=`+${i.friendlyNumber(10*e._currentView.mapZoomLevel)}%`,c.customEvent(e.events.onMapZoomLevelChange,e._currentView.element,e._currentView.mapZoomLevel),C(e,!1,!1,!0))}}else e.views.map.zoomLevel>0&&-1===e._currentView.mapZoomLevel&&(r+=parseFloat((e.views.map.zoomLevel*e._currentView.mapZoomIncrement).toFixed(1)),e._currentView.mapZoomLevel=e.views.map.zoomLevel,e._currentView.element.style.setProperty(f.Variables.DaySize,`${r}${o}`))}(o,u),(o.views.map.keepScrollPositions||d)&&(o._currentView.mapContents.scrollLeft=o._currentView.mapContentsScrollLeft)}}(o,d,u),o.views.chart.enabled&&function(e,o){e._currentView.chartContents=a.create(e._currentView.element,"div","chart-contents"),e._currentView.chartContents.onscroll=()=>l.hide(e);const i=a.create(e._currentView.chartContents,"div","chart");let r=a.create(i,"div","y-labels");const c=a.create(i,"div","day-lines"),d=Q(e);let u=0;o&&a.addClass(i,"view-switch");if(d>0&&e.views.chart.showChartYLabels){const e=a.createWithHTML(r,"div","label-0",d.toString());a.createWithHTML(r,"div","label-25",(3*Math.floor(d/4)).toString()),a.createWithHTML(r,"div","label-50",Math.floor(d/2).toString()),a.createWithHTML(r,"div","label-75",Math.floor(d/4).toString()),a.createWithHTML(r,"div","label-100","0"),r.style.width=`${e.offsetWidth}px`,u=r.offsetWidth+a.getStyleValueByName(r,"margin-right",!0)}else r.parentNode.removeChild(r),r=null;if(0===d){e._currentView.chartContents.style.minHeight=`${e._currentView.mapContents.offsetHeight}px`,i.parentNode.removeChild(i);const n=a.createWithHTML(e._currentView.chartContents,"div","no-data-message",t.text.noChartDataMessage);o&&a.addClass(n,"view-switch")}else{const i=re(e),r=a.getStyleValueByName(c,"border-bottom-width",!0),l=(c.offsetHeight-r)/d,w=e._currentView.year;let h=[],g=!1;for(let t=e.startMonth;t<12+e.startMonth;t++){let r=t,d=w;if(e.startMonth>0&&t>11&&(r=t-12,d++),n.monthVisible(e.views.chart.monthsToShow,r)){const t=s.getTotalDaysInMonth(d,r);let u=1,w=!1;for(let m=0;m<t;m++){const t=new Date(d,r,u),p=s.getWeekdayNumber(t)+1;if(n.dayVisible(e.views.chart.daysToShow,p)){const t=W(c,e,m+1,r,d,i,l,o);!w&&g&&e.views.chart.addMonthSpacing&&a.create(c,"div","month-spacing",t),w||(h.push(t),w=!0)}(m+1)%7==0&&(u=0),u++}}g=!0}if(e.views.chart.showInReverseOrder&&(a.reverseChildrenOrder(c),h=h.reverse()),e.views.chart.showMonthNames){const o=a.create(e._currentView.chartContents,"div","chart-months");let i=0;const r=r=>{let s=r+e.startMonth,l=w;if(e.startMonth>0&&s>11&&(s-=12,l++),n.monthVisible(e.views.chart.monthsToShow,s)){let n=t.text.monthNames[s];e.startMonth>0&&e.views.chart.showYearsInMonthNames&&(n+=` ${l}`);let r=a.createWithHTML(o,"div","month-name",n);if(e.views.chart.showInReverseOrder){let e=h[i].offsetLeft;e-=r.offsetWidth,e+=h[i].offsetWidth,r.style.left=`${e}px`}else r.style.left=`${h[i].offsetLeft}px`;e.views.months.enabled&&(r.ondblclick=()=>J(e,5,"months")),i++}};if(e.views.chart.showInReverseOrder)for(let e=12;e--;)r(e);else for(let e=0;e<12;e++)r(e);o.style.width=`${c.offsetWidth}px`;const s=a.create(o,"div","month-name-space");s.style.height=`${o.offsetHeight}px`,s.style.width=`${u}px`}e.views.chart.keepScrollPositions&&(e._currentView.chartContents.scrollLeft=e._currentView.chartContentsScrollLeft)}e._currentView.chartContents.style.display="none"}(o,d),o.views.line.enabled&&function(e,o){e._currentView.lineContents=a.create(e._currentView.element,"div","line-contents"),e._currentView.lineContents.onscroll=()=>l.hide(e);const i=a.create(e._currentView.lineContents,"div","line"),r=a.create(i,"div","day-lines"),c=Q(e);o&&a.addClass(i,"view-switch");if(0===c){e._currentView.lineContents.style.minHeight=`${e._currentView.mapContents.offsetHeight}px`,i.parentNode.removeChild(i);const n=a.createWithHTML(e._currentView.lineContents,"div","no-data-message",t.text.noLineDataMessage);o&&a.addClass(n,"view-switch")}else{const o=e._currentView.year,i=re(e);let l=[];for(let t=e.startMonth;t<12+e.startMonth;t++){let a=t,c=o;if(e.startMonth>0&&t>11&&(a=t-12,c++),n.monthVisible(e.views.line.monthsToShow,a)){const t=s.getTotalDaysInMonth(c,a);let o=1,d=!1;for(let u=0;u<t;u++){const t=new Date(c,a,o),w=s.getWeekdayNumber(t)+1;if(n.dayVisible(e.views.line.daysToShow,w)){const t=$(r,e,u+1,a,c,i);d||(l.push(t),d=!0)}(u+1)%7==0&&(o=0),o++}}}if(e.views.line.showInReverseOrder&&(a.reverseChildrenOrder(r),l=l.reverse()),e.views.line.showMonthNames){const i=a.create(e._currentView.lineContents,"div","line-months");let s=0;const c=r=>{let c=r+e.startMonth,d=o;if(e.startMonth>0&&c>11&&(c-=12,d++),n.monthVisible(e.views.line.monthsToShow,c)){let n=t.text.monthNames[c];e.startMonth>0&&e.views.line.showYearsInMonthNames&&(n+=` ${d}`);let o=a.createWithHTML(i,"div","month-name",n);if(e.views.chart.showInReverseOrder){let e=l[s].offsetLeft;e-=o.offsetWidth,e+=l[s].offsetWidth,o.style.left=`${e}px`}else o.style.left=`${l[s].offsetLeft}px`;e.views.months.enabled&&(o.ondblclick=()=>J(e,5,"months")),s++}};if(e.views.line.showInReverseOrder)for(let e=12;e--;)c(e);else for(let e=0;e<12;e++)c(e);i.style.width=`${r.offsetWidth}px`}e.views.line.keepScrollPositions&&(e._currentView.lineContents.scrollLeft=e._currentView.lineContentsScrollLeft)}e._currentView.lineContents.style.display="none"}(o,d),o.views.days.enabled&&function(e,o){e._currentView.daysContents=a.create(e._currentView.element,"div","days-contents");const i=a.create(e._currentView.daysContents,"div","days"),r=a.create(e._currentView.daysContents,"div","day-names");let l=a.create(i,"div","y-labels");const c=a.create(i,"div","day-lines"),d=re(e),u=function(e,t){const o={values:{1:0,2:0,3:0,4:0,5:0,6:0,7:0},valueOpacities:{},largestValue:0,totalValue:0},i=K(e),r=e._currentView.year;for(let a=e.startMonth;a<12+e.startMonth;a++){let l=a,c=r;if(e.startMonth>0&&a>11&&(l=a-12,c++),n.monthVisible(e.views.days.monthsToShow,l)){const r=s.getTotalDaysInMonth(c,l);for(let a=0;a<r;a++){const r=s.toStorageDate(new Date(c,l,a+1));if(i.hasOwnProperty(r)){const d=new Date(c,l,a+1),u=s.getWeekdayNumber(d)+1;if(!n.holiday(e,d).matched&&n.dayVisible(e.views.days.daysToShow,u)){const s=i[r],a=oe(e,t,s);n.defined(a)&&!a.visible||(o.values[u]+=s,o.totalValue+=s,o.largestValue=Math.max(o.largestValue,o.values[u]))}}}}}return y.valuesToOpacitiesOrder(o),o}(e,d);!o||e.views.days.useDifferentOpacities&&e.views.days.showDayCounts||a.addClass(i,"view-switch");if(u.largestValue>0&&e.views.days.showChartYLabels){const e=a.createWithHTML(l,"div","label-0",u.largestValue.toString());a.createWithHTML(l,"div","label-25",(3*Math.floor(u.largestValue/4)).toString()),a.createWithHTML(l,"div","label-50",Math.floor(u.largestValue/2).toString()),a.createWithHTML(l,"div","label-75",Math.floor(u.largestValue/4).toString()),a.createWithHTML(l,"div","label-100","0"),l.style.width=`${e.offsetWidth}px`,r.style.paddingLeft=`${l.offsetWidth+a.getStyleValueByName(l,"margin-right",!0)}px`}else l.parentNode.removeChild(l),l=null;if(0===u.largestValue){e._currentView.daysContents.style.minHeight=`${e._currentView.mapContents.offsetHeight}px`,i.parentNode.removeChild(i),r.parentNode.removeChild(r);const n=a.createWithHTML(e._currentView.daysContents,"div","no-days-message",t.text.noDaysDataMessage);o&&a.addClass(n,"view-switch")}else{const o=a.getStyleValueByName(c,"border-bottom-width",!0),i=(c.offsetHeight-o)/u.largestValue;for(const o in u.values)if(u.values.hasOwnProperty(o)&&n.dayVisible(e.views.days.daysToShow,parseInt(o))){const n=u.valueOpacities[u.values[o]];P(c,parseInt(o),u.values[o],e,i,n,u.totalValue),e.views.days.showDayNames&&a.createWithHTML(r,"div","day-name",t.text.dayNames[parseInt(o)-1])}e.views.days.showInReverseOrder&&(a.reverseChildrenOrder(c),a.reverseChildrenOrder(r)),e.views.days.keepScrollPositions&&(e._currentView.daysContents.scrollLeft=e._currentView.daysContentsScrollLeft)}e._currentView.daysContents.style.display="none"}(o,d),o.views.months.enabled&&function(e,o){e._currentView.monthsContents=a.create(e._currentView.element,"div","months-contents");const i=a.create(e._currentView.monthsContents,"div","months"),r=a.create(e._currentView.monthsContents,"div","month-names");let l=a.create(i,"div","y-labels");const c=a.create(i,"div","month-lines"),d=re(e),u=function(e,t){const o={values:{1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},valueOpacities:{},largestValue:0,totalValue:0},i=K(e),r=e._currentView.year;for(let a=e.startMonth;a<12+e.startMonth;a++){let l=a,c=r;if(e.startMonth>0&&a>11&&(l=a-12,c++),n.monthVisible(e.views.months.monthsToShow,l)){const r=l+1,a=s.getTotalDaysInMonth(c,l);for(let d=0;d<a;d++){const a=s.toStorageDate(new Date(c,l,d+1));if(i.hasOwnProperty(a)){const u=new Date(c,l,d+1),w=s.getWeekdayNumber(u)+1;if(!n.holiday(e,u).matched&&n.dayVisible(e.views.days.daysToShow,w)){const s=i[a],l=oe(e,t,s);n.defined(l)&&!l.visible||(o.values[r]+=s,o.totalValue+=s,o.largestValue=Math.max(o.largestValue,o.values[r]))}}}}}return y.valuesToOpacitiesOrder(o),o}(e,d);!o||e.views.months.useDifferentOpacities&&e.views.months.showMonthCounts||a.addClass(i,"view-switch");if(u.largestValue>0&&e.views.months.showChartYLabels){const e=a.createWithHTML(l,"div","label-0",u.largestValue.toString());a.createWithHTML(l,"div","label-25",(3*Math.floor(u.largestValue/4)).toString()),a.createWithHTML(l,"div","label-50",Math.floor(u.largestValue/2).toString()),a.createWithHTML(l,"div","label-75",Math.floor(u.largestValue/4).toString()),a.createWithHTML(l,"div","label-100","0"),l.style.width=`${e.offsetWidth}px`,r.style.paddingLeft=`${l.offsetWidth+a.getStyleValueByName(l,"margin-right",!0)}px`}else l.parentNode.removeChild(l),l=null;if(0===u.largestValue){e._currentView.monthsContents.style.minHeight=`${e._currentView.mapContents.offsetHeight}px`,i.parentNode.removeChild(i),r.parentNode.removeChild(r);const n=a.createWithHTML(e._currentView.monthsContents,"div","no-months-message",t.text.noMonthsDataMessage);o&&a.addClass(n,"view-switch")}else{const o=a.getStyleValueByName(c,"border-bottom-width",!0),i=(c.offsetHeight-o)/u.largestValue;for(let o=e.startMonth;o<12+e.startMonth;o++){let s=o;e.startMonth>0&&o>11&&(s=o-12);const l=s+1;if(u.values.hasOwnProperty(l)&&n.monthVisible(e.views.months.monthsToShow,s)){const n=u.valueOpacities[u.values[l]];Y(c,l,u.values[l],e,i,n,u.totalValue),e.views.months.showMonthNames&&a.createWithHTML(r,"div","month-name",t.text.monthNames[s])}}e.views.months.showInReverseOrder&&(a.reverseChildrenOrder(c),a.reverseChildrenOrder(r)),e.views.months.keepScrollPositions&&(e._currentView.monthsContents.scrollLeft=e._currentView.monthsContentsScrollLeft)}e._currentView.monthsContents.style.display="none"}(o,d),o.views.statistics.enabled&&function(e,o){e._currentView.statisticsContents=a.create(e._currentView.element,"div","statistics-contents");const i=a.create(e._currentView.statisticsContents,"div","statistics"),r=a.create(e._currentView.statisticsContents,"div","statistics-ranges");let l=a.create(i,"div","y-labels");const c=a.create(i,"div","range-lines"),d=re(e),u=function(e,t){const o=K(e),i=e._currentView.year,r={types:{},largestValue:0,totalValue:0};for(let a=e.startMonth;a<12+e.startMonth;a++){let l=a,c=i;if(e.startMonth>0&&a>11&&(l=a-12,c++),n.monthVisible(e.views.statistics.monthsToShow,l)){const i=s.getTotalDaysInMonth(c,l);for(let a=0;a<i;a++){const i=s.toStorageDate(new Date(c,l,a+1));if(o.hasOwnProperty(i)){const d=new Date(c,l,a+1),u=s.getWeekdayNumber(d)+1;if(!n.holiday(e,d).matched&&n.dayVisible(e.views.statistics.daysToShow,u)){const s=oe(e,t,o[i]),a=n.defined(s)?s.minimum.toString():"0";r.types.hasOwnProperty(a)||(r.types[a]=0),r.types[a]++,r.totalValue++,r.largestValue=Math.max(r.largestValue,r.types[a])}}}}}return r}(e,d);o&&a.addClass(i,"view-switch");if(u.largestValue>0&&e.views.statistics.showChartYLabels){const e=a.createWithHTML(l,"div","label-0",u.largestValue.toString());a.createWithHTML(l,"div","label-25",(3*Math.floor(u.largestValue/4)).toString()),a.createWithHTML(l,"div","label-50",Math.floor(u.largestValue/2).toString()),a.createWithHTML(l,"div","label-75",Math.floor(u.largestValue/4).toString()),a.createWithHTML(l,"div","label-100","0"),l.style.width=`${e.offsetWidth}px`,r.style.paddingLeft=`${l.offsetWidth+a.getStyleValueByName(l,"margin-right",!0)}px`}else l.parentNode.removeChild(l),l=null;if(0===u.largestValue){e._currentView.statisticsContents.style.minHeight=`${e._currentView.mapContents.offsetHeight}px`,i.parentNode.removeChild(i),r.parentNode.removeChild(r);const n=a.createWithHTML(e._currentView.statisticsContents,"div","no-statistics-message",t.text.noStatisticsDataMessage);o&&a.addClass(n,"view-switch")}else{const t=a.getStyleValueByName(c,"border-bottom-width",!0),i=(c.offsetHeight-t)/u.largestValue;e.views.statistics.showColorRangeLabels||r.parentNode.removeChild(r);for(const t in u.types)if(u.types.hasOwnProperty(t)){j(parseInt(t),c,u.types[t],e,d,i,u.totalValue,o);const s=ie(d,parseInt(t));e.views.statistics.showColorRangeLabels&&(e.views.statistics.useColorRangeNamesForLabels&&n.defined(s)&&n.definedString(s.name)?a.createWithHTML(r,"div","range-name",s.name):a.createWithHTML(r,"div","range-name",`${t}+`))}e.views.statistics.showInReverseOrder&&(a.reverseChildrenOrder(c),a.reverseChildrenOrder(r)),e.views.statistics.keepScrollPositions&&(e._currentView.statisticsContents.scrollLeft=e._currentView.statisticsContentsScrollLeft)}e._currentView.statisticsContents.style.display="none"}(o,d),function(e){const o=a.create(e._currentView.element,"div","guide"),i=a.create(o,"div","map-types"),r=X(e);if(g[e._currentView.element.id].totalTypes>1){if(n.definedString(e.description.text)){const t=a.create(e._currentView.element,"div","description",o);Z(e,t)}const s=Object.keys(g[e._currentView.element.id].typeData).sort(),c=s.length;for(let n=0;n<c;n++){const o=s[n];(o!==t.text.unknownTrendText||r>0)&&U(e,i,o)}if(e.allowTypeAdding){const o=a.createIconButton(i,"button","add","plus");l.add(o,e,t.text.addTypeText),o.onclick=()=>function(e){w.Background.show(e),n.defined(e._currentView.typeAddingDialog)&&"block"!==e._currentView.typeAddingDialog.style.display&&(e._currentView.typeAddingDialogTypeInput.value="",e._currentView.typeAddingDialog.style.display="block",e._currentView.typeAddingDialogTypeInput.focus());l.hide(e)}(e)}}else Z(e,i);if(e.guide.enabled){const n=a.create(o,"div","map-toggles");if(e.guide.showInvertLabel){const o=a.createWithHTML(n,"div","invert-text",t.text.invertText);e.guide.colorRangeTogglesEnabled?o.onclick=()=>function(e){const t=e.colorRanges.length;for(let n=0;n<t;n++)e.colorRanges[n].visible=!e.colorRanges[n].visible,c.customEvent(e.events.onColorRangeTypeToggle,e.colorRanges[n].id,e.colorRanges[n].visible);C(e)}(e):a.addClass(o,"no-click")}if(e.guide.showLessAndMoreLabels){let o=a.createWithHTML(n,"div","less-text",t.text.lessText);e.guide.colorRangeTogglesEnabled?o.onclick=()=>ne(e,!1):a.addClass(o,"no-click")}const i=a.create(n,"div","days"),r=re(e),s=r.length,l=[];let d=0;for(let t=0;t<s;t++){const n=G(e,i,r[t]);d=Math.max(d,n.offsetWidth),l.push(n)}if(e.guide.showNumbersInGuide){const e=l.length;for(let t=0;t<e;t++)l[t].style.width=`${d}px`}if(e.guide.showLessAndMoreLabels){const o=a.createWithHTML(n,"div","more-text",t.text.moreText);e.guide.colorRangeTogglesEnabled?o.onclick=()=>ne(e,!0):a.addClass(o,"no-click")}}}(o),function(e){e._currentView.mapContentsContainer.style.display="none",1===e._currentView.view?e._currentView.mapContentsContainer.style.display="block":e.views.chart.enabled&&2===e._currentView.view?e._currentView.chartContents.style.display="block":e.views.line.enabled&&6===e._currentView.view?e._currentView.lineContents.style.display="block":e.views.days.enabled&&3===e._currentView.view?e._currentView.daysContents.style.display="block":e.views.months.enabled&&5===e._currentView.view?e._currentView.monthsContents.style.display="block":e.views.statistics.enabled&&4===e._currentView.view?e._currentView.statisticsContents.style.display="block":(e._currentView.view=1,e._currentView.mapContentsContainer.style.display="block");e._currentView.element.style.removeProperty("height")}(o)}function D(e,t=!0){(t?window.addEventListener:window.removeEventListener)("blur",()=>l.hide(e))}function S(e){w.Background.hide(e),n.defined(e._currentView.exportDialog)&&"none"!==e._currentView.exportDialog.style.display&&(e._currentView.exportDialog.style.display="none"),l.hide(e)}function M(e,i=null,r=null,l=!0){const d=o.getString(i,e.exportType).toLowerCase(),u=p.File.mimeType(d),w=function(e,t){const o={},i=K(e);if(t){const t=e._currentView.year,r=h.days(e),a=h.months(e);for(let l=e.startMonth;l<12+e.startMonth;l++){let c=l,d=t;if(e.startMonth>0&&l>11&&(c=l-12,d++),n.monthVisible(a,c)){const e=s.getTotalDaysInMonth(d,c);for(let t=0;t<e;t++){const e=new Date(d,c,t+1),a=s.toStorageDate(e),l=s.getWeekdayNumber(e)+1;n.dayVisible(r,l)&&i.hasOwnProperty(a)&&(o[a]=i[a])}}}}else{const e=[];for(const t in i)i.hasOwnProperty(t)&&e.push(t);e.sort();const t=e.length;for(let n=0;n<t;n++){const t=e[n];i.hasOwnProperty(t)&&(o[t]=i[t])}}return o}(e,l),g=p.Contents.get(d,w,t,e);if(n.definedString(g)){const n=a.create(document.body,"a");n.style.display="none",n.setAttribute("target","_blank"),n.setAttribute("href",`data:${u};charset=utf-8,${encodeURIComponent(g)}`),n.setAttribute("download",p.File.filename(t,e,r,d)),n.click(),document.body.removeChild(n),c.customEvent(e.events.onExport,e._currentView.element)}}function B(e){const t=[];let n;for(n in x)t.push(`.${n}`);const o=a.createWithNoContainer("input");o.type="file",o.accept=t.join(", "),o.multiple=e.allowMultipleFileImports,o.onchange=()=>N(e,o.files),o.click()}function N(e,n){if(n.length<=0)e._currentView.importDialogDragAndDrop.innerHTML=t.text.dragAndDropFilesText,e._currentView.importDialogImportButton.disabled=!0;else{e._currentView.importDialogFileList=n,e._currentView.importDialogDragAndDrop.innerHTML="",e._currentView.importDialogImportButton.disabled=!1;const o=n.length;for(let i=0;i<o;i++){const o=n[i].name,r=a.createWithHTML(e._currentView.importDialogDragAndDrop,"div","filename",`<b>${i+1}</b>. ${o}`),s=a.create(r,"div","remove");l.add(s,e,t.text.removeButtonText),s.onclick=()=>L(e,i)}}}function L(e,t){const n=new DataTransfer,o=e._currentView.importDialogFileList.length;for(let i=0;i<o;i++)i!==t&&n.items.add(e._currentView.importDialogFileList[i]);N(e,n.files)}function A(e,n){const o=e.length,i=[],r=K(n),s=(e,t)=>{i.push(e);for(const e in t)t.hasOwnProperty(e)&&(r.hasOwnProperty(e)||(r[e]=0),r[e]+=t[e]);i.length===o&&(c.customEvent(n.events.onImport,n._currentView.element),C(n,!0))};for(let n=0;n<o;n++){const o=e[n],i=o.name.split(".").pop().toLowerCase();m.file(o,i,s,t)}}function O(e,t,n){const o=a.createWithHTML(t,"div","title-menu-item",n);return e.title.showTitleDropDownHeaders&&a.addClass(o,"indented"),o}function k(e,t,n,o){e._currentView.view===n?a.addClass(t,"title-menu-item-active"):t.onclick=()=>J(e,n,o)}function I(e,t,n,o){let i=null;const r=0===e.startMonth?n.toString():`${n} / ${n+1}`,s=a.createWithHTML(t,"div","year-menu-item",r);return e._currentView.year!==n?(s.onclick=()=>{e._currentView.year=n,C(e),c.customEvent(e.events.onSetYear,e._currentView.year)},n===o&&a.addClass(s,"year-menu-item-current")):(a.addClass(s,"year-menu-item-active"),i=s),i}function E(e,t,n,o,i){if(i&&e.yearlyStatistics.showPercentages){const i=o/n*100;if(!isNaN(i)){const n=`${i.toFixed(e.percentageDecimalPoints)}%`,o=a.create(t,"span","percentage");a.createWithHTML(o,"span","percentage-bracket","("),a.createWithHTML(o,"span","percentage-text",n),a.createWithHTML(o,"span","percentage-bracket",")")}}}function F(e,t,o,i,r){let a=0,l=new Date(i);for(;l<r;){const i=K(e)[s.toStorageDate(l)],r=s.getWeekdayNumber(l)+1;n.monthVisible(o,l.getMonth())&&n.dayVisible(t,r)&&n.definedNumber(i)&&(a+=i),l.setDate(l.getDate()+1)}return a}function R(e,t,o){const i=7-o.children.length;if(i>0&&i<7)for(let r=0;r<i;r++)n.dayVisible(e.views.map.daysToShow,t)&&a.create(o,"div","day-disabled"),t++;e.views.map.showDaysInReverseOrder&&a.reverseChildrenOrder(o)}function H(r,l,d,u,w,h){const g=d+1,m=a.create(l,"div","day"),p=new Date(w,u,g),y=n.holiday(r,p);let v=K(r)[s.toStorageDate(p)];v=o.getNumber(v,0),m.setAttribute(e.HEAT_JS_MAP_DATE_ATTRIBUTE_NAME,`${i.padNumber(g)}-${i.padNumber(u+1)}-${w}`),r.views.map.showToolTips&&z(r,m,p,v,r.views.map.dayToolTipText,r.events.onMapDayToolTipRender,y.matched,r.views.map.showCountsInToolTips),r.views.map.showDayDateNumbers&&a.createWithHTML(m,"div","count-date",`${g.toString()}<sup>${s.getDayOrdinal(t,g)}</sup>`),r.views.map.showDayCounts&&v>0&&a.createWithHTML(m,"div","count",i.friendlyNumber(v)),n.definedFunction(r.events.onMapDayClick)?m.onclick=()=>c.customEvent(r.events.onMapDayClick,p,v,y.matched):n.definedFunction(r.events.onMapDayDblClick)?m.ondblclick=()=>c.customEvent(r.events.onMapDayDblClick,p,v,y.matched):a.addClass(m,"no-hover");const f=oe(r,h,v,p);return n.defined(f)&&te(r,f.id)&&(n.definedString(f.mapCssClassName)?a.addClass(m,f.mapCssClassName):a.addClass(m,f.cssClassName)),r.views.map.highlightCurrentDay&&s.isTodaysDate(p)&&a.addClass(m,"today"),m}function W(r,l,d,u,w,h,g,m){const p=new Date(w,u,d),y=a.create(r,"div","day-line"),v=n.holiday(l,p);let f=K(l)[s.toStorageDate(p)];f=o.getNumber(f,0),y.setAttribute(e.HEAT_JS_CHART_DATE_ATTRIBUTE_NAME,`${i.padNumber(d)}-${i.padNumber(u+1)}-${w}`),l.views.chart.showToolTips&&z(l,y,p,f,l.views.chart.dayToolTipText,l.events.onChartDayToolTipRender,v.matched,l.views.chart.showCountsInToolTips),(l.views.chart.showLineCounts||l.views.chart.showLineDateNumbers)&&a.addClass(y,"day-line-count"),l.views.chart.showLineDateNumbers&&a.createWithHTML(y,"div","count-date",`${d.toString()}<sup>${s.getDayOrdinal(t,d)}</sup>`),l.views.chart.showLineCounts&&f>0&&a.createWithHTML(y,"div","count",i.friendlyNumber(f));const x=f*g;x<=0&&(y.style.visibility="hidden"),n.definedFunction(l.events.onChartDayClick)?y.onclick=()=>c.customEvent(l.events.onChartDayClick,p,f,v.matched):n.definedFunction(l.events.onChartDayDblClick)?y.ondblclick=()=>c.customEvent(l.events.onChartDayDblClick,p,f,v.matched):a.addClass(y,"no-hover");const b=oe(l,h,f,p);return n.defined(b)&&te(l,b.id)&&(n.definedString(b.chartCssClassName)?a.addClass(y,b.chartCssClassName):a.addClass(y,b.cssClassName)),l.views.chart.highlightCurrentDay&&s.isTodaysDate(p)&&a.addClass(y,"today"),l.views.chart.useGradients&&a.addGradientEffect(l._currentView.element,y),T.setHeight(l,y,x,m),y}function $(t,r,l,c,d,u){const w=new Date(d,c,l),h=a.create(t,"div","day-line no-hover"),g=n.holiday(r,w);let m=K(r)[s.toStorageDate(w)];m=o.getNumber(m,0),h.setAttribute(e.HEAT_JS_LINE_DATE_ATTRIBUTE_NAME,`${i.padNumber(l)}-${i.padNumber(c+1)}-${d}`),r.views.line.showToolTips&&z(r,h,w,m,r.views.line.dayToolTipText,r.events.onLineDayToolTipRender,g.matched,r.views.line.showCountsInToolTips);const p=oe(r,u,m,w);return n.defined(p)&&te(r,p.id)&&(n.definedString(p.lineCssClassName)?a.addClass(h,p.lineCssClassName):a.addClass(h,p.cssClassName)),h}function P(t,o,r,s,d,u,w){const h=a.create(t,"div","day-line"),g=r*d;let m=null;if(h.setAttribute(e.HEAT_JS_DAY_NUMBER_ATTRIBUTE_NAME,o.toString()),g<=0&&(h.style.visibility="hidden"),s.views.days.showToolTips&&l.add(h,s,i.friendlyNumber(r)),n.definedFunction(s.events.onWeekDayClick)?h.onclick=()=>c.customEvent(s.events.onWeekDayClick,o,r,s._currentView.year):n.definedFunction(s.events.onWeekDayDblClick)?h.ondblclick=()=>c.customEvent(s.events.onWeekDayDblClick,o,r,s._currentView.year):a.addClass(h,"no-hover"),s.views.days.showDayCounts&&r>0&&(a.addClass(h,"day-line-count"),m=a.createWithHTML(h,"div","count",i.friendlyNumber(r)),s.views.days.showDayCountPercentages&&a.createWithHTML(m,"div","percentage",`${(r/w*100).toFixed(s.percentageDecimalPoints)}%`)),s.views.days.useGradients)a.addGradientEffect(s._currentView.element,h),n.defined(m)&&a.addClass(m,"blend-colors");else if(s.views.days.useDifferentOpacities){const e=a.getStyleValueByName(h,"background-color"),t=a.getStyleValueByName(h,"border-color");n.defined(m)&&a.addClass(m,"blend-colors"),n.rgbColor(e)?h.style.backgroundColor=y.toRgbOpacityColor(e,u):n.hexColor(e)&&(h.style.backgroundColor=y.toRgbOpacityColor(y.hexToRgba(e),u)),n.rgbColor(t)?h.style.borderColor=y.toRgbOpacityColor(t,u):n.hexColor(t)&&(h.style.borderColor=y.toRgbOpacityColor(y.hexToRgba(t),u))}T.setHeight(s,h,g)}function Y(t,o,r,s,d,u,w){const h=a.create(t,"div","month-line"),g=r*d,m=new Date;let p=null;h.setAttribute(e.HEAT_JS_MONTH_NUMBER_ATTRIBUTE_NAME,o.toString()),g<=0&&(h.style.visibility="hidden"),s.views.months.showToolTips&&l.add(h,s,i.friendlyNumber(r));let v=s._currentView.year;if(s.startMonth>0&&o-1<s.startMonth&&v++,n.definedFunction(s.events.onMonthClick)?h.onclick=()=>c.customEvent(s.events.onMonthClick,o,r,v):n.definedFunction(s.events.onMonthDblClick)?h.ondblclick=()=>c.customEvent(s.events.onMonthDblClick,o,r,v):a.addClass(h,"no-hover"),s.views.months.showMonthCounts&&r>0&&(a.addClass(h,"month-line-count"),p=a.createWithHTML(h,"div","count",i.friendlyNumber(r)),s.views.months.showMonthCountPercentages&&a.createWithHTML(p,"div","percentage",`${(r/w*100).toFixed(s.percentageDecimalPoints)}%`)),s.views.months.highlightCurrentMonth&&m.getMonth()===o-1&&s._currentView.year===m.getFullYear()&&a.addClass(h,"today"),s.views.months.useGradients)a.addGradientEffect(s._currentView.element,h),n.defined(p)&&a.addClass(p,"blend-colors");else if(s.views.months.useDifferentOpacities){const e=a.getStyleValueByName(h,"background-color"),t=a.getStyleValueByName(h,"border-color");n.defined(p)&&a.addClass(p,"blend-colors"),n.rgbColor(e)?h.style.backgroundColor=y.toRgbOpacityColor(e,u):n.hexColor(e)&&(h.style.backgroundColor=y.toRgbOpacityColor(y.hexToRgba(e),u)),n.rgbColor(t)?h.style.borderColor=y.toRgbOpacityColor(t,u):n.hexColor(t)&&(h.style.borderColor=y.toRgbOpacityColor(y.hexToRgba(t),u))}T.setHeight(s,h,g)}function j(t,o,r,s,d,u,w,h){const g=a.create(o,"div","range-line"),m=ie(d,t),p=r*u;if(n.defined(m)&&n.definedString(m.name)&&g.setAttribute(e.HEAT_JS_STATISTICS_COLOR_RANGE_NAME_ATTRIBUTE_NAME,m.name),p<=0&&(g.style.visibility="hidden"),s.views.statistics.showToolTips){let e;e=n.defined(m)&&n.definedString(m.name)&&s.views.statistics.showRangeNamesInToolTips?`${m.name}: <b class="tooltip-count">${i.friendlyNumber(r)}</b>`:i.friendlyNumber(r),l.add(g,s,e)}if(s.views.statistics.showRangeCounts&&r>0){a.addClass(g,"range-line-count");const e=a.createWithHTML(g,"div","count",i.friendlyNumber(r));s.views.statistics.showRangeCountPercentages&&a.createWithHTML(e,"div","percentage",`${(r/w*100).toFixed(s.percentageDecimalPoints)}%`)}n.definedFunction(s.events.onStatisticClick)?g.onclick=()=>c.customEvent(s.events.onStatisticClick,m,r,s._currentView.year):n.definedFunction(s.events.onStatisticDblClick)?g.ondblclick=()=>c.customEvent(s.events.onStatisticDblClick,m,r,s._currentView.year):a.addClass(g,"no-hover"),n.defined(m)&&te(s,m.id)&&(n.definedString(m.statisticsCssClassName)?a.addClass(g,m.statisticsCssClassName):a.addClass(g,m.cssClassName)),s.views.statistics.useGradients&&a.addGradientEffect(s._currentView.element,g),T.setHeight(s,g,p,h)}function U(e,t,n){const o=a.createButton(t,"button","type",n);e._currentView.type===n&&a.addClass(o,"active"),o.onclick=()=>{e._currentView.type!==n&&(e._currentView.type=n,c.customEvent(e.events.onTypeSwitch,n),C(e))}}function G(e,t,i){const r=a.create(t,"div");return r.className="day",e.guide.showToolTips&&l.add(r,e,i.tooltipText),te(e,i.id)&&(1===e._currentView.view&&n.definedString(i.mapCssClassName)?a.addClass(r,i.mapCssClassName):e.views.chart.enabled&&2===e._currentView.view&&n.definedString(i.chartCssClassName)?a.addClass(r,i.chartCssClassName):e.views.line.enabled&&6===e._currentView.view&&n.definedString(i.lineCssClassName)?a.addClass(r,i.lineCssClassName):e.views.statistics.enabled&&4===e._currentView.view&&n.definedString(i.statisticsCssClassName)?a.addClass(r,i.statisticsCssClassName):a.addClass(r,i.cssClassName)),e.guide.showNumbersInGuide&&(a.addClass(r,"day-number"),r.innerHTML=`${i.minimum}+`),e.guide.colorRangeTogglesEnabled?r.onclick=()=>function(e,t){const n=e.colorRanges.length;for(let i=0;i<n;i++){const n=e.colorRanges[i];if(n.id===t){n.visible=!o.getBoolean(n.visible,!0),c.customEvent(e.events.onColorRangeTypeToggle,n.id,n.visible),C(e);break}}}(e,i.id):a.addClass(r,"no-hover"),r}function Z(e,t){if(n.definedString(e.description.text))if(n.definedString(e.description.url)){const n=a.createWithHTML(t,"a","label",e.description.text);n.href=e.description.url,n.target=e.description.urlTarget}else a.createWithHTML(t,"span","label",e.description.text)}function z(e,o,r,a,d,u,w,h){if(n.definedFunction(u))l.add(o,e,c.customEvent(u,r,a,w));else{let c=s.getCustomFormattedDateText(t,d,r);if(e.showHolidaysInDayToolTips){let t=n.holiday(e,r);t.matched&&n.definedString(t.name)&&(c+=`: ${t.name}`)}h&&(c+=`: <b class="tooltip-count">${i.friendlyNumber(a)}</b>`),l.add(o,e,c)}}function J(e,t,n){e._currentView.view=t,c.customEvent(e.events.onViewSwitch,n),C(e,!1,!0)}function X(e){let n=0;for(const o in g[e._currentView.element.id].typeData[t.text.unknownTrendText])if(g[e._currentView.element.id].typeData[t.text.unknownTrendText].hasOwnProperty(o)){n++;break}return n}function q(n,r,s=!0){g[n]={options:r,typeData:{},totalTypes:1},g[n].typeData[t.text.unknownTrendText]={},s&&!r._currentView.isInFetchMode&&function(n){if(n.useLocalStorageForData&&window.localStorage){const r=window.localStorage.length,s=n._currentView.element.id;for(let n=0;n<r;n++){const r=window.localStorage.key(n);if(i.startsWithAnyCase(r,e.LOCAL_STORAGE_START_ID)){const e=window.localStorage.getItem(r),n=o.getObjectFromString(e,t);if(n.parsed){g[s].typeData=n.object,g[s].totalTypes=0;for(const e in g[s].typeData)g[s].typeData.hasOwnProperty(e)&&g[s].totalTypes++}}}}}(r)}function K(e){return g[e._currentView.element.id].typeData[e._currentView.type]}function Q(e){let t=0;const o=K(e),i=e._currentView.year;for(let r=e.startMonth;r<12+e.startMonth;r++){let a=r,l=i;if(e.startMonth>0&&r>11&&(a=r-12,l++),n.monthVisible(e.views.chart.monthsToShow,a)){const i=s.getTotalDaysInMonth(l,a);for(let r=0;r<i;r++){const i=new Date(l,a,r+1),c=s.toStorageDate(i),d=s.getWeekdayNumber(i)+1;o.hasOwnProperty(c)&&n.dayVisible(e.views.chart.daysToShow,d)&&(t=Math.max(t,o[c]))}}}return t}function ee(e){const o=e._currentView.element.id,i=c.customEvent(e.events.onDataFetch,o);if(n.definedObject(i)){q(o,e,!1);for(const e in i)i.hasOwnProperty(e)&&(g[o].typeData[t.text.unknownTrendText].hasOwnProperty(e)||(g[o].typeData[t.text.unknownTrendText][e]=0),g[o].typeData[t.text.unknownTrendText][e]+=i[e])}}function te(t,n){let i=!1;if(n===e.COLOR_RANGE_HOLIDAY_ID)i=!0;else{const e=t.colorRanges.length;for(let r=0;r<e;r++){const e=t.colorRanges[r];if(e.id===n&&o.getBoolean(e.visible,!0)){i=!0;break}}}return i}function ne(e,t){const n=e.colorRanges.length;for(let o=0;o<n;o++)e.colorRanges[o].visible=t,c.customEvent(e.events.onColorRangeTypeToggle,e.colorRanges[o].id,t);C(e)}function oe(t,o,i,r=null){let s=null;if(n.defined(r)&&n.holiday(t,r).matched&&(s={cssClassName:"holiday",id:e.COLOR_RANGE_HOLIDAY_ID,visible:!0,minimum:0}),!n.defined(s)){const e=o.length;for(let t=0;t<e;t++){const e=o[t];if(!(i>=e.minimum))break;s=e}}return s}function ie(e,t){const n=e.length;let o=null;for(let i=0;i<n;i++){const n=e[i];if(t.toString()===n.minimum.toString()){o=n;break}}return o}function re(e){return e.colorRanges.sort((e,t)=>e.minimum-t.minimum)}function se(e,t=!0){let o=!0,i=e._currentView.year;for(i--;!n.yearVisible(e,i);){if(n.firstVisibleYear(e,i)){o=!1;break}i--}o&&(e._currentView.year=i,C(e),t&&c.customEvent(e.events.onBackYear,e._currentView.year))}function ae(e,t=!0){let o=!0,i=e._currentView.year;for(i++;!n.yearVisible(e,i);){if(n.lastVisibleYear(e,i)){o=!1;break}i++}o&&(e._currentView.year=i,C(e),t&&c.customEvent(e.events.onNextYear,e._currentView.year))}function le(e){e._currentView.element.innerHTML="",a.removeClass(e._currentView.element,"heat-js"),l.assignToEvents(e,!1),document.body.removeChild(e._currentView.tooltip),e._currentView.isInFetchMode&&n.defined(e._currentView.isInFetchModeTimer)&&clearInterval(e._currentView.isInFetchModeTimer),c.customEvent(e.events.onDestroy,e._currentView.element)}function ce(){if(t.observationMode){if(!n.defined(r)){r=new MutationObserver((e,t)=>{de.renderAll()});const e={attributes:!0,childList:!0,subtree:!0};r.observe(document.body,e)}}else r.disconnect(),r=null}const de={addType:function(e,t,o=!0){if(n.definedString(e)&&n.definedString(t)&&g.hasOwnProperty(e)){const n=g[e].options;!n._currentView.isInFetchMode&&n.allowTypeAdding&&(g[e].typeData.hasOwnProperty(t)||(g[e].typeData[t]={},g[e].totalTypes++),o&&C(n,!0))}return de},addDates:function(e,i,r=null,s=!0){if(n.definedString(e)&&n.definedArray(i)&&g.hasOwnProperty(e)){const n=g[e].options;if(!n._currentView.isInFetchMode){r=o.getString(r,t.text.unknownTrendText);const a=i.length;for(let t=0;t<a;t++)de.addDate(e,i[t],r,!1);s&&C(n,!0)}}return de},addDate:function(e,i,r=null,a=!0){if(n.definedString(e)&&n.definedDate(i)&&g.hasOwnProperty(e)){const n=g[e].options;if(!n._currentView.isInFetchMode){r=o.getString(r,t.text.unknownTrendText);const l=s.toStorageDate(i);g[e].typeData.hasOwnProperty(r)||(g[e].typeData[r]={},g[e].totalTypes++),g[e].typeData[r].hasOwnProperty(l)||(g[e].typeData[r][l]=0),g[e].typeData[r][l]++,c.customEvent(n.events.onAdd,n._currentView.element),a&&C(n,!0)}}return de},updateDate:function(e,i,r,a=null,l=!0){if(n.definedString(e)&&n.definedDate(i)&&g.hasOwnProperty(e)){const n=g[e].options;if(!n._currentView.isInFetchMode&&r>0){const d=s.toStorageDate(i);g[e].typeData.hasOwnProperty(a)&&(a=o.getString(a,t.text.unknownTrendText),g[e].typeData[a][d]=r,c.customEvent(n.events.onUpdate,n._currentView.element),l&&C(n,!0))}}return de},removeDates:function(e,i,r=null,s=!0){if(n.definedString(e)&&n.definedArray(i)&&g.hasOwnProperty(e)){const n=g[e].options;if(!n._currentView.isInFetchMode){r=o.getString(r,t.text.unknownTrendText);const a=i.length;for(let t=0;t<a;t++)de.removeDate(e,i[t],r,!1);s&&C(n,!0)}}return de},removeDate:function(e,i,r=null,a=!0){if(n.definedString(e)&&n.definedDate(i)&&g.hasOwnProperty(e)){const n=g[e].options;if(!n._currentView.isInFetchMode){const l=s.toStorageDate(i);g[e].typeData.hasOwnProperty(r)&&g[e].typeData[r].hasOwnProperty(l)&&(r=o.getString(r,t.text.unknownTrendText),g[e].typeData[r][l]>0&&g[e].typeData[r][l]--,c.customEvent(n.events.onRemove,n._currentView.element),a&&C(n,!0))}}return de},clearDate:function(e,i,r=null,a=!0){if(n.definedString(e)&&n.definedDate(i)&&g.hasOwnProperty(e)){const n=g[e].options;if(!n._currentView.isInFetchMode){const l=s.toStorageDate(i);g[e].typeData.hasOwnProperty(r)&&g[e].typeData[r].hasOwnProperty(l)&&(r=o.getString(r,t.text.unknownTrendText),delete g[e].typeData[r][l],c.customEvent(n.events.onClear,n._currentView.element),a&&C(n,!0))}}return de},resetAll:function(e=!0){for(const t in g)g.hasOwnProperty(t)&&de.reset(t,e);return de},reset:function(e,o=!0){if(n.definedString(e)&&g.hasOwnProperty(e)){const n=g[e].options;n._currentView.isInFetchMode||(n._currentView.type=t.text.unknownTrendText,q(e,n,!1),c.customEvent(n.events.onReset,n._currentView.element),o&&C(n,!0))}return de},import:function(e,t=null){return n.definedString(e)&&g.hasOwnProperty(e)&&(n.definedArray(t)?A(t,g[e].options):B(g[e].options)),de},export:function(e,t=null){if(n.definedString(e)&&g.hasOwnProperty(e)){const n=g[e].options;M(n,t,null,n.exportOnlyDataBeingViewed)}return de},refresh:function(e){if(n.definedString(e)&&g.hasOwnProperty(e)){const t=g[e].options;C(t,!0),c.customEvent(t.events.onRefresh,t._currentView.element)}return de},refreshAll:function(){for(const e in g)if(g.hasOwnProperty(e)){const t=g[e].options;C(t,!0),c.customEvent(t.events.onRefresh,t._currentView.element)}return de},setYear:function(e,t){if(n.definedString(e)&&n.definedNumber(t)&&g.hasOwnProperty(e)){const o=g[e].options;o._currentView.year=t,n.yearVisible(o,o._currentView.year)?C(o):ae(o,!1),c.customEvent(o.events.onSetYear,o._currentView.year)}return de},setYearToHighest:function(e){if(n.definedString(e)&&g.hasOwnProperty(e)){const t=g[e].options,o=K(t);let i=0;for(const e in o)o.hasOwnProperty(e)&&(i=Math.max(i,parseInt(s.getStorageDateYear(e))));i>0&&(t._currentView.year=i,n.yearVisible(t,t._currentView.year)?C(t):ae(t,!1),c.customEvent(t.events.onSetYear,t._currentView.year))}return de},setYearToLowest:function(e){if(n.definedString(e)&&g.hasOwnProperty(e)){const t=g[e].options,o=K(t);let i=9999;for(const e in o)o.hasOwnProperty(e)&&(i=Math.min(i,parseInt(s.getStorageDateYear(e))));i<9999&&(t._currentView.year=i,n.yearVisible(t,t._currentView.year)?C(t):se(t,!1),c.customEvent(t.events.onSetYear,t._currentView.year))}return de},moveToPreviousYear:function(e){return n.definedString(e)&&g.hasOwnProperty(e)&&se(g[e].options),de},moveToNextYear:function(e){return n.definedString(e)&&g.hasOwnProperty(e)&&ae(g[e].options),de},moveToCurrentYear:function(e){if(n.definedString(e)&&g.hasOwnProperty(e)){const t=g[e].options;t._currentView.year=(new Date).getFullYear(),n.yearVisible(t,t._currentView.year)?C(t):ae(t,!1),c.customEvent(t.events.onSetYear,t._currentView.year)}return de},getYear:function(e){let t=-1;return n.definedString(e)&&g.hasOwnProperty(e)&&(t=g[e].options._currentView.year),t},render:function(e,o){return n.definedObject(e)&&n.definedObject(o)&&_(d.Options.getForNewInstance(t,o,e)),de},renderAll:function(){return v(),de},switchView:function(e,t){if(n.definedString(e)&&n.definedString(t)&&g.hasOwnProperty(e)){const o=g[e].options;let i;i="map"===t.toLowerCase()?1:"chart"===t.toLowerCase()?2:"line"===t.toLowerCase()?6:"days"===t.toLowerCase()?3:"months"===t.toLowerCase()?5:"statistics"===t.toLowerCase()?4:1,n.definedNumber(i)&&J(o,i,t)}return de},switchType:function(e,t){if(n.definedString(e)&&n.definedString(t)&&g.hasOwnProperty(e)&&g[e].typeData.hasOwnProperty(t)){const n=g[e].options;n._currentView.type!==t&&(n._currentView.type=t,c.customEvent(n.events.onTypeSwitch,t),C(n))}return de},updateOptions:function(e,t){if(n.definedString(e)&&n.definedObject(t)&&g.hasOwnProperty(e)){const t=g[e].options,n=d.Options.get(t);let o=!1;for(const e in n)n.hasOwnProperty(e)&&t.hasOwnProperty(e)&&t[e]!==n[e]&&(t[e]=n[e],o=!0);o&&(C(t,!0),c.customEvent(t.events.onRefresh,t._currentView.element),c.customEvent(t.events.onOptionsUpdate,t._currentView.element,t))}return de},getActiveView:function(e){let t="";if(n.definedString(e)&&g.hasOwnProperty(e)){const n=g[e].options;t=1===n._currentView.view?"map":2===n._currentView.view?"chart":6===n._currentView.view?"line":3===n._currentView.view?"days":5===n._currentView.view?"months":4===n._currentView.view?"statistics":"map"}return t},destroyAll:function(){for(const e in g)g.hasOwnProperty(e)&&le(g[e].options);return g={},de},destroy:function(e){return n.definedString(e)&&g.hasOwnProperty(e)&&(le(g[e].options),delete g[e]),de},setConfiguration:function(e,o=!0){if(n.definedObject(e)){const n=t,i=e;let r=!1;for(const e in i)i.hasOwnProperty(e)&&t.hasOwnProperty(e)&&n[e]!==i[e]&&(n[e]=i[e],r=!0);r&&(t=u.Options.get(n),ce(),o&&de.refreshAll())}return de},getIds:function(){const e=[];for(const t in g)g.hasOwnProperty(t)&&e.push(t);return e},getVersion:function(){return"5.0.0"}};t=u.Options.get(),document.addEventListener("DOMContentLoaded",()=>{ce(),v()}),window.addEventListener("pagehide",()=>function(){for(const e in g)if(g.hasOwnProperty(e)){const t=g[e].options;D(t,!1),n.defined(t._currentView.isInFetchModeTimer)&&(clearInterval(t._currentView.isInFetchModeTimer),t._currentView.isInFetchModeTimer=0)}t.observationMode&&n.defined(r)&&(r.disconnect(),r=null)}()),n.defined(window.$heat)||(window.$heat=de)})();