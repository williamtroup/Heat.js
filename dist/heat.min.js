"use strict";var e,t,n,i,o,r,s,a,l,c,d,u,w,h,g,m,y,p,v,f,T,b,V,x=(e=>(e.csv="csv",e.json="json",e.txt="txt",e.md="md",e.tsv="tsv",e.yaml="yaml",e.toml="toml",e))(x||{}),_=(e=>(e.csv="csv",e.json="json",e.xml="xml",e.txt="txt",e.html="html",e.md="md",e.tsv="tsv",e.yaml="yaml",e.toml="toml",e))(_||{});(t=e||(e={})).HEAT_JS_ATTRIBUTE_NAME="data-heat-js",t.HEAT_JS_MAP_DATE_ATTRIBUTE_NAME="data-heat-js-map-date",t.HEAT_JS_MAP_MONTH_NUMBER_ATTRIBUTE_NAME="data-heat-js-map-month-number",t.HEAT_JS_CHART_DATE_ATTRIBUTE_NAME="data-heat-js-chart-date",t.HEAT_JS_LINE_DATE_ATTRIBUTE_NAME="data-heat-js-line-date",t.HEAT_JS_DAY_NUMBER_ATTRIBUTE_NAME="data-heat-js-day-number",t.HEAT_JS_MONTH_NUMBER_ATTRIBUTE_NAME="data-heat-js-month-number",t.HEAT_JS_STATISTICS_COLOR_RANGE_NAME_ATTRIBUTE_NAME="data-heat-js-statistics-color-range-name",t.LOCAL_STORAGE_START_ID="HJS_",t.COLOR_RANGE_HOLIDAY_ID="HOLIDAY",t.DEFAULT_MINIMUM_HEIGHT=213,t.MAXIMUM_FILE_IMPORTS=5,(e=>{function t(e){return null!=e&&""!==e.toString()}function n(e){return t(e)&&"object"==typeof e}function i(e){return n(e)&&e instanceof Array}e.defined=t,e.definedObject=n,e.definedBoolean=function(e){return t(e)&&"boolean"==typeof e},e.definedString=function(e){return t(e)&&"string"==typeof e},e.definedFunction=function(e){return t(e)&&"function"==typeof e},e.definedNumber=function(e){return t(e)&&"number"==typeof e},e.definedArray=i,e.definedDate=function(e){return n(e)&&e instanceof Date},e.invalidOptionArray=function(e,t=1){return!i(e)||e.length<t},e.definedParentElement=function(e){return t(e)&&document.contains(e)},e.holiday=function(t,n){const i={matched:!1,name:null},o=t.holidays.length,r=n.getDate(),s=n.getMonth()+1,a=n.getFullYear();for(let n=0;n<o;n++){let o=t.holidays[n];if(e.definedString(o.date)&&o.showInViews){const e=o.date.split("/");if(2===e.length?i.matched=r===parseInt(e[0])&&s===parseInt(e[1]):3===e.length&&(i.matched=r===parseInt(e[0])&&s===parseInt(e[1])&&a===parseInt(e[2])),i.matched){i.name=o.name;break}}}return i},e.monthVisible=function(e,t){return e.indexOf(t+1)>-1},e.dayVisible=function(e,t){return e.indexOf(t)>-1},e.yearVisible=function(e,t){return-1===e.yearsToHide.indexOf(t)&&(0===e._currentView.yearsAvailable.length||e._currentView.yearsAvailable.indexOf(t)>-1)},e.firstVisibleYear=function(e,t){return e._currentView.yearsAvailable.length>0&&t<=e._currentView.yearsAvailable[0]},e.lastVisibleYear=function(e,t){return e._currentView.yearsAvailable.length>0&&t>=e._currentView.yearsAvailable[e._currentView.yearsAvailable.length-1]},e.rgbColor=function(e){return e.startsWith("rgba")||e.startsWith("rgb")},e.hexColor=function(e){return e.startsWith("#")&&(7===e.length||9===e.length)}})(n||(n={})),(e=>{function t(e,t){return n.definedArray(e)?e:t}e.getAnyString=function(e,t){return"string"==typeof e?e:t},e.getString=function(e,t){return n.definedString(e)?e:t},e.getBoolean=function(e,t){return n.definedBoolean(e)?e:t},e.getNumber=function(e,t){return n.definedNumber(e)?e:t},e.getNumberInRange=function(e,t,i,o){return n.definedNumber(e)&&e>=t&&e<=i?e:o},e.getFunction=function(e,t){return n.definedFunction(e)?e:t},e.getArray=t,e.getObject=function(e,t){return n.definedObject(e)?e:t},e.getStringOrArray=function(e,i){let o=i;if(n.definedString(e)){const t=e.toString().split(" ");0===t.length?e=i:o=t}else o=t(e,i);return o},e.getObjectFromString=function(e,t){const i={parsed:!0,object:null};try{if(n.definedString(e))try{i.object=JSON.parse(e)}catch(t){i.object=JSON.parse(e.replace(/'/g,'"'))}}catch(o){try{i.object=function(e){let t=null;const i=e.split("(");let o=[];i.length>1&&(o=i[1].replace(")","").replace(";","").trim().split(","),1===o.length&&""===o[0]&&(o=[]));const r=i[0].split("."),s=r.pop();let a=globalThis,l=!0;for(const e of r)if(a=a[e],!n.defined(a)){l=!1;break}l&&n.definedFunction(a[s])&&(t=a[s].apply(a,o));return t}(e)}catch(e){t.safeMode||(console.error(t.text.objectErrorText.replace("{{error_1}}",o.message).replace("{{error_2}}",e.message)),i.parsed=!1),i.object=null}}return i}})(i||(i={})),(r=o||(o={})).padNumber=function(e){const t=e.toString();return 1===t.length?"0"+t:t},r.startsWithAnyCase=function(e,t){return e.substring(0,t.length).toLowerCase()===t.toLowerCase()},r.friendlyNumber=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},(e=>{function t(e){return e.getDay()-1<0?6:e.getDay()-1}function n(e,t){let n=e.text.thText;return 31===t||21===t||1===t?n=e.text.stText:22===t||2===t?n=e.text.ndText:23!==t&&3!==t||(n=e.text.rdText),n}e.getTotalDaysInMonth=function(e,t){return new Date(e,t+1,0).getDate()},e.getWeekdayNumber=t,e.getDayOrdinal=n,e.getCustomFormattedDateText=function(e,i,r){let s=i;const a=t(r);return s=s.replace("{dddd}",e.text.dayNames[a]),s=s.replace("{dd}",o.padNumber(r.getDate())),s=s.replace("{d}",r.getDate().toString()),s=s.replace("{o}",n(e,r.getDate())),s=s.replace("{mmmm}",e.text.monthNames[r.getMonth()]),s=s.replace("{mm}",o.padNumber(r.getMonth()+1)),s=s.replace("{m}",(r.getMonth()+1).toString()),s=s.replace("{yyyy}",r.getFullYear().toString()),s=s.replace("{yyy}",r.getFullYear().toString().substring(1)),s=s.replace("{yy}",r.getFullYear().toString().substring(2)),s=s.replace("{y}",parseInt(r.getFullYear().toString().substring(2)).toString()),s},e.toStorageDate=function(e){return`${e.getFullYear()}-${o.padNumber(e.getMonth()+1)}-${o.padNumber(e.getDate())}`},e.getStorageDateYear=function(e){return e.split("-")[0]},e.getDateForMondayOfCurrentWeek=function(){const e=new Date,t=e.getDay(),n=(0===t?-6:1)-t,i=new Date(e);return i.setDate(e.getDate()+n),i},e.isToday=function(e){const t=new Date;return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()},e.isCurrentMonthAndYear=function(e){const t=new Date;return e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}})(s||(s={})),(e=>{function t(e,t,i="",o=null){const r=t.toLowerCase();let s="text"===r?document.createTextNode(""):document.createElement(r);return n.defined(i)&&(s.className=i),n.defined(o)?e.insertBefore(s,o):e.appendChild(s),s}function i(e,n,i,o,r=null){const s=t(e,n,i,r);if(s.innerHTML=o,"button"===n){s.type="button"}return s}function o(){const e=document.documentElement;return{left:e.scrollLeft-(e.clientLeft||0),top:e.scrollTop-(e.clientTop||0)}}e.createWithNoContainer=function(e){const t=e.toLowerCase();return"text"===t?document.createTextNode(""):document.createElement(t)},e.create=t,e.createWithHTML=i,e.createButton=function(e,i,o,r=null,s=null){const a=t(e,i,o,s);return a.type="button",n.defined(r)&&(a.innerHTML=r),a},e.createIconButton=function(n,i,o,r,s=null){const a=t(n,i,o,s);return a.type="button",e.create(a,"i",r),a},e.getStyleValueByName=function(e,t,n=!1){let i=getComputedStyle(e).getPropertyValue(t);return n&&(i=parseFloat(i),i=isNaN(i)?0:i),i},e.getStyleValueByNameSizingMetic=function(e,t){const n=getComputedStyle(e).getPropertyValue(t),i=parseFloat(n);return n.replace(i.toString(),"")},e.addClass=function(e,t){e.classList.add(t)},e.removeClass=function(e,t){e.classList.remove(t)},e.cancelBubble=function(e){e.preventDefault(),e.stopPropagation()},e.getScrollPosition=o,e.showElementAtMousePosition=function(e,t){let n=e.pageX,i=e.pageY;const r=o();t.style.display="block",n+t.offsetWidth>window.innerWidth?n-=t.offsetWidth:n++,i+t.offsetHeight>window.innerHeight?i-=t.offsetHeight:i++,n<r.left&&(n=e.pageX+1),i<r.top&&(i=e.pageY+1),t.style.left=`${n}px`,t.style.top=`${i}px`},e.reverseChildrenOrder=function(e){const t=Array.from(e.children);t.reverse(),t.forEach(t=>e.appendChild(t))},e.createCheckBox=function(e,n,o){const r=t(e,"div"),s=t(r,"label","checkbox"),a=t(s,"input");return a.type="checkbox",a.name=o,t(s,"span","check-mark"),i(s,"span","text",n),a},e.addGradientEffect=function(t,n){const i=e.getStyleValueByName(t,"background-color"),o=e.getStyleValueByName(n,"background-color");n.style.background=`linear-gradient(to top, ${i}, ${o})`}})(a||(a={})),(e=>{let t=0;function i(e,n,i){a.cancelBubble(e),o(n),t=setTimeout(()=>{n._currentView.tooltip.innerHTML=i,n._currentView.tooltip.style.display="block",a.showElementAtMousePosition(e,n._currentView.tooltip)},n.tooltip.delay)}function o(e){n.defined(e._currentView.tooltip)&&(0!==t&&(clearTimeout(t),t=0),"none"!==e._currentView.tooltip.style.display&&(e._currentView.tooltip.style.display="none"))}e.render=function(e){if(!n.defined(e._currentView.tooltip)){const t=document.getElementsByClassName("heat-js-tooltip"),n=[].slice.call(t);n.length>0?e._currentView.tooltip=n[0]:(e._currentView.tooltip=a.create(document.body,"div","heat-js-tooltip"),function(e,t=!0){let n=t?window.addEventListener:window.removeEventListener,i=t?document.addEventListener:document.removeEventListener;n("mousemove",()=>o(e)),i("scroll",()=>o(e))}(e)),e._currentView.tooltip.style.display="none"}},e.add=function(e,t,n){null!==e&&(e.onmousemove=e=>i(e,t,n))},e.show=i,e.hide=o,e.remove=function(e){if(n.defined(e._currentView.tooltip)){const t=document.getElementsByClassName("heat-js");0===[].slice.call(t).length&&document.body.removeChild(e._currentView.tooltip)}}})(l||(l={})),(c||(c={})).customEvent=function(e,...t){let i=null;return n.definedFunction(e)&&(i=e.apply(null,[].slice.call(t,0))),i},(e=>{function t(e){const t=e.trim().replace("#","");let n=1;const i=parseInt(t.substring(0,2),16),o=parseInt(t.substring(2,4),16),r=parseInt(t.substring(4,6),16);return 8===e.length&&(n=parseInt(t.substring(6,8),16)),[i,o,r,n]}e.toRgbOpacityColor=function(e,t){const n=e.indexOf(") ")>-1?`${e.split(") ")[0]})`:e;let i=n.replace("rgba(","").replace("rgb(","").replace(")","").split(",");return n.startsWith("rgba")?i[i.length-1]=t.toString():i.push(t.toString()),`rgba(${i.join()})`},e.hexToRgba=function(e){const n=t(e);return`rgba(${n[0]}, ${n[1]}, ${n[2]}, ${n[3]})`},e.hexToRgbaValues=t,e.valuesToOpacitiesOrder=function(e){const t=Object.values(e.values).sort((e,t)=>e.total-t.total),n=t.length,i=1/n;for(let o=0;o<n;o++)e.valueOpacities[t[o].total]=parseFloat((i*(o+1)).toFixed(2))}})(d||(d={})),(e=>{let t;var n;(n=t=e.Variables||(e.Variables={})).DaySize="--heat-js-day-size",n.Spacing="--heat-js-spacing",n.LineWidth="--heat-js-day-line-width",n.CheckBoxCheckedColor="--heat-js-checkbox-background-color-checked",n.YearMenuCurrent="--heat-js-years-current-color"})(u||(u={})),(h=w||(w={})).isVisible=function(t,n){let o=!1;if(n===e.COLOR_RANGE_HOLIDAY_ID)o=!0;else{const e=t.colorRanges.length;for(let r=0;r<e;r++){const e=t.colorRanges[r];if(e.id===n&&i.getBoolean(e.visible,!0)){o=!0;break}}}return o},h.get=function(t,i,o,r=null){let s=null;if(n.defined(r)&&n.holiday(t,r).matched&&(s={cssClassName:"holiday",id:e.COLOR_RANGE_HOLIDAY_ID,visible:!0,minimum:0}),!n.defined(s)){const e=i.length;for(let t=0;t<e;t++){const e=i[t];if(!(o>=e.minimum))break;s=e}}return s},h.getByMinimum=function(e,t){const n=e.length;let i=null;for(let o=0;o<n;o++){const n=e[o];if(t.toString()===n.minimum.toString()){i=n;break}}return i},h.getAllSorted=function(e){return e.colorRanges.sort((e,t)=>e.minimum-t.minimum)},h.buildDynamics=function(e){let t=[];const n=d.hexToRgbaValues(e.color),i=100/e.totalColors,o=1/e.totalColors,r=Math.floor(e.maximumMinimum/e.totalColors),s=[];let l=n[0],c=n[1],w=n[2],h=o,g=n[0],m=n[1],y=n[2],p=0;for(let a=0;a<e.totalColors;a++){const d=h+o>1?1:h+o,v=`rgba(${l}, ${c}, ${w}, ${h.toFixed(2)})`,f=`rgba(${l}, ${c}, ${w}, ${d.toFixed(2)})`,T=`rgb(${g}, ${m}, ${y})`,b=`day-color-${crypto.randomUUID().replace(/-/g,"")}`;s.push(`div.${b} {`),s.push(`\tbackground-color: ${v} !important;`),s.push(`\tborder-color: ${f} !important;`),s.push(`\tcolor: ${T} !important;`),s.push("}"),s.push(`div.${b}:hover {`),s.push("\topacity: 0.7 !important;"),s.push("}");const V={id:b,name:`Day Color ${a+1}`,minimum:p,cssClassName:b,tooltipText:`Day Color ${a+1}`,visible:!0},x=Math.round(n[0]/100*((a+1)*i)),_=Math.round(n[1]/100*((a+1)*i)),C=Math.round(n[2]/100*((a+1)*i));a===e.totalColors-1?(s.push(":root {"),s.push(`\t${u.Variables.CheckBoxCheckedColor}: ${v};`),s.push(`\t${u.Variables.YearMenuCurrent}: ${v};`),s.push("}")):(l=n[0]+x,c=n[1]+_,w=n[2]+C,h+=o,g=n[0]-x,m=n[1]-_,y=n[2]-C,p+=r),t.push(V)}const v=document.getElementsByTagName("head")[0];return a.create(v,"style").appendChild(document.createTextNode(s.join("\n"))),t},h.getGuideCssClassName=function(e,t){let i=t.cssClassName;return e.views.map.enabled&&1===e._currentView.view&&n.definedString(t.mapCssClassName)?i=t.mapCssClassName:e.views.line.enabled&&2===e._currentView.view&&n.definedString(t.lineCssClassName)?i=t.lineCssClassName:e.views.chart.enabled&&3===e._currentView.view&&n.definedString(t.chartCssClassName)?i=t.chartCssClassName:e.views.days.enabled&&4===e._currentView.view&&n.definedString(t.daysCssClassName)?i=t.daysCssClassName:e.views.months.enabled&&5===e._currentView.view&&n.definedString(t.monthsCssClassName)?i=t.monthsCssClassName:e.views.statistics.enabled&&6===e._currentView.view&&n.definedString(t.statisticsCssClassName)&&(i=t.statisticsCssClassName),i},(e=>{let t;(e=>{const t=[1,2,3,4,5,6,7,8,9,10,11,12],o=[1,2,3,4,5,6,7];function r(e){const r=i.getObject(e,{});return r.views=i.getObject(r.views,{}),r.exportOnlyDataBeingViewed=i.getBoolean(r.exportOnlyDataBeingViewed,!0),r.defaultYear=i.getNumber(r.defaultYear,(new Date).getFullYear()),r.defaultView=i.getString(r.defaultView,"map"),r.exportType=i.getString(r.exportType,"json"),r.useLocalStorageForData=i.getBoolean(r.useLocalStorageForData,!1),r.allowFileImports=i.getBoolean(r.allowFileImports,!0),r.yearsToHide=i.getArray(r.yearsToHide,[]),r.dataFetchDelay=i.getNumber(r.dataFetchDelay,6e4),r.showOnlyDataForYearsAvailable=i.getBoolean(r.showOnlyDataForYearsAvailable,!1),r.showHolidaysInDayToolTips=i.getBoolean(r.showHolidaysInDayToolTips,!1),r.resizable=i.getBoolean(r.resizable,!1),r.startMonth=i.getNumberInRange(r.startMonth,0,11,0),r.allowMultipleFileImports=i.getBoolean(r.allowMultipleFileImports,!0),r.percentageDecimalPoints=i.getNumber(r.percentageDecimalPoints,2),r.chartsAnimationDelay=i.getNumber(r.chartsAnimationDelay,50),r.exportDateTimeFormat=i.getString(r.exportDateTimeFormat,"{dddd}, {d}{o} {mmmm} {yyyy}"),r.title=function(e){return e.title=i.getObject(e.title,{}),e.title.text=i.getString(e.title.text,"Heat.js"),e.title.showText=i.getBoolean(e.title.showText,!0),e.title.showYearSelector=i.getBoolean(e.title.showYearSelector,!0),e.title.showRefreshButton=i.getBoolean(e.title.showRefreshButton,!1),e.title.showExportButton=i.getBoolean(e.title.showExportButton,!1),e.title.extraSelectionYears=i.getNumber(e.title.extraSelectionYears,50),e.title.showYearSelectionDropDown=i.getBoolean(e.title.showYearSelectionDropDown,!0),e.title.showImportButton=i.getBoolean(e.title.showImportButton,!1),e.title.showConfigurationButton=i.getBoolean(e.title.showConfigurationButton,!0),e.title.showTitleDropDownButton=i.getBoolean(e.title.showTitleDropDownButton,!0),e.title.showTitleDropDownHeaders=i.getBoolean(e.title.showTitleDropDownHeaders,!0),e.title.showCurrentYearButton=i.getBoolean(e.title.showCurrentYearButton,!0),e.title.showSectionText=i.getBoolean(e.title.showSectionText,!0),e.title.showToolTips=i.getBoolean(e.title.showToolTips,!0),e.title.showTitleDropDownMenu=i.getBoolean(e.title.showTitleDropDownMenu,!0),e.title.showClearButton=i.getBoolean(e.title.showClearButton,!1),e.title}(r),r.yearlyStatistics=function(e){return e.yearlyStatistics=i.getObject(e.yearlyStatistics,{}),e.yearlyStatistics.enabled=i.getBoolean(e.yearlyStatistics.enabled,!1),e.yearlyStatistics.showToday=i.getBoolean(e.yearlyStatistics.showToday,!0),e.yearlyStatistics.showThisWeek=i.getBoolean(e.yearlyStatistics.showThisWeek,!0),e.yearlyStatistics.showThisMonth=i.getBoolean(e.yearlyStatistics.showThisMonth,!0),e.yearlyStatistics.showThisYear=i.getBoolean(e.yearlyStatistics.showThisYear,!0),e.yearlyStatistics.showOnlyForCurrentYear=i.getBoolean(e.yearlyStatistics.showOnlyForCurrentYear,!1),e.yearlyStatistics.showPercentages=i.getBoolean(e.yearlyStatistics.showPercentages,!0),e.yearlyStatistics}(r),r.views.map=function(e){e.views.map=i.getObject(e.views.map,{}),e.views.map.enabled=i.getBoolean(e.views.map.enabled,!0),e.views.map.showMonthDayGaps=i.getBoolean(e.views.map.showMonthDayGaps,!0),e.views.map.showDayNames=i.getBoolean(e.views.map.showDayNames,!0),e.views.map.placeMonthNamesOnTheBottom=i.getBoolean(e.views.map.placeMonthNamesOnTheBottom,!1),e.views.map.showDayCounts=i.getBoolean(e.views.map.showDayCounts,!1),e.views.map.showMonthNames=i.getBoolean(e.views.map.showMonthNames,!0),e.views.map.showDaysInReverseOrder=i.getBoolean(e.views.map.showDaysInReverseOrder,!1),e.views.map.showMinimalDayNames=i.getBoolean(e.views.map.showMinimalDayNames,!1),e.views.map.showMonthsInReverseOrder=i.getBoolean(e.views.map.showMonthsInReverseOrder,!1),e.views.map.keepScrollPositions=i.getBoolean(e.views.map.keepScrollPositions,!1),e.views.map.showDayDateNumbers=i.getBoolean(e.views.map.showDayDateNumbers,!1),e.views.map.showToolTips=i.getBoolean(e.views.map.showToolTips,!0),e.views.map.highlightCurrentDay=i.getBoolean(e.views.map.highlightCurrentDay,!1),e.views.map.dayToolTipText=i.getString(e.views.map.dayToolTipText,"{dddd}, {d}{o} {mmmm} {yyyy}"),e.views.map.showYearsInMonthNames=i.getBoolean(e.views.map.showYearsInMonthNames,!0),e.views.map.showCountsInToolTips=i.getBoolean(e.views.map.showCountsInToolTips,!0),e.views.map.showSpacing=i.getBoolean(e.views.map.showSpacing,!0),n.invalidOptionArray(e.views.map.monthsToShow)&&(e.views.map.monthsToShow=t);n.invalidOptionArray(e.views.map.daysToShow)&&(e.views.map.daysToShow=o);return e.views.map}(r),r.views.line=function(e){e.views.line=i.getObject(e.views.line,{}),e.views.line.enabled=i.getBoolean(e.views.line.enabled,!0),e.views.line.showMonthNames=i.getBoolean(e.views.line.showMonthNames,!0),e.views.line.showInReverseOrder=i.getBoolean(e.views.line.showInReverseOrder,!1),e.views.line.keepScrollPositions=i.getBoolean(e.views.line.keepScrollPositions,!1),e.views.line.showYearsInMonthNames=i.getBoolean(e.views.line.showYearsInMonthNames,!0),e.views.line.showToolTips=i.getBoolean(e.views.line.showToolTips,!0),e.views.line.dayToolTipText=i.getString(e.views.line.dayToolTipText,"{dddd}, {d}{o} {mmmm} {yyyy}"),e.views.line.showCountsInToolTips=i.getBoolean(e.views.line.showCountsInToolTips,!0),n.invalidOptionArray(e.views.line.monthsToShow)&&(e.views.line.monthsToShow=t);n.invalidOptionArray(e.views.line.daysToShow)&&(e.views.line.daysToShow=o);return e.views.line}(r),r.views.chart=function(e){e.views.chart=i.getObject(e.views.chart,{}),e.views.chart.enabled=i.getBoolean(e.views.chart.enabled,!0),e.views.chart.showChartYLabels=i.getBoolean(e.views.chart.showChartYLabels,!0),e.views.chart.showMonthNames=i.getBoolean(e.views.chart.showMonthNames,!0),e.views.chart.showLineCounts=i.getBoolean(e.views.chart.showLineCounts,!1),e.views.chart.showInReverseOrder=i.getBoolean(e.views.chart.showInReverseOrder,!1),e.views.chart.keepScrollPositions=i.getBoolean(e.views.chart.keepScrollPositions,!1),e.views.chart.showLineDateNumbers=i.getBoolean(e.views.chart.showLineDateNumbers,!1),e.views.chart.showToolTips=i.getBoolean(e.views.chart.showToolTips,!0),e.views.chart.useGradients=i.getBoolean(e.views.chart.useGradients,!1),e.views.chart.highlightCurrentDay=i.getBoolean(e.views.chart.highlightCurrentDay,!1),e.views.chart.dayToolTipText=i.getString(e.views.chart.dayToolTipText,"{dddd}, {d}{o} {mmmm} {yyyy}"),e.views.chart.showYearsInMonthNames=i.getBoolean(e.views.chart.showYearsInMonthNames,!0),e.views.chart.showCountsInToolTips=i.getBoolean(e.views.chart.showCountsInToolTips,!0),e.views.chart.addMonthSpacing=i.getBoolean(e.views.chart.addMonthSpacing,!1),n.invalidOptionArray(e.views.chart.monthsToShow)&&(e.views.chart.monthsToShow=t);n.invalidOptionArray(e.views.chart.daysToShow)&&(e.views.chart.daysToShow=o);return e.views.chart}(r),r.views.days=function(e){e.views.days=i.getObject(e.views.days,{}),e.views.days.enabled=i.getBoolean(e.views.days.enabled,!0),e.views.days.showChartYLabels=i.getBoolean(e.views.days.showChartYLabels,!0),e.views.days.showDayNames=i.getBoolean(e.views.days.showDayNames,!0),e.views.days.showInReverseOrder=i.getBoolean(e.views.days.showInReverseOrder,!1),e.views.days.showDayCounts=i.getBoolean(e.views.days.showDayCounts,!1),e.views.days.keepScrollPositions=i.getBoolean(e.views.days.keepScrollPositions,!1),e.views.days.showToolTips=i.getBoolean(e.views.days.showToolTips,!0),e.views.days.useGradients=i.getBoolean(e.views.days.useGradients,!1),e.views.days.useDifferentOpacities=i.getBoolean(e.views.days.useDifferentOpacities,!1),e.views.days.showDayCountPercentages=i.getBoolean(e.views.days.showDayCountPercentages,!0),e.views.days.showStackedColorRanges=i.getBoolean(e.views.days.showStackedColorRanges,!0),n.invalidOptionArray(e.views.days.monthsToShow)&&(e.views.days.monthsToShow=t);n.invalidOptionArray(e.views.days.daysToShow)&&(e.views.days.daysToShow=o);return e.views.days}(r),r.views.months=function(e){e.views.months=i.getObject(e.views.months,{}),e.views.months.enabled=i.getBoolean(e.views.months.enabled,!0),e.views.months.showChartYLabels=i.getBoolean(e.views.months.showChartYLabels,!0),e.views.months.showMonthNames=i.getBoolean(e.views.months.showMonthNames,!0),e.views.months.showInReverseOrder=i.getBoolean(e.views.months.showInReverseOrder,!1),e.views.months.showMonthCounts=i.getBoolean(e.views.months.showMonthCounts,!1),e.views.months.keepScrollPositions=i.getBoolean(e.views.months.keepScrollPositions,!1),e.views.months.showToolTips=i.getBoolean(e.views.months.showToolTips,!0),e.views.months.useGradients=i.getBoolean(e.views.months.useGradients,!1),e.views.months.useDifferentOpacities=i.getBoolean(e.views.months.useDifferentOpacities,!1),e.views.months.highlightCurrentMonth=i.getBoolean(e.views.months.highlightCurrentMonth,!1),e.views.months.showMonthCountPercentages=i.getBoolean(e.views.months.showMonthCountPercentages,!0),e.views.months.showStackedColorRanges=i.getBoolean(e.views.months.showStackedColorRanges,!0),n.invalidOptionArray(e.views.months.monthsToShow)&&(e.views.months.monthsToShow=t);n.invalidOptionArray(e.views.months.daysToShow)&&(e.views.months.daysToShow=o);return e.views.months}(r),r.views.statistics=function(e){e.views.statistics=i.getObject(e.views.statistics,{}),e.views.statistics.enabled=i.getBoolean(e.views.statistics.enabled,!0),e.views.statistics.showChartYLabels=i.getBoolean(e.views.statistics.showChartYLabels,!0),e.views.statistics.showColorRangeLabels=i.getBoolean(e.views.statistics.showColorRangeLabels,!0),e.views.statistics.useColorRangeNamesForLabels=i.getBoolean(e.views.statistics.useColorRangeNamesForLabels,!1),e.views.statistics.showRangeCounts=i.getBoolean(e.views.statistics.showRangeCounts,!1),e.views.statistics.showInReverseOrder=i.getBoolean(e.views.statistics.showInReverseOrder,!1),e.views.statistics.keepScrollPositions=i.getBoolean(e.views.statistics.keepScrollPositions,!1),e.views.statistics.showToolTips=i.getBoolean(e.views.statistics.showToolTips,!0),e.views.statistics.useGradients=i.getBoolean(e.views.statistics.useGradients,!1),e.views.statistics.showRangeCountPercentages=i.getBoolean(e.views.statistics.showRangeCountPercentages,!0),e.views.statistics.showRangeNamesInToolTips=i.getBoolean(e.views.statistics.showRangeNamesInToolTips,!0),n.invalidOptionArray(e.views.statistics.monthsToShow)&&(e.views.statistics.monthsToShow=t);n.invalidOptionArray(e.views.statistics.daysToShow)&&(e.views.statistics.daysToShow=o);return e.views.statistics}(r),r.description=function(e){return e.description=i.getObject(e.description,{}),e.description.text=i.getString(e.description.text,""),e.description.url=i.getString(e.description.url,""),e.description.urlTarget=i.getString(e.description.urlTarget,"_blank"),e.description}(r),r.guide=function(e){return e.guide=i.getObject(e.guide,{}),e.guide.enabled=i.getBoolean(e.guide.enabled,!0),e.guide.colorRangeTogglesEnabled=i.getBoolean(e.guide.colorRangeTogglesEnabled,!0),e.guide.showLessAndMoreLabels=i.getBoolean(e.guide.showLessAndMoreLabels,!0),e.guide.showNumbersInGuide=i.getBoolean(e.guide.showNumbersInGuide,!1),e.guide.showToolTips=i.getBoolean(e.guide.showToolTips,!0),e.guide.showInvertLabel=i.getBoolean(e.guide.showInvertLabel,!1),e.guide.useIncrementToggles=i.getBoolean(e.guide.useIncrementToggles,!1),e.guide.allowTypeAdding=i.getBoolean(e.guide.allowTypeAdding,!1),e.guide.allowTypeRemoving=i.getBoolean(e.guide.allowTypeRemoving,!1),e.guide}(r),r.tooltip=function(e){return e.tooltip=i.getObject(e.tooltip,{}),e.tooltip.delay=i.getNumber(e.tooltip.delay,750),e.tooltip}(r),r.zooming=function(e){return e.zooming=i.getObject(e.zooming,{}),e.zooming.enabled=i.getBoolean(e.zooming.enabled,!1),e.zooming.defaultLevel=i.getNumber(e.zooming.defaultLevel,0),e.zooming.maximumLevel=i.getNumber(e.zooming.maximumLevel,0),e.zooming}(r),r.dynamicColorRange=function(e){return e.dynamicColorRange=i.getObject(e.dynamicColorRange,{}),e.dynamicColorRange.enabled=i.getBoolean(e.dynamicColorRange.enabled,!1),e.dynamicColorRange.maximumMinimum=i.getNumber(e.dynamicColorRange.maximumMinimum,25),e.dynamicColorRange.color=i.getString(e.dynamicColorRange.color,""),e.dynamicColorRange.totalColors=i.getNumber(e.dynamicColorRange.totalColors,7),e.dynamicColorRange}(r),r.colorRanges=function(e){let t=[];if(e.dynamicColorRange.enabled&&n.hexColor(e.dynamicColorRange.color))t=w.buildDynamics(e.dynamicColorRange);else if(n.definedArray(e.colorRanges)){const n=e.colorRanges.length;for(let o=0;o<n;o++){const n=e.colorRanges[o];n.id=i.getString(n.id,crypto.randomUUID()),n.name=i.getString(n.name,""),n.minimum=i.getNumber(n.minimum,0),n.cssClassName=i.getString(n.cssClassName,""),n.mapCssClassName=i.getString(n.mapCssClassName,""),n.lineCssClassName=i.getString(n.lineCssClassName,""),n.chartCssClassName=i.getString(n.chartCssClassName,""),n.daysCssClassName=i.getString(n.daysCssClassName,""),n.monthsCssClassName=i.getString(n.monthsCssClassName,""),n.statisticsCssClassName=i.getString(n.statisticsCssClassName,""),n.tooltipText=i.getString(n.tooltipText,""),n.visible=i.getBoolean(n.visible,!0),t.push(n)}}else t=[{id:crypto.randomUUID(),name:"Day Color 1",minimum:10,cssClassName:"day-color-1",tooltipText:"Day Color 1",visible:!0},{id:crypto.randomUUID(),name:"Day Color 2",minimum:15,cssClassName:"day-color-2",tooltipText:"Day Color 2",visible:!0},{id:crypto.randomUUID(),name:"Day Color 3",minimum:20,cssClassName:"day-color-3",tooltipText:"Day Color 3",visible:!0},{id:crypto.randomUUID(),name:"Day Color 4",minimum:25,cssClassName:"day-color-4",tooltipText:"Day Color 4",visible:!0}];return t}(r),r.holidays=function(e){let t=[];if(n.definedArray(e.holidays)){const n=e.holidays.length;for(let o=0;o<n;o++){const n=e.holidays[o];n.date=i.getString(n.date,""),n.name=i.getString(n.name,""),n.showInViews=i.getBoolean(n.showInViews,!0),t.push(n)}}return t}(r),r.events=function(e){return e.events=i.getObject(e.events,{}),e.events.onBackYear=i.getFunction(e.events.onBackYear,null),e.events.onNextYear=i.getFunction(e.events.onNextYear,null),e.events.onRefresh=i.getFunction(e.events.onRefresh,null),e.events.onBeforeRender=i.getFunction(e.events.onBeforeRender,null),e.events.onRenderComplete=i.getFunction(e.events.onRenderComplete,null),e.events.onDestroy=i.getFunction(e.events.onDestroy,null),e.events.onExport=i.getFunction(e.events.onExport,null),e.events.onSetYear=i.getFunction(e.events.onSetYear,null),e.events.onTypeSwitch=i.getFunction(e.events.onTypeSwitch,null),e.events.onMapDayToolTipRender=i.getFunction(e.events.onMapDayToolTipRender,null),e.events.onChartDayToolTipRender=i.getFunction(e.events.onChartDayToolTipRender,e.events.onMapDayToolTipRender),e.events.onLineDayToolTipRender=i.getFunction(e.events.onLineDayToolTipRender,e.events.onMapDayToolTipRender),e.events.onAdd=i.getFunction(e.events.onAdd,null),e.events.onRemove=i.getFunction(e.events.onRemove,null),e.events.onReset=i.getFunction(e.events.onReset,null),e.events.onViewSwitch=i.getFunction(e.events.onViewSwitch,null),e.events.onColorRangeTypeToggle=i.getFunction(e.events.onColorRangeTypeToggle,null),e.events.onImport=i.getFunction(e.events.onImport,null),e.events.onDataFetch=i.getFunction(e.events.onDataFetch,null),e.events.onClear=i.getFunction(e.events.onClear,null),e.events.onUpdate=i.getFunction(e.events.onUpdate,null),e.events.onOptionsUpdate=i.getFunction(e.events.onOptionsUpdate,null),e.events.onMapDayClick=i.getFunction(e.events.onMapDayClick,null),e.events.onMapDayDblClick=i.getFunction(e.events.onMapDayDblClick,null),e.events.onLineDayClick=i.getFunction(e.events.onLineDayClick,e.events.onMapDayClick),e.events.onLineDayDblClick=i.getFunction(e.events.onLineDayDblClick,e.events.onMapDayDblClick),e.events.onChartDayClick=i.getFunction(e.events.onChartDayClick,e.events.onMapDayClick),e.events.onChartDayDblClick=i.getFunction(e.events.onChartDayDblClick,e.events.onMapDayDblClick),e.events.onWeekDayClick=i.getFunction(e.events.onWeekDayClick,null),e.events.onWeekDayDblClick=i.getFunction(e.events.onWeekDayDblClick,null),e.events.onMonthClick=i.getFunction(e.events.onMonthClick,null),e.events.onMonthDblClick=i.getFunction(e.events.onMonthDblClick,null),e.events.onStatisticClick=i.getFunction(e.events.onStatisticClick,null),e.events.onStatisticDblClick=i.getFunction(e.events.onStatisticDblClick,null),e.events.onZoomLevelChange=i.getFunction(e.events.onZoomLevelChange,null),e.events.onClearViewableData=i.getFunction(e.events.onClearViewableData,null),e.events.onAddType=i.getFunction(e.events.onAddType,null),e.events.onRemoveType=i.getFunction(e.events.onRemoveType,null),e.events}(r),r.startMonth>0&&(r.yearsToHide=[]),r}e.getForNewInstance=function(e,t,i){const o=r(t);return o._currentView={},o._currentView.element=i,o._currentView.disabledBackground=null,o._currentView.configurationDialog=null,o._currentView.configurationDialogDayCheckBoxes=[],o._currentView.configurationDialogMonthCheckBoxes=[],o._currentView.tooltip=null,o._currentView.year=o.defaultYear,o._currentView.type=e.text.unknownTrendText,o._currentView.isInFetchMode=n.definedFunction(o.events.onDataFetch),o._currentView.isInFetchModeTimer=0,o._currentView.yearsAvailable=[],o._currentView.dayWidth=0,o._currentView.zoomLevel=-1,o._currentView.mapZoomIncrement=-1,o._currentView.lineZoomIncrement=-1,o._currentView.yearTextWidth=0,o._currentView.view=0,o._currentView.viewsEnabled=0,o.views.map.enabled&&(o._currentView.mapContentsContainer=null,o._currentView.mapContents=null,o._currentView.mapContentsScrollLeft=0,o._currentView.viewsEnabled++),o.views.line.enabled&&(o._currentView.lineContentsContainer=null,o._currentView.lineContents=null,o._currentView.lineContentsScrollLeft=0,o._currentView.viewsEnabled++),o.views.chart.enabled&&(o._currentView.chartContents=null,o._currentView.chartContentsScrollLeft=0,o._currentView.viewsEnabled++),o.views.days.enabled&&(o._currentView.daysContents=null,o._currentView.daysContentsScrollLeft=0,o._currentView.viewsEnabled++),o.views.months.enabled&&(o._currentView.monthsContents=null,o._currentView.monthsContentsScrollLeft=0,o._currentView.viewsEnabled++),o.views.statistics.enabled&&(o._currentView.statisticsContents=null,o._currentView.statisticsContentsScrollLeft=0,o._currentView.viewsEnabled++),function(e){e.views.map.enabled&&"map"===e.defaultView?e._currentView.view=1:e.views.line.enabled&&"line"===e.defaultView?e._currentView.view=2:e.views.chart.enabled&&"chart"===e.defaultView?e._currentView.view=3:e.views.days.enabled&&"days"===e.defaultView?e._currentView.view=4:e.views.months.enabled&&"months"===e.defaultView?e._currentView.view=5:e.views.statistics.enabled&&"statistics"===e.defaultView&&(e._currentView.view=6);0===e._currentView.view&&(e.views.map.enabled?e._currentView.view=1:e.views.line.enabled?e._currentView.view=2:e.views.chart.enabled?e._currentView.view=3:e.views.days.enabled?e._currentView.view=4:e.views.months.enabled?e._currentView.view=5:e.views.statistics.enabled&&(e._currentView.view=6),0===e._currentView.view&&(e.views.map.enabled=!0,e._currentView.view=1))}(o),o},e.get=r})(t=e.Options||(e.Options={}))})(g||(g={})),(e=>{let t;(t=e.Options||(e.Options={})).get=function(e=null){const t=i.getObject(e,{});return t.safeMode=i.getBoolean(t.safeMode,!0),t.observationMode=i.getBoolean(t.observationMode,!0),t.domElementTypes=i.getStringOrArray(t.domElementTypes,["*"]),t.text=function(e){return e.text=i.getObject(e.text,{}),e.text.stText=i.getAnyString(e.text.stText,"st"),e.text.ndText=i.getAnyString(e.text.ndText,"nd"),e.text.rdText=i.getAnyString(e.text.rdText,"rd"),e.text.thText=i.getAnyString(e.text.thText,"th"),e.text.backButtonText=i.getAnyString(e.text.backButtonText,"Back"),e.text.nextButtonText=i.getAnyString(e.text.nextButtonText,"Next"),e.text.refreshButtonText=i.getAnyString(e.text.refreshButtonText,"Refresh"),e.text.exportButtonText=i.getAnyString(e.text.exportButtonText,"Export"),e.text.lessText=i.getAnyString(e.text.lessText,"Less"),e.text.moreText=i.getAnyString(e.text.moreText,"More"),e.text.dateText=i.getAnyString(e.text.dateText,"Date"),e.text.countText=i.getAnyString(e.text.countText,"Count"),e.text.mapText=i.getAnyString(e.text.mapText,"Map"),e.text.chartText=i.getAnyString(e.text.chartText,"Chart"),e.text.noChartDataMessage=i.getAnyString(e.text.noChartDataMessage,"There is currently no data to view."),e.text.statisticsText=i.getAnyString(e.text.statisticsText,"Statistics"),e.text.noStatisticsDataMessage=i.getAnyString(e.text.noStatisticsDataMessage,"There are currently no statistics to view."),e.text.unknownTrendText=i.getAnyString(e.text.unknownTrendText,"Unknown"),e.text.importButtonText=i.getAnyString(e.text.importButtonText,"Import"),e.text.noMapDataMessage=i.getAnyString(e.text.noMapDataMessage,"There is currently no data to view."),e.text.objectErrorText=i.getAnyString(e.text.objectErrorText,"Errors in object: {{error_1}}, {{error_2}}"),e.text.attributeNotValidErrorText=i.getAnyString(e.text.attributeNotValidErrorText,"The attribute '{{attribute_name}}' is not a valid object."),e.text.attributeNotSetErrorText=i.getAnyString(e.text.attributeNotSetErrorText,"The attribute '{{attribute_name}}' has not been set correctly."),e.text.closeButtonText=i.getAnyString(e.text.closeButtonText,"Close"),e.text.configurationButtonText=i.getAnyString(e.text.configurationButtonText,"Configuration"),e.text.configurationTitleText=i.getAnyString(e.text.configurationTitleText,"Configuration"),e.text.visibleMonthsText=i.getAnyString(e.text.visibleMonthsText,"Visible Months"),e.text.visibleDaysText=i.getAnyString(e.text.visibleDaysText,"Visible Days"),e.text.dataText=i.getAnyString(e.text.dataText,"Data"),e.text.colorRangesText=i.getAnyString(e.text.colorRangesText,"Color Ranges"),e.text.yearText=i.getAnyString(e.text.yearText,"Year"),e.text.daysText=i.getAnyString(e.text.daysText,"Days"),e.text.noDaysDataMessage=i.getAnyString(e.text.noDaysDataMessage,"There are currently no days to view."),e.text.currentYearText=i.getAnyString(e.text.currentYearText,"Current Year"),e.text.todayText=i.getAnyString(e.text.todayText,"Today"),e.text.thisWeekText=i.getAnyString(e.text.thisWeekText,"This Week"),e.text.thisMonthText=i.getAnyString(e.text.thisMonthText,"This Month"),e.text.thisYearText=i.getAnyString(e.text.thisYearText,"This Year"),e.text.unavailableText=i.getAnyString(e.text.unavailableText,"Unavailable"),e.text.monthsText=i.getAnyString(e.text.monthsText,"Months"),e.text.noMonthsDataMessage=i.getAnyString(e.text.noMonthsDataMessage,"There are currently no months to view."),e.text.selectTypeText=i.getAnyString(e.text.selectTypeText,"Select Type"),e.text.filenamePlaceholderText=i.getAnyString(e.text.filenamePlaceholderText,"Filename (optional)"),e.text.onlyDataBeingViewedText=i.getAnyString(e.text.onlyDataBeingViewedText,"Only data being viewed"),e.text.zoomInText=i.getAnyString(e.text.zoomInText,"Zoom In"),e.text.zoomOutText=i.getAnyString(e.text.zoomOutText,"Zoom Out"),e.text.clearButtonText=i.getAnyString(e.text.clearButtonText,"Clear"),e.text.selectFilesText=i.getAnyString(e.text.selectFilesText,"Select File(s)"),e.text.dragAndDropFilesText=i.getAnyString(e.text.dragAndDropFilesText,"Drag and drop your file(s) here ..."),e.text.addTypeText=i.getAnyString(e.text.addTypeText,"Add Type"),e.text.typePlaceholderText=i.getAnyString(e.text.typePlaceholderText,"Type"),e.text.addButtonText=i.getAnyString(e.text.addButtonText,"Add"),e.text.removeButtonText=i.getAnyString(e.text.removeButtonText,"Remove"),e.text.invertText=i.getAnyString(e.text.invertText,"Invert"),e.text.lineText=i.getAnyString(e.text.lineText,"Line"),e.text.noLineDataMessage=i.getAnyString(e.text.noLineDataMessage,"There is currently no data to view."),e.text.removeTypeText=i.getAnyString(e.text.removeTypeText,"Remove Type"),e.text}(t),t.text=(o=t.text,n.invalidOptionArray(o.monthNames,12)&&(o.monthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),n.invalidOptionArray(o.dayNames,7)&&(o.dayNames=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]),o),t;var o}})(m||(m={})),(e=>{let t;var i;(i=t=e.Background||(e.Background={})).render=function(e){n.definedParentElement(e._currentView.disabledBackground)||(e._currentView.disabledBackground=a.create(e._currentView.element,"div","disabled"))},i.show=function(e){n.defined(e._currentView.disabledBackground)&&"block"!==e._currentView.disabledBackground.style.display&&(e._currentView.disabledBackground.style.display="block")},i.hide=function(e){n.defined(e._currentView.disabledBackground)&&"none"!==e._currentView.disabledBackground.style.display&&(e._currentView.disabledBackground.style.display="none")}})(y||(y={})),(e=>{let t;var i;let o;var r;let s;var a;(i=t=e.Months||(e.Months={})).get=function(e){let t=[];return e.views.map.enabled&&1===e._currentView.view?t=e.views.map.monthsToShow:e.views.line.enabled&&2===e._currentView.view?t=e.views.line.monthsToShow:e.views.chart.enabled&&3===e._currentView.view?t=e.views.chart.monthsToShow:e.views.days.enabled&&4===e._currentView.view?t=e.views.days.monthsToShow:e.views.months.enabled&&5===e._currentView.view?t=e.views.months.monthsToShow:e.views.statistics.enabled&&6===e._currentView.view&&(t=e.views.statistics.monthsToShow),t},i.set=function(e,t){e.views.map.enabled&&1===e._currentView.view?e.views.map.monthsToShow=t:e.views.line.enabled&&2===e._currentView.view?e.views.line.monthsToShow=t:e.views.chart.enabled&&3===e._currentView.view?e.views.chart.monthsToShow=t:e.views.days.enabled&&4===e._currentView.view?e.views.days.monthsToShow=t:e.views.months.enabled&&5===e._currentView.view?e.views.months.monthsToShow=t:e.views.statistics.enabled&&6===e._currentView.view&&(e.views.statistics.monthsToShow=t)},(r=o=e.Days||(e.Days={})).get=function(e){let t=[];return e.views.map.enabled&&1===e._currentView.view?t=e.views.map.daysToShow:e.views.line.enabled&&2===e._currentView.view?t=e.views.line.daysToShow:e.views.chart.enabled&&3===e._currentView.view?t=e.views.chart.daysToShow:e.views.days.enabled&&4===e._currentView.view?t=e.views.days.daysToShow:e.views.months.enabled&&5===e._currentView.view?t=e.views.months.daysToShow:e.views.statistics.enabled&&6===e._currentView.view&&(t=e.views.statistics.daysToShow),t},r.set=function(e,t){e.views.map.enabled&&1===e._currentView.view?e.views.map.daysToShow=t:e.views.line.enabled&&2===e._currentView.view?e.views.line.daysToShow=t:e.views.chart.enabled&&3===e._currentView.view?e.views.chart.daysToShow=t:e.views.days.enabled&&4===e._currentView.view?e.views.days.daysToShow=t:e.views.months.enabled&&5===e._currentView.view?e.views.months.daysToShow=t:e.views.statistics.enabled&&6===e._currentView.view&&(e.views.statistics.daysToShow=t)},(a=s=e.View||(e.View={})).getScrollPositions=function(e){e.views.map.enabled&&n.defined(e._currentView.mapContents)&&(e._currentView.mapContentsScrollLeft=e._currentView.mapContents.scrollLeft),e.views.line.enabled&&n.defined(e._currentView.lineContents)&&(e._currentView.lineContentsScrollLeft=e._currentView.lineContents.scrollLeft),e.views.chart.enabled&&n.defined(e._currentView.chartContents)&&(e._currentView.chartContentsScrollLeft=e._currentView.chartContents.scrollLeft),e.views.days.enabled&&n.defined(e._currentView.daysContents)&&(e._currentView.daysContentsScrollLeft=e._currentView.daysContents.scrollLeft),e.views.statistics.enabled&&n.defined(e._currentView.statisticsContents)&&(e._currentView.statisticsContentsScrollLeft=e._currentView.statisticsContents.scrollLeft),""!==e._currentView.element.innerHTML&&(e._currentView.element.style.height=`${e._currentView.element.offsetHeight}px`),e._currentView.element.innerHTML=""},a.get=function(e){let t=0;return"map"===e.toLowerCase()?t=1:"line"===e.toLowerCase()?t=2:"chart"===e.toLowerCase()?t=3:"days"===e.toLowerCase()?t=4:"months"===e.toLowerCase()?t=5:"statistics"===e.toLowerCase()&&(t=6),t},a.getName=function(e){let t="";return 1===e._currentView.view?t="map":2===e._currentView.view?t="line":3===e._currentView.view?t="chart":4===e._currentView.view?t="days":5===e._currentView.view?t="months":6===e._currentView.view&&(t="statistics"),t},a.getText=function(e,t){let n="";return e.views.map.enabled&&1===e._currentView.view?n=t.text.mapText:e.views.line.enabled&&2===e._currentView.view?n=t.text.lineText:e.views.chart.enabled&&3===e._currentView.view?n=t.text.chartText:e.views.days.enabled&&4===e._currentView.view?n=t.text.daysText:e.views.months.enabled&&5===e._currentView.view?n=t.text.monthsText:e.views.statistics.enabled&&6===e._currentView.view&&(n=t.text.colorRangesText),n},a.set=function(e){e.views.map.enabled&&1===e._currentView.view?e._currentView.mapContentsContainer.style.display="block":e.views.line.enabled&&2===e._currentView.view?e._currentView.lineContentsContainer.style.display="block":e.views.chart.enabled&&3===e._currentView.view?e._currentView.chartContents.style.display="block":e.views.days.enabled&&4===e._currentView.view?e._currentView.daysContents.style.display="block":e.views.months.enabled&&5===e._currentView.view?e._currentView.monthsContents.style.display="block":e.views.statistics.enabled&&6===e._currentView.view&&(e._currentView.statisticsContents.style.display="block"),e._currentView.element.style.removeProperty("height")}})(p||(p={})),(v||(v={})).file=function(e,t,o,r){"json"===t?function(e,t,o){const r=new FileReader;let s={};r.onloadend=()=>t(e.name,s),r.onload=e=>{const t=i.getObjectFromString(e.target.result,o);t.parsed&&n.definedObject(t.object)&&(s=t.object)},r.readAsText(e)}(e,o,r):"txt"===t?function(e,t){const n=new FileReader,i={};n.onloadend=()=>t(e.name,i),n.onload=e=>{const t=e.target.result.toString().split("\n"),n=t.length;for(let e=1;e<n;e++){const n=t[e].split(":");i[n[0].trim()]=parseInt(n[1].trim())}},n.readAsText(e)}(e,o):"csv"===t?function(e,t){const n=new FileReader,i={};n.onloadend=()=>t(e.name,i),n.onload=e=>{const t=e.target.result.toString().replace(new RegExp('"',"g"),"").split("\n"),n=t.length;for(let e=1;e<n;e++){let n=t[e].split(",");i[n[0].trim()]=parseInt(n[1].trim())}},n.readAsText(e)}(e,o):"tsv"===t?function(e,t){const n=new FileReader,i={};n.onloadend=()=>t(e.name,i),n.onload=e=>{const t=e.target.result.toString().split("\n"),n=t.length;for(let e=1;e<n;e++){const n=t[e].split("\t");i[n[0].trim()]=parseInt(n[1].trim())}},n.readAsText(e)}(e,o):"md"===t?function(e,t){const n=new FileReader,i={};n.onloadend=()=>t(e.name,i),n.onload=e=>{const t=e.target.result.toString().split("\n"),n=t.length;for(let e=2;e<n;e++){const n=t[e].trim(),o=n.substring(1,n.length-1).trim().split("|");i[o[0].trim()]=parseInt(o[1].trim())}},n.readAsText(e)}(e,o):"yaml"===t?function(e,t){const n=new FileReader,i={};n.onloadend=()=>t(e.name,i),n.onload=e=>{const t=e.target.result.toString().split("\n"),n=t.length;for(let e=1;e<n;e++){const n=t[e].split(":");i[n[0].trim()]=parseInt(n[1].trim())}},n.readAsText(e)}(e,o):"toml"===t&&function(e,t){const n=new FileReader,i={};n.onloadend=()=>t(e.name,i),n.onload=e=>{const t=e.target.result.toString().split("\n"),n=t.length;for(let e=3;e<n;e++){const n=t[e].split("=");i[n[0].trim()]=parseInt(n[1].trim())}},n.readAsText(e)}(e,o)},(e=>{let t;var i;let r;(i=t=e.File||(e.File={})).mimeType=function(e){let t=null;return"csv"===e.toLowerCase()?t="text/csv":"json"===e.toLowerCase()?t="application/json":"xml"===e.toLowerCase()?t="application/xml":"txt"===e.toLowerCase()?t="text/plain":"html"===e.toLowerCase()?t="text/html":"md"===e.toLowerCase()?t="text/x-markdown":"tsv"===e.toLowerCase()?t="text/tab-separated-values":"yaml"===e.toLowerCase()?t="application/yaml":"toml"===e.toLowerCase()&&(t="application/toml"),t},i.filename=function(e,t,i,r){let s=null;if(n.definedString(i))s=`${i}.${r.toLowerCase()}`;else{const n=new Date,i=`${o.padNumber(n.getDate())}-${o.padNumber(n.getMonth()+1)}-${n.getFullYear()}`,a=`${o.padNumber(n.getHours())}-${o.padNumber(n.getMinutes())}`;let l="";t._currentView.type!==e.text.unknownTrendText&&(l=`${t._currentView.type.toLowerCase().replace(/ /g,"_")}_`),s=`${l}${i}_${a}.${r.toLowerCase()}`}return s},(e=>{function t(e){let t=e.toString().replace(/(\r\n|\n|\r)/gm,"").replace(/(\s\s)/gm," ");return t=t.replace(/"/g,'""'),t=`"${t}"`,t}function n(e){return e.join(",")}e.get=function(e,i,o,r){let a=null;return"csv"===e?a=function(e,i){const o=[];for(const i in e)e.hasOwnProperty(i)&&o.push(n([t(i),t(e[i].toString())]));o.length>0&&o.unshift(n([t(i.text.dateText),t(i.text.countText)]));return o.join("\n")}(i,o):"json"===e?a=function(e){return JSON.stringify(e,null,2)}(i):"xml"===e?a=function(e,t,n){const i=s.getCustomFormattedDateText(t,n.exportDateTimeFormat,new Date),o=[];o.push('<?xml version="1.0" ?>'),o.push("<LastModified>"),o.push(`  <FullDate>${i}</FullDate>`),o.push("</LastModified>"),o.push("<Dates>");for(const t in e)e.hasOwnProperty(t)&&(o.push("<Date>"),o.push(`  <FullDate>${t}</FullDate>`),o.push(`  <Count>${e[t].toString()}</Count>`),o.push("</Date>"));return o.push("</Dates>"),o.join("\n")}(i,o,r):"txt"===e?a=function(e,t,n){const i=s.getCustomFormattedDateText(t,n.exportDateTimeFormat,new Date),o=[];o.push(`Last-Modified: ${i}`);for(const t in e)e.hasOwnProperty(t)&&o.push(`${t}: ${e[t].toString()}`);return o.join("\n")}(i,o,r):"html"===e?a=function(e,t,n){const i=[],o=s.getCustomFormattedDateText(t,n.exportDateTimeFormat,new Date);i.push("<!DOCTYPE html>"),i.push("<html>"),i.push("<head>"),i.push('  <meta charset="utf-8" />'),i.push(`  <meta http-equiv="Last-Modified" content="${o} GMT" />`),i.push("</head>"),i.push("<body>"),i.push("  <ul>");for(const t in e)e.hasOwnProperty(t)&&i.push(`    <li><b>${t}:</b> ${e[t].toString()}</li>`);return i.push("  </ul>"),i.push("</body>"),i.push("</html>"),i.join("\n")}(i,o,r):"md"===e?a=function(e){const t=[];t.push("| Full Date | Count |"),t.push("| --- | --- |");for(const n in e)e.hasOwnProperty(n)&&t.push(`| ${n} | ${e[n].toString()} |`);return t.join("\n")}(i):"tsv"===e?a=function(e){const t=[];t.push("Full Date\tCount");for(const n in e)e.hasOwnProperty(n)&&t.push(`${n}\t${e[n].toString()}`);return t.join("\n")}(i):"yaml"===e?a=function(e,t,n){const i=[],o=s.getCustomFormattedDateText(t,n.exportDateTimeFormat,new Date);i.push(`Last-Modified: ${o}`);for(const t in e)e.hasOwnProperty(t)&&i.push(`${t}: ${e[t].toString()}`);return i.join("\n")}(i,o,r):"toml"===e&&(a=function(e,t,n){const i=[],o=s.getCustomFormattedDateText(t,n.exportDateTimeFormat,new Date);i.push(`last_modified = "${o}"`),i.push(""),i.push("[dates]");for(const t in e)e.hasOwnProperty(t)&&i.push(`${t} = ${e[t].toString()}`);return i.join("\n")}(i,o,r)),a}})(r=e.Contents||(e.Contents={}))})(f||(f={})),(T||(T={})).setHeight=function(e,t,n,i=!0){n>0&&(i&&e.chartsAnimationDelay>0?setTimeout(()=>{t.style.height=`${n}px`},e.chartsAnimationDelay):t.style.height=`${n}px`)},(t=>{function n(t){if(t.useLocalStorageForData&&window.localStorage){const n=window.localStorage.length,i=[],r=t._currentView.element.id;for(let t=0;t<n;t++){const n=window.localStorage.key(t);o.startsWithAnyCase(n,`${e.LOCAL_STORAGE_START_ID}${r}`)&&i.push(n)}const s=i.length;for(let e=0;e<s;e++)window.localStorage.removeItem(i[e])}}t.load=function(t,n,r){if(n.useLocalStorageForData&&window.localStorage){const s=window.localStorage.length,a=n._currentView.element.id;for(let n=0;n<s;n++){const s=window.localStorage.key(n);if(o.startsWithAnyCase(s,`${e.LOCAL_STORAGE_START_ID}${a}`)){const e=window.localStorage.getItem(s),n=i.getObjectFromString(e,t);if(n.parsed){r.typeData=n.object,r.totalTypes=0;for(const e in r.typeData)r.typeData.hasOwnProperty(e)&&r.totalTypes++}break}}}},t.store=function(t,i){if(t.useLocalStorageForData&&window.localStorage){const o=t._currentView.element.id;n(t);const r=JSON.stringify(i.typeData);window.localStorage.setItem(`${e.LOCAL_STORAGE_START_ID}${o}`,r)}},t.clear=n})(b||(b={})),(V||(V={})).largestValueForViewValues=function(e){const t={};for(let n=0;n<=e;n++)t[n+1]={total:0,typeTotals:{}};return t},(()=>{let t={},r=null,h={};function C(){const e=t.domElementTypes,n=e.length;for(let t=0;t<n;t++){const n=document.getElementsByTagName(e[t]),i=[].slice.call(n),o=i.length;for(let e=0;e<o&&D(i[e]);e++);}}function D(o){let r=!0;if(n.defined(o)&&o.hasAttribute(e.HEAT_JS_ATTRIBUTE_NAME)){const s=o.getAttribute(e.HEAT_JS_ATTRIBUTE_NAME);if(n.definedString(s)){const a=i.getObjectFromString(s,t);a.parsed&&n.definedObject(a.object)?S(g.Options.getForNewInstance(t,a.object,o)):t.safeMode||(console.error(t.text.attributeNotValidErrorText.replace("{{attribute_name}}",e.HEAT_JS_ATTRIBUTE_NAME)),r=!1)}else t.safeMode||(console.error(t.text.attributeNotSetErrorText.replace("{{attribute_name}}",e.HEAT_JS_ATTRIBUTE_NAME)),r=!1)}return r}function S(t){c.customEvent(t.events.onBeforeRender,t._currentView.element),n.definedString(t._currentView.element.id)||(t._currentView.element.id=crypto.randomUUID()),a.addClass(t._currentView.element,"heat-js"),t.resizable&&a.addClass(t._currentView.element,"resizable"),t._currentView.element.removeAttribute(e.HEAT_JS_ATTRIBUTE_NAME),te(t._currentView.element.id,t),M(t),B(t),function(e){const t=a.getStyleValueByNameSizingMetic(document.documentElement,u.Variables.DaySize),n=a.getStyleValueByNameSizingMetic(document.documentElement,u.Variables.LineWidth);let i=a.getStyleValueByName(document.documentElement,u.Variables.DaySize,!0),o=a.getStyleValueByName(document.documentElement,u.Variables.LineWidth,!0);-1===e._currentView.mapZoomIncrement&&(e._currentView.mapZoomIncrement=i/10);-1===e._currentView.lineZoomIncrement&&(e._currentView.lineZoomIncrement=o/10);e.zooming.defaultLevel>0&&-1===e._currentView.zoomLevel&&(i+=parseFloat((e.zooming.defaultLevel*e._currentView.mapZoomIncrement).toFixed(1)),o+=parseFloat((e.zooming.defaultLevel*e._currentView.lineZoomIncrement).toFixed(1)),e._currentView.zoomLevel=e.zooming.defaultLevel,e._currentView.element.style.setProperty(u.Variables.DaySize,`${i}${t}`),e._currentView.element.style.setProperty(u.Variables.LineWidth,`${o}${n}`))}(t),c.customEvent(t.events.onRenderComplete,t._currentView.element)}function M(i,r=!1,u=!1,g=!1){l.hide(i),r&&b.store(i,h[i._currentView.element.id]),i._currentView.yearsAvailable=function(e){let t=[];if(e.showOnlyDataForYearsAvailable){let n=ne(e);for(const e in n)if(n.hasOwnProperty(e)){let n=parseInt(s.getStorageDateYear(e));-1===t.indexOf(n)&&t.push(n)}}return t=t.sort((e,t)=>e-t),t}(i),p.View.getScrollPositions(i),l.render(i),function(e){e._currentView.isInFetchMode&&(0===e._currentView.isInFetchModeTimer&&re(e),0===e._currentView.isInFetchModeTimer&&(e._currentView.isInFetchModeTimer=setInterval(()=>{re(e),M(e)},e.dataFetchDelay)))}(i),function(e){const n=ee(e);if(h[e._currentView.element.id].totalTypes>1)for(const i in h[e._currentView.element.id].typeData)(i!==t.text.unknownTrendText||n>0)&&0===n&&e._currentView.type===t.text.unknownTrendText&&(e._currentView.type=i)}(i),function(e){if(e.title.showText||e.title.showYearSelector||e.title.showRefreshButton||e.title.showExportButton||e.title.showImportButton||e.title.showClearButton){const i=a.create(e._currentView.element,"div","title-bar"),o=a.create(i,"div","title"),r=e.title.showTitleDropDownMenu&&e._currentView.viewsEnabled>1;if(r?e.title.showTitleDropDownButton&&a.create(o,"div","down-arrow"):a.addClass(o,"no-click"),e.title.showText&&(o.innerHTML+=e.title.text,e.title.showSectionText&&(a.createWithHTML(o,"span","section-text","["),a.createWithHTML(o,"span","section-text-name",p.View.getText(e,t)),a.createWithHTML(o,"span","section-text","]"))),r&&function(e,i){const o=a.create(i,"div","titles-menu-container"),r=a.create(o,"div","titles-menu");e.title.showTitleDropDownHeaders&&a.createWithHTML(r,"div","title-menu-header",`${t.text.dataText}:`);if(e.views.map.enabled){F(e,E(e,r,t.text.mapText),1,"map")}if(e.views.line.enabled){F(e,E(e,r,t.text.lineText),2,"line")}if(e.views.chart.enabled){F(e,E(e,r,t.text.chartText),3,"chart")}let s=null;if(e.views.days.enabled){e.title.showTitleDropDownHeaders&&(s=a.createWithHTML(r,"div","title-menu-header",`${t.text.yearText}:`));F(e,E(e,r,t.text.daysText),4,"days")}if(e.views.months.enabled){e.title.showTitleDropDownHeaders&&!n.defined(s)&&(s=a.createWithHTML(r,"div","title-menu-header",`${t.text.yearText}:`));F(e,E(e,r,t.text.monthsText),5,"months")}if(e.views.statistics.enabled){e.title.showTitleDropDownHeaders&&a.createWithHTML(r,"div","title-menu-header",`${t.text.statisticsText}:`);F(e,E(e,r,t.text.colorRangesText),6,"statistics")}}(e,o),e.title.showImportButton&&!e._currentView.isInFetchMode){const o=a.createIconButton(i,"button","import","arrow-up");o.onclick=()=>function(e){(function(e){if(y.Background.render(e),!n.definedParentElement(e._currentView.importDialog)){e._currentView.importDialog=a.create(e._currentView.disabledBackground,"div","dialog import");const i=a.create(e._currentView.importDialog,"div","dialog-title-bar"),o=a.create(e._currentView.importDialog,"div","dialog-contents"),r=a.create(i,"div","dialog-close");a.createWithHTML(i,"span","dialog-title-bar-text",t.text.selectFilesText),e._currentView.importDialogDragAndDrop=a.createWithHTML(o,"div","drag-and-drop-files",t.text.dragAndDropFilesText),function(e,t){t.allowFileImports&&!t._currentView.isInFetchMode&&(e.ondragover=a.cancelBubble,e.ondragenter=a.cancelBubble,e.ondragleave=a.cancelBubble,e.ondrop=e=>{if(a.cancelBubble(e),n.defined(window.FileReader)&&e.dataTransfer.files.length>0){const n=new DataTransfer;if(t.allowFileImports){const t=e.dataTransfer.files.length;for(let i=0;i<t;i++)n.items.add(e.dataTransfer.files[i])}else n.items.add(e.dataTransfer.files[0]);A(t,n.files)}})}(e._currentView.importDialogDragAndDrop,e);const s=a.create(o,"div","buttons"),c=a.createButton(s,"button","","...");e._currentView.importDialogImportButton=a.createButton(s,"button","default",t.text.importButtonText),e._currentView.importDialogImportButton.disabled=!0,r.onclick=()=>function(e){y.Background.hide(e),n.defined(e._currentView.importDialog)&&"none"!==e._currentView.importDialog.style.display&&(e._currentView.importDialogDragAndDrop.innerHTML=t.text.dragAndDropFilesText,e._currentView.importDialogFileList=null,e._currentView.importDialogImportButton.disabled=!0,e._currentView.importDialog.style.display="none");l.hide(e)}(e),c.onclick=()=>k(e),e._currentView.importDialogImportButton.onclick=()=>I(e._currentView.importDialogFileList,e),l.add(r,e,t.text.closeButtonText)}})(e),y.Background.show(e),n.defined(e._currentView.importDialog)&&"block"!==e._currentView.importDialog.style.display&&(e._currentView.importDialog.style.display="block");l.hide(e)}(e),e.title.showToolTips&&l.add(o,e,t.text.importButtonText)}if(e.title.showExportButton&&function(e){return Object.keys(ne(e)).length>0}(e)){const o=a.createIconButton(i,"button","export","arrow-down");o.onclick=()=>function(e){(function(e){if(y.Background.render(e),!n.definedParentElement(e._currentView.exportDialog)){e._currentView.exportDialog=a.create(e._currentView.disabledBackground,"div","dialog export");const n=a.create(e._currentView.exportDialog,"div","dialog-title-bar"),i=a.create(e._currentView.exportDialog,"div","dialog-contents"),o=a.create(n,"div","dialog-close");a.createWithHTML(n,"span","dialog-title-bar-text",t.text.selectTypeText),e._currentView.exportDialogExportTypeSelect=a.create(i,"select","input-box"),e._currentView.exportDialogExportTypeSelect.name=crypto.randomUUID(),e._currentView.exportDialogExportFilenameInput=a.create(i,"input","input-box filename"),e._currentView.exportDialogExportFilenameInput.name=crypto.randomUUID(),e._currentView.exportDialogExportFilenameInput.placeholder=t.text.filenamePlaceholderText,e._currentView.exportDialogExportOnlyDataBeingViewedCheckBox=a.createCheckBox(i,t.text.onlyDataBeingViewedText,crypto.randomUUID()),e._currentView.exportDialogExportOnlyDataBeingViewedCheckBox.checked=e.exportOnlyDataBeingViewed;const r=a.create(i,"div","buttons"),s=a.createButton(r,"button","default",t.text.exportButtonText);!function(e){let t,n=[];for(t in _){const i=a.createWithNoContainer("option");i.value=_[t],i.textContent=t.toString().toUpperCase(),i.selected=t===e.exportType,n.push(i)}n.sort((e,t)=>e.text.toLowerCase().localeCompare(t.text.toLowerCase())),n.forEach(t=>e._currentView.exportDialogExportTypeSelect.add(t))}(e);const c=()=>{const t=e._currentView.exportDialogExportTypeSelect.value,n=e._currentView.exportDialogExportFilenameInput.value,i=e._currentView.exportDialogExportOnlyDataBeingViewedCheckBox.checked;N(e),L(e,t,n,i)};e._currentView.exportDialogExportFilenameInput.onkeydown=e=>{"Enter"===e.key&&c()},s.onclick=()=>c(),o.onclick=()=>N(e),l.add(o,e,t.text.closeButtonText)}})(e),y.Background.show(e),n.defined(e._currentView.exportDialog)&&"block"!==e._currentView.exportDialog.style.display&&(e._currentView.exportDialogExportFilenameInput.value="",e._currentView.exportDialog.style.display="block",e._currentView.exportDialogExportFilenameInput.focus());l.hide(e)}(e),e.title.showToolTips&&l.add(o,e,t.text.exportButtonText)}if(e.title.showRefreshButton){const n=a.createIconButton(i,"button","refresh","refresh");e.title.showToolTips&&l.add(n,e,t.text.refreshButtonText),n.onclick=()=>{M(e),c.customEvent(e.events.onRefresh,e._currentView.element)}}if(e.title.showClearButton&&oe(e)>0){const n=a.createIconButton(i,"button","clear","close");e.title.showToolTips&&l.add(n,e,t.text.clearButtonText),n.onclick=()=>{!function(e){const t=e._currentView.year;let n=ne(e);for(let i=e.startMonth;i<12+e.startMonth;i++){let o=i,r=t;e.startMonth>0&&i>11&&(o=i-12,r++);const a=s.getTotalDaysInMonth(r,o);for(let e=0;e<a;e++){const t=new Date(r,o,e+1),i=s.toStorageDate(t);n.hasOwnProperty(i)&&delete n[i]}}c.customEvent(e.events.onClearViewableData,e._currentView.element)}(e),M(e,!0)}}if(e.title.showYearSelector){const o=a.createIconButton(i,"button","back","arrow-line-left");if(o.onclick=()=>ae(e),e.title.showToolTips&&l.add(o,e,t.text.backButtonText),n.firstVisibleYear(e,e._currentView.year)&&(o.disabled=!0),function(e,t){let n=e._currentView.year.toString();e.startMonth>0&&(n+=` / ${e._currentView.year+1}`);e._currentView.yearText=a.createWithHTML(t,"div","year-text",n),0===e._currentView.yearTextWidth&&(e._currentView.yearTextWidth=Math.ceil(e._currentView.yearText.offsetWidth+20));e._currentView.yearText.style.width=`${e._currentView.yearTextWidth}px`}(e,i),e.title.showYearSelectionDropDown?function(e){a.create(e._currentView.yearText,"div","down-arrow");const t=a.create(e._currentView.yearText,"div","years-menu-container"),i=a.create(t,"div","years-menu"),o=(new Date).getFullYear();let r=null;t.style.display="block",t.style.visibility="hidden";for(let t=o-e.title.extraSelectionYears;t<o+e.title.extraSelectionYears;t++)if(n.yearVisible(e,t)){let s=R(e,i,t,o);n.defined(r)||(r=s)}n.defined(r)&&(i.scrollTop=r.offsetTop-i.offsetHeight/2);t.style.display="none",t.style.visibility="visible"}(e):a.addClass(e._currentView.yearText,"no-click"),e.title.showConfigurationButton){let o=a.create(i,"div","configure");o.onclick=()=>function(e){(function(e){if(y.Background.render(e),!n.definedParentElement(e._currentView.configurationDialog)){e._currentView.configurationDialog=a.create(e._currentView.disabledBackground,"div","dialog configuration");const i=a.create(e._currentView.configurationDialog,"div","dialog-title-bar"),o=a.create(e._currentView.configurationDialog,"div","dialog-contents"),r=a.create(i,"div","dialog-close"),s=a.create(o,"div","side-container panel"),d=a.create(o,"div","side-container panel");a.createWithHTML(i,"span","dialog-title-bar-text",t.text.configurationTitleText),a.createWithHTML(s,"div","side-container-title-text",`${t.text.visibleDaysText}:`),a.createWithHTML(d,"div","side-container-title-text",`${t.text.visibleMonthsText}:`);const u=a.create(d,"div","side-container"),w=a.create(d,"div","side-container");r.onclick=()=>function(e){y.Background.hide(e),n.defined(e._currentView.configurationDialog)&&"none"!==e._currentView.configurationDialog.style.display&&(e._currentView.configurationDialog.style.display="none");const t=p.Days.get(e),i=p.Months.get(e),o=[],r=[];let s=!1;for(let t=0;t<7;t++)e._currentView.configurationDialogDayCheckBoxes[t].checked&&o.push(t+1);for(let t=0;t<12;t++)e._currentView.configurationDialogMonthCheckBoxes[t].checked&&r.push(t+1);o.length>=1&&JSON.stringify(o)!==JSON.stringify(t)&&(p.Days.set(e,o),s=!0);r.length>=1&&JSON.stringify(r)!==JSON.stringify(i)&&(p.Months.set(e,r),s=!0);s?(M(e),c.customEvent(e.events.onOptionsUpdate,e._currentView.element,e)):l.hide(e)}(e);for(let n=0;n<7;n++)e._currentView.configurationDialogDayCheckBoxes[n]=a.createCheckBox(s,t.text.dayNames[n],n.toString());let h=u,g=0;for(let n=e.startMonth;n<12+e.startMonth;n++){let i=n;e.startMonth>0&&n>11&&(i=n-12),e._currentView.configurationDialogMonthCheckBoxes[i]=a.createCheckBox(h,t.text.monthNames[i],i.toString()),g++,g>6&&(h=w)}l.add(r,e,t.text.closeButtonText)}})(e),y.Background.show(e),n.defined(e._currentView.configurationDialog)&&"block"!==e._currentView.configurationDialog.style.display&&(e._currentView.configurationDialog.style.display="block");const i=p.Days.get(e),o=p.Months.get(e);for(let t=0;t<7;t++)e._currentView.configurationDialogDayCheckBoxes[t].checked=n.dayVisible(i,t+1);for(let t=0;t<12;t++)e._currentView.configurationDialogMonthCheckBoxes[t].checked=n.monthVisible(o,t);l.hide(e)}(e),e.title.showToolTips&&l.add(o,e,t.text.configurationButtonText)}if(e.title.showCurrentYearButton){const n=a.createIconButton(i,"button","current-year","pin");e.title.showToolTips&&l.add(n,e,t.text.currentYearText),n.onclick=()=>{e._currentView.year=(new Date).getFullYear()-1,le(e,!1),c.customEvent(e.events.onSetYear,e._currentView.element,e._currentView.year)}}const r=a.createIconButton(i,"button","next","arrow-line-right");r.onclick=()=>le(e),e.title.showToolTips&&l.add(r,e,t.text.nextButtonText),n.lastVisibleYear(e,e._currentView.year)&&(r.disabled=!0)}}}(i),function(e){const i=new Date,r=e._currentView.year===i.getFullYear();if(e.yearlyStatistics.enabled&&(!e.yearlyStatistics.showOnlyForCurrentYear||r)){const l=a.create(e._currentView.element,"div","yearly-statistics"),c=p.Days.get(e),d=p.Months.get(e),u=W(e,c,d,new Date(e._currentView.year,e.startMonth,1),new Date(e._currentView.year+1,e.startMonth,1));if(e.yearlyStatistics.showToday){let d=ne(e)[s.toStorageDate(i)];const w=a.create(l,"div","statistics-box"),h=s.getWeekdayNumber(i)+1;n.defined(d)&&n.dayVisible(c,h)||(d=0);const g=r?o.friendlyNumber(d):t.text.unavailableText;a.createWithHTML(w,"div","statistics-box-title",`${t.text.todayText}:`);const m=a.createWithHTML(w,"div","statistics-box-count",g);r||a.addClass(m,"unavailable"),H(e,m,u,d,r)}if(e.yearlyStatistics.showThisWeek){let n=0;if(r){const t=s.getDateForMondayOfCurrentWeek(),i=new Date(t);i.setDate(t.getDate()+7),n=W(e,c,d,t,i)}const i=r?o.friendlyNumber(n):t.text.unavailableText,w=a.create(l,"div","statistics-box");a.createWithHTML(w,"div","statistics-box-title",`${t.text.thisWeekText}:`);const h=a.createWithHTML(w,"div","statistics-box-count",i);r||a.addClass(h,"unavailable"),H(e,h,u,n,r)}if(e.yearlyStatistics.showThisMonth){let n=0;if(r){n=W(e,c,d,new Date(i.getFullYear(),i.getMonth(),1),new Date(i.getFullYear(),i.getMonth(),s.getTotalDaysInMonth(i.getFullYear(),i.getMonth())+1))}const w=r?o.friendlyNumber(n):t.text.unavailableText,h=a.create(l,"div","statistics-box");a.createWithHTML(h,"div","statistics-box-title",`${t.text.thisMonthText}:`);const g=a.createWithHTML(h,"div","statistics-box-count",w);r||a.addClass(g,"unavailable"),H(e,g,u,n,r)}if(e.yearlyStatistics.showThisYear){const e=a.create(l,"div","statistics-box");a.createWithHTML(e,"div","statistics-box-title",`${t.text.thisYearText}:`),a.createWithHTML(e,"div","statistics-box-count",o.friendlyNumber(u))}""===l.innerHTML&&l.parentNode.removeChild(l)}}(i),i.views.map.enabled&&1===i._currentView.view&&function(i,o=!1,r){if(i._currentView.mapContentsContainer=a.create(i._currentView.element,"div","map-contents-container"),i._currentView.mapContents=a.create(i._currentView.mapContentsContainer,"div","map-contents"),function(e){let t=!1;const n=ne(e),i=e._currentView.year.toString(),o=(e._currentView.year+1).toString();for(const r in n)if(n.hasOwnProperty(r)){if(s.getStorageDateYear(r)===i){t=!0;break}if(e.startMonth>0&&s.getStorageDateYear(r)===o){t=!0;break}}return t}(i)){i._currentView.mapContents.style.minHeight="unset",i._currentView.mapContents.onscroll=()=>l.hide(i);const c=a.create(i._currentView.mapContents,"div","map"),d=i._currentView.year;if(o&&a.addClass(c,"view-switch"),i.views.map.showDayNames){const e=a.create(c,"div","days"),o=i.views.map.showMinimalDayNames&&7===i.views.map.daysToShow.length;i.views.map.showMonthNames&&!i.views.map.placeMonthNamesOnTheBottom||(e.className="days-months-bottom");for(let r=0;r<7;r++)if(n.dayVisible(i.views.map.daysToShow,r+1)){const n=o&&r%3!=0?" ":t.text.dayNames[r],s=a.createWithHTML(e,"div","day-name",n);i.views.days.enabled&&(s.ondblclick=()=>Q(i,4,"days")),i.views.map.showSpacing||a.addClass(s,"no-spacing")}i.views.map.showDaysInReverseOrder&&a.reverseChildrenOrder(e)}const u=a.create(c,"div","months"),h=w.getAllSorted(i);for(let o=i.startMonth;o<12+i.startMonth;o++){let r=o,l=d;if(i.startMonth>0&&o>11&&(r=o-12,l++),n.monthVisible(i.views.map.monthsToShow,r)){const o=a.create(u,"div","month"),c=a.create(o,"div","day-columns"),w=new Date(l,r,1),g=s.getWeekdayNumber(w);let m=s.getTotalDaysInMonth(l,r),y=a.create(c,"div","day-column"),p=!1,v=1;o.setAttribute(e.HEAT_JS_MAP_MONTH_NUMBER_ATTRIBUTE_NAME,`${r+1}`),m+=g;for(let e=0;e<m;e++){if(e>=g)p=!0;else if(n.dayVisible(i.views.map.daysToShow,v)){const e=a.create(y,"div","day-disabled");i.views.map.showSpacing||a.addClass(e,"no-spacing")}if(p){let t=null;if(n.dayVisible(i.views.map.daysToShow,v)&&(t=P(i,y,e-g,r,l,h)),(e+1)%7==0&&(i.views.map.showDaysInReverseOrder&&a.reverseChildrenOrder(y),y=a.create(c,"div","day-column"),v=0,0===i._currentView.dayWidth&&n.defined(t))){let e=a.getStyleValueByName(t,"margin-left",!0),n=a.getStyleValueByName(t,"margin-right",!0);i._currentView.dayWidth=t.offsetWidth+e+n}}v++}if($(i,v,y),i.views.map.showMonthNames){let e;const n=o.offsetWidth,u=new Date(d,r,1);let w=t.text.monthNames[r];i.startMonth>0&&i.views.map.showYearsInMonthNames&&(w+=` ${l}`),e=i.views.map.placeMonthNamesOnTheBottom?a.createWithHTML(o,"div","month-name-bottom",w):a.createWithHTML(o,"div","month-name",w,c),i.views.map.showMonthDayGaps?e.style.width=`${n}px`:e.style.width=n-i._currentView.dayWidth+"px",s.isCurrentMonthAndYear(u)&&a.addClass(e,"current"),i.views.months.enabled&&(e.ondblclick=()=>Q(i,5,"months"))}i.views.map.showMonthsInReverseOrder&&a.reverseChildrenOrder(c)}}i.views.map.showMonthsInReverseOrder&&a.reverseChildrenOrder(u),function(e,t){const n=t.children.length;for(let i=1;i<n;i++){const n=t.children[i],o=n.getElementsByClassName("day-column"),r=[].slice.call(o)[0].getElementsByClassName("day-disabled");!e.views.map.showMonthDayGaps&&r.length>0?n.style.marginLeft=-e._currentView.dayWidth+"px":e.views.map.showMonthDayGaps&&0===r.length&&(n.style.marginLeft=`${e._currentView.dayWidth}px`)}}(i,u),q(i,i._currentView.mapContentsContainer,c),(i.views.map.keepScrollPositions||r)&&(i._currentView.mapContents.scrollLeft=i._currentView.mapContentsScrollLeft)}else{i._currentView.mapContents.style.minHeight=`${e.DEFAULT_MINIMUM_HEIGHT}px`;const n=a.createWithHTML(i._currentView.mapContents,"div","no-data-message",t.text.noMapDataMessage);o&&a.addClass(n,"view-switch")}i._currentView.mapContentsContainer.style.display="none"}(i,u,g),i.views.line.enabled&&2===i._currentView.view&&function(i,o,r){i._currentView.lineContentsContainer=a.create(i._currentView.element,"div","line-contents-container"),i._currentView.lineContents=a.create(i._currentView.lineContentsContainer,"div","line-contents"),i._currentView.lineContents.onscroll=()=>l.hide(i);const c=a.create(i._currentView.lineContents,"div","line"),d=a.create(c,"div","day-lines"),u=oe(i);o&&a.addClass(c,"view-switch");if(0===u){i._currentView.lineContents.style.minHeight=`${e.DEFAULT_MINIMUM_HEIGHT}px`,c.parentNode.removeChild(c);const n=a.createWithHTML(i._currentView.lineContents,"div","no-data-message",t.text.noLineDataMessage);o&&a.addClass(n,"view-switch")}else{const e=i._currentView.year,o=w.getAllSorted(i);let l=[];for(let t=i.startMonth;t<12+i.startMonth;t++){let r=t,a=e;if(i.startMonth>0&&t>11&&(r=t-12,a++),n.monthVisible(i.views.line.monthsToShow,r)){const e=s.getTotalDaysInMonth(a,r);let t=1,c=!1;for(let u=0;u<e;u++){const e=new Date(a,r,t),w=s.getWeekdayNumber(e)+1;if(n.dayVisible(i.views.line.daysToShow,w)){const e=Y(d,i,u+1,r,a,o);c||(l.push(e),c=!0)}(u+1)%7==0&&(t=0),t++}}}if(i.views.line.showInReverseOrder&&(a.reverseChildrenOrder(d),l=l.reverse()),i.views.line.showMonthNames){const o=a.create(i._currentView.lineContents,"div","line-months");let r=0;const c=c=>{let d=c+i.startMonth,u=e;if(i.startMonth>0&&d>11&&(d-=12,u++),n.monthVisible(i.views.line.monthsToShow,d)){const n=new Date(e,d,1);let c=t.text.monthNames[d];i.startMonth>0&&i.views.line.showYearsInMonthNames&&(c+=` ${u}`);let w=a.createWithHTML(o,"div","month-name",c);if(i.views.line.showInReverseOrder){let e=l[r].offsetLeft;e-=w.offsetWidth,e+=l[r].offsetWidth,w.style.left=`${e}px`}else w.style.left=`${l[r].offsetLeft}px`;s.isCurrentMonthAndYear(n)&&a.addClass(w,"current"),i.views.months.enabled&&(w.ondblclick=()=>Q(i,5,"months")),r++}};if(i.views.line.showInReverseOrder)for(let e=12;e--;)c(e);else for(let e=0;e<12;e++)c(e);o.style.width=`${d.offsetWidth}px`}q(i,i._currentView.lineContentsContainer,c),(i.views.line.keepScrollPositions||r)&&(i._currentView.lineContents.scrollLeft=i._currentView.lineContentsScrollLeft)}i._currentView.lineContentsContainer.style.display="none"}(i,u,g),i.views.chart.enabled&&3===i._currentView.view&&function(i,o,r){i._currentView.chartContents=a.create(i._currentView.element,"div","chart-contents"),i._currentView.chartContents.onscroll=()=>l.hide(i);const c=a.create(i._currentView.chartContents,"div","chart");let d=a.create(c,"div","y-labels");const u=a.create(c,"div","day-lines"),h=oe(i);let g=0;o&&a.addClass(c,"view-switch");if(h>0&&i.views.chart.showChartYLabels){const e=a.createWithHTML(d,"div","label-100",h.toString());a.createWithHTML(d,"div","label-75",(3*Math.floor(h/4)).toString()),a.createWithHTML(d,"div","label-50",Math.floor(h/2).toString()),a.createWithHTML(d,"div","label-25",Math.floor(h/4).toString()),a.createWithHTML(d,"div","label-0","0"),d.style.width=`${e.offsetWidth}px`,g=d.offsetWidth+a.getStyleValueByName(d,"margin-right",!0)}else d.parentNode.removeChild(d),d=null;if(0===h){i._currentView.chartContents.style.minHeight=`${e.DEFAULT_MINIMUM_HEIGHT}px`,c.parentNode.removeChild(c);const n=a.createWithHTML(i._currentView.chartContents,"div","no-data-message",t.text.noChartDataMessage);o&&a.addClass(n,"view-switch")}else{const e=w.getAllSorted(i),l=a.getStyleValueByName(u,"border-bottom-width",!0),c=(u.offsetHeight-l)/h,d=i._currentView.year;let m=[],y=!1;for(let t=i.startMonth;t<12+i.startMonth;t++){let r=t,l=d;if(i.startMonth>0&&t>11&&(r=t-12,l++),n.monthVisible(i.views.chart.monthsToShow,r)){const t=s.getTotalDaysInMonth(l,r);let d=1,w=!1;for(let h=0;h<t;h++){const t=new Date(l,r,d),g=s.getWeekdayNumber(t)+1;if(n.dayVisible(i.views.chart.daysToShow,g)){const t=j(u,i,h+1,r,l,e,c,o);!w&&y&&i.views.chart.addMonthSpacing&&a.create(u,"div","month-spacing",t),w||(m.push(t),w=!0)}(h+1)%7==0&&(d=0),d++}}y=!0}if(i.views.chart.showInReverseOrder&&(a.reverseChildrenOrder(u),m=m.reverse()),i.views.chart.showMonthNames){const e=a.create(i._currentView.chartContents,"div","chart-months");let o=0;const r=a.create(e,"div","month-name-space");r.style.height=`${e.offsetHeight}px`,r.style.width=`${g}px`;const l=r=>{let l=r+i.startMonth,c=d;if(i.startMonth>0&&l>11&&(l-=12,c++),n.monthVisible(i.views.chart.monthsToShow,l)){const n=new Date(d,l,1);let r=t.text.monthNames[l];i.startMonth>0&&i.views.chart.showYearsInMonthNames&&(r+=` ${c}`);let u=a.createWithHTML(e,"div","month-name",r);if(i.views.chart.showInReverseOrder){let e=m[o].offsetLeft;e-=u.offsetWidth,e+=m[o].offsetWidth,u.style.left=`${e}px`}else u.style.left=`${m[o].offsetLeft}px`;s.isCurrentMonthAndYear(n)&&a.addClass(u,"current"),i.views.months.enabled&&(u.ondblclick=()=>Q(i,5,"months")),o++}};if(i.views.chart.showInReverseOrder)for(let e=12;e--;)l(e);else for(let e=0;e<12;e++)l(e);e.style.width=`${u.offsetWidth}px`}(i.views.chart.keepScrollPositions||r)&&(i._currentView.chartContents.scrollLeft=i._currentView.chartContentsScrollLeft)}i._currentView.chartContents.style.display="none"}(i,u,g),i.views.days.enabled&&4===i._currentView.view&&function(i,o){i._currentView.daysContents=a.create(i._currentView.element,"div","days-contents");const r=a.create(i._currentView.daysContents,"div","days"),l=a.create(i._currentView.daysContents,"div","day-names");let c=a.create(r,"div","y-labels");const u=a.create(r,"div","day-lines"),h=w.getAllSorted(i),g=function(e,t){const i={values:V.largestValueForViewValues(7),valueOpacities:{},largestValue:0,totalValue:0},o=ne(e),r=e._currentView.year;for(let a=e.startMonth;a<12+e.startMonth;a++){let l=a,c=r;if(e.startMonth>0&&a>11&&(l=a-12,c++),n.monthVisible(e.views.days.monthsToShow,l)){const r=s.getTotalDaysInMonth(c,l);for(let a=0;a<r;a++){const r=s.toStorageDate(new Date(c,l,a+1));if(o.hasOwnProperty(r)){const d=new Date(c,l,a+1),u=s.getWeekdayNumber(d)+1;if(!n.holiday(e,d).matched&&n.dayVisible(e.views.days.daysToShow,u)){const s=o[r],a=w.get(e,t,s);if(!n.defined(a)||a.visible){const e=n.defined(a)?a.minimum.toString():"0";i.values[u].total+=s,i.totalValue+=s,i.largestValue=Math.max(i.largestValue,i.values[u].total),i.values[u].typeTotals.hasOwnProperty(e)||(i.values[u].typeTotals[e]=0),i.values[u].typeTotals[e]+=s}}}}}}return d.valuesToOpacitiesOrder(i),i}(i,h);!o||i.views.days.useDifferentOpacities&&i.views.days.showDayCounts||a.addClass(r,"view-switch");if(g.largestValue>0&&i.views.days.showChartYLabels){const e=a.createWithHTML(c,"div","label-100",g.largestValue.toString());a.createWithHTML(c,"div","label-75",(3*Math.floor(g.largestValue/4)).toString()),a.createWithHTML(c,"div","label-50",Math.floor(g.largestValue/2).toString()),a.createWithHTML(c,"div","label-25",Math.floor(g.largestValue/4).toString()),a.createWithHTML(c,"div","label-0","0"),c.style.width=`${e.offsetWidth}px`,l.style.paddingLeft=`${c.offsetWidth+a.getStyleValueByName(c,"margin-right",!0)}px`}else c.parentNode.removeChild(c),c=null;if(0===g.largestValue){i._currentView.daysContents.style.minHeight=`${e.DEFAULT_MINIMUM_HEIGHT}px`,r.parentNode.removeChild(r),l.parentNode.removeChild(l);const n=a.createWithHTML(i._currentView.daysContents,"div","no-days-message",t.text.noDaysDataMessage);o&&a.addClass(n,"view-switch")}else{const e=a.getStyleValueByName(u,"border-bottom-width",!0),r=(u.offsetHeight-e)/g.largestValue;for(const e in g.values)if(g.values.hasOwnProperty(e)&&n.dayVisible(i.views.days.daysToShow,parseInt(e))){const s=g.valueOpacities[g.values[e].total],c=U(u,parseInt(e),g.values[e].total,i,r,s,g.totalValue,o);if(i.views.days.showDayNames&&a.createWithHTML(l,"div","day-name",t.text.dayNames[parseInt(e)-1]),i.views.days.showStackedColorRanges)for(const t in g.values[e].typeTotals)if(g.values[e].typeTotals.hasOwnProperty(t)){const i=g.values[e].typeTotals[t]*r,o=w.getByMinimum(h,parseInt(t));if(i>0){const e=c.children.length>0?c.children[0]:null,t=a.create(c,"div","stacked-color-range",e);t.style.height=`${i}px`,n.defined(o)&&(n.definedString(o.daysCssClassName)?a.addClass(t,o.daysCssClassName):a.addClass(t,o.cssClassName))}}}i.views.days.showInReverseOrder&&(a.reverseChildrenOrder(u),a.reverseChildrenOrder(l)),i.views.days.keepScrollPositions&&(i._currentView.daysContents.scrollLeft=i._currentView.daysContentsScrollLeft)}i._currentView.daysContents.style.display="none"}(i,u),i.views.months.enabled&&5===i._currentView.view&&function(i,o){i._currentView.monthsContents=a.create(i._currentView.element,"div","months-contents");const r=a.create(i._currentView.monthsContents,"div","months"),l=a.create(i._currentView.monthsContents,"div","month-names");let c=a.create(r,"div","y-labels");const u=a.create(r,"div","month-lines"),h=w.getAllSorted(i),g=function(e,t){const i={values:V.largestValueForViewValues(12),valueOpacities:{},largestValue:0,totalValue:0},o=ne(e),r=e._currentView.year;for(let a=e.startMonth;a<12+e.startMonth;a++){let l=a,c=r;if(e.startMonth>0&&a>11&&(l=a-12,c++),n.monthVisible(e.views.months.monthsToShow,l)){const r=l+1,a=s.getTotalDaysInMonth(c,l);for(let d=0;d<a;d++){const a=s.toStorageDate(new Date(c,l,d+1));if(o.hasOwnProperty(a)){const u=new Date(c,l,d+1),h=s.getWeekdayNumber(u)+1;if(!n.holiday(e,u).matched&&n.dayVisible(e.views.days.daysToShow,h)){const s=o[a],l=w.get(e,t,s);if(!n.defined(l)||l.visible){const e=n.defined(l)?l.minimum.toString():"0";i.values[r].total+=s,i.totalValue+=s,i.largestValue=Math.max(i.largestValue,i.values[r].total),i.values[r].typeTotals.hasOwnProperty(e)||(i.values[r].typeTotals[e]=0),i.values[r].typeTotals[e]+=s}}}}}}return d.valuesToOpacitiesOrder(i),i}(i,h);!o||i.views.months.useDifferentOpacities&&i.views.months.showMonthCounts||a.addClass(r,"view-switch");if(g.largestValue>0&&i.views.months.showChartYLabels){const e=a.createWithHTML(c,"div","label-100",g.largestValue.toString());a.createWithHTML(c,"div","label-75",(3*Math.floor(g.largestValue/4)).toString()),a.createWithHTML(c,"div","label-50",Math.floor(g.largestValue/2).toString()),a.createWithHTML(c,"div","label-25",Math.floor(g.largestValue/4).toString()),a.createWithHTML(c,"div","label-0","0"),c.style.width=`${e.offsetWidth}px`,l.style.paddingLeft=`${c.offsetWidth+a.getStyleValueByName(c,"margin-right",!0)}px`}else c.parentNode.removeChild(c),c=null;if(0===g.largestValue){i._currentView.monthsContents.style.minHeight=`${e.DEFAULT_MINIMUM_HEIGHT}px`,r.parentNode.removeChild(r),l.parentNode.removeChild(l);const n=a.createWithHTML(i._currentView.monthsContents,"div","no-months-message",t.text.noMonthsDataMessage);o&&a.addClass(n,"view-switch")}else{const e=a.getStyleValueByName(u,"border-bottom-width",!0),r=(u.offsetHeight-e)/g.largestValue,c=i._currentView.year;for(let e=i.startMonth;e<12+i.startMonth;e++){let d=e,m=c;i.startMonth>0&&e>11&&(d=e-12,m++);const y=d+1;if(g.values.hasOwnProperty(y)&&n.monthVisible(i.views.months.monthsToShow,d)){const e=g.valueOpacities[g.values[y].total],m=z(u,y,g.values[y].total,i,r,e,g.totalValue,o);if(i.views.months.showMonthNames){const e=a.createWithHTML(l,"div","month-name",t.text.monthNames[d]),n=new Date(c,d,1);s.isCurrentMonthAndYear(n)&&a.addClass(e,"current")}if(i.views.months.showStackedColorRanges)for(const e in g.values[y].typeTotals)if(g.values[y].typeTotals.hasOwnProperty(e)){const t=g.values[y].typeTotals[e]*r,i=w.getByMinimum(h,parseInt(e));if(t>0){const e=m.children.length>0?m.children[0]:null,o=a.create(m,"div","stacked-color-range",e);o.style.height=`${t}px`,n.defined(i)&&(n.definedString(i.monthsCssClassName)?a.addClass(o,i.monthsCssClassName):a.addClass(o,i.cssClassName))}}}}i.views.months.showInReverseOrder&&(a.reverseChildrenOrder(u),a.reverseChildrenOrder(l)),i.views.months.keepScrollPositions&&(i._currentView.monthsContents.scrollLeft=i._currentView.monthsContentsScrollLeft)}i._currentView.monthsContents.style.display="none"}(i,u),i.views.statistics.enabled&&6===i._currentView.view&&function(i,o){i._currentView.statisticsContents=a.create(i._currentView.element,"div","statistics-contents");const r=a.create(i._currentView.statisticsContents,"div","statistics"),l=a.create(i._currentView.statisticsContents,"div","statistics-ranges");let c=a.create(r,"div","y-labels");const d=a.create(r,"div","range-lines"),u=w.getAllSorted(i),h=function(e,t){const i=ne(e),o=e._currentView.year,r=t.length,a={types:{},largestValue:0,totalValue:0};a.types[0]=0;for(let e=0;e<r;e++)a.types[t[e].minimum.toString()]=0;for(let r=e.startMonth;r<12+e.startMonth;r++){let l=r,c=o;if(e.startMonth>0&&r>11&&(l=r-12,c++),n.monthVisible(e.views.statistics.monthsToShow,l)){const o=s.getTotalDaysInMonth(c,l);for(let r=0;r<o;r++){const o=s.toStorageDate(new Date(c,l,r+1));if(i.hasOwnProperty(o)){const d=new Date(c,l,r+1),u=s.getWeekdayNumber(d)+1;if(!n.holiday(e,d).matched&&n.dayVisible(e.views.statistics.daysToShow,u)){const r=w.get(e,t,i[o]),s=n.defined(r)?r.minimum.toString():"0";a.types[s]++,a.totalValue++,a.largestValue=Math.max(a.largestValue,a.types[s])}}}}}return a}(i,u);o&&a.addClass(r,"view-switch");if(h.largestValue>0&&i.views.statistics.showChartYLabels){const e=a.createWithHTML(c,"div","label-100",h.largestValue.toString());a.createWithHTML(c,"div","label-75",(3*Math.floor(h.largestValue/4)).toString()),a.createWithHTML(c,"div","label-50",Math.floor(h.largestValue/2).toString()),a.createWithHTML(c,"div","label-25",Math.floor(h.largestValue/4).toString()),a.createWithHTML(c,"div","label-0","0"),c.style.width=`${e.offsetWidth}px`,l.style.paddingLeft=`${c.offsetWidth+a.getStyleValueByName(c,"margin-right",!0)}px`}else c.parentNode.removeChild(c),c=null;if(0===h.largestValue){i._currentView.statisticsContents.style.minHeight=`${e.DEFAULT_MINIMUM_HEIGHT}px`,r.parentNode.removeChild(r),l.parentNode.removeChild(l);const n=a.createWithHTML(i._currentView.statisticsContents,"div","no-statistics-message",t.text.noStatisticsDataMessage);o&&a.addClass(n,"view-switch")}else{const e=a.getStyleValueByName(d,"border-bottom-width",!0),t=(d.offsetHeight-e)/h.largestValue;i.views.statistics.showColorRangeLabels||l.parentNode.removeChild(l);for(const e in h.types)if(h.types.hasOwnProperty(e)){G(parseInt(e),d,h.types[e],i,u,t,h.totalValue,o);const r=w.getByMinimum(u,parseInt(e));i.views.statistics.showColorRangeLabels&&(i.views.statistics.useColorRangeNamesForLabels&&n.defined(r)&&n.definedString(r.name)?a.createWithHTML(l,"div","range-name",r.name):a.createWithHTML(l,"div","range-name",`${e}+`))}i.views.statistics.showInReverseOrder&&(a.reverseChildrenOrder(d),a.reverseChildrenOrder(l)),i.views.statistics.keepScrollPositions&&(i._currentView.statisticsContents.scrollLeft=i._currentView.statisticsContentsScrollLeft)}i._currentView.statisticsContents.style.display="none"}(i,u),function(e){const i=a.create(e._currentView.element,"div","guide"),o=a.create(i,"div","map-types"),r=ee(e);if(h[e._currentView.element.id].totalTypes>1){if(n.definedString(e.description.text)){const t=a.create(e._currentView.element,"div","description",i);X(e,t)}const s=Object.keys(h[e._currentView.element.id].typeData).sort((e,t)=>e.localeCompare(t,void 0,{numeric:!0,sensitivity:"base"})),d=s.length;for(let n=0;n<d;n++){const i=s[n];(i!==t.text.unknownTrendText||r>0)&&J(e,o,i)}if(e.guide.allowTypeAdding){const i=a.createIconButton(o,"button","add","plus");l.add(i,e,t.text.addTypeText),i.onclick=()=>function(e){(function(e){if(y.Background.render(e),!n.definedParentElement(e._currentView.typeAddingDialog)){e._currentView.typeAddingDialog=a.create(e._currentView.disabledBackground,"div","dialog add-type");const i=a.create(e._currentView.typeAddingDialog,"div","dialog-title-bar"),o=a.create(e._currentView.typeAddingDialog,"div","dialog-contents"),r=a.create(i,"div","dialog-close");a.createWithHTML(i,"span","dialog-title-bar-text",t.text.addTypeText),e._currentView.typeAddingDialogTypeInput=a.create(o,"input","input-box type"),e._currentView.typeAddingDialogTypeInput.name=crypto.randomUUID(),e._currentView.typeAddingDialogTypeInput.placeholder=t.text.typePlaceholderText;const s=a.create(o,"div","buttons"),d=a.createButton(s,"button","default",t.text.addButtonText),u=()=>{const t=e._currentView.typeAddingDialogTypeInput.value.trim(),i=e._currentView.element.id;n.definedString(t)&&!h[i].typeData.hasOwnProperty(t)?(h[i].typeData.hasOwnProperty(t)||(h[i].typeData[t]={},h[i].totalTypes++),e._currentView.type=t,c.customEvent(e.events.onAddType,e._currentView.element,t),c.customEvent(e.events.onTypeSwitch,e._currentView.element,t),N(e),M(e,!0)):N(e)};e._currentView.typeAddingDialogTypeInput.onkeydown=e=>{"Enter"===e.key&&u()},d.onclick=()=>u(),r.onclick=()=>function(e){y.Background.hide(e),n.defined(e._currentView.typeAddingDialog)&&"none"!==e._currentView.typeAddingDialog.style.display&&(e._currentView.typeAddingDialog.style.display="none");l.hide(e)}(e),l.add(r,e,t.text.closeButtonText)}})(e),y.Background.show(e),n.defined(e._currentView.typeAddingDialog)&&"block"!==e._currentView.typeAddingDialog.style.display&&(e._currentView.typeAddingDialogTypeInput.value="",e._currentView.typeAddingDialog.style.display="block",e._currentView.typeAddingDialogTypeInput.focus());l.hide(e)}(e)}}else X(e,o);if(e.guide.enabled){const n=a.create(i,"div","map-toggles");if(e.guide.showInvertLabel){const i=a.createWithHTML(n,"div","invert-text",t.text.invertText);e.guide.colorRangeTogglesEnabled?i.onclick=()=>function(e){const t=e.colorRanges.length;for(let n=0;n<t;n++)e.colorRanges[n].visible=!e.colorRanges[n].visible,c.customEvent(e.events.onColorRangeTypeToggle,e._currentView.element,e.colorRanges[n].id,e.colorRanges[n].visible);M(e)}(e):a.addClass(i,"no-click")}if(e.guide.showLessAndMoreLabels){let i=a.createWithHTML(n,"div","less-text",t.text.lessText);e.guide.colorRangeTogglesEnabled?i.onclick=()=>se(e,!1):a.addClass(i,"no-click")}const o=a.create(n,"div","days"),r=w.getAllSorted(e),s=r.length,l=[];let d=0;for(let t=0;t<s;t++){const n=Z(e,o,r[t]);d=Math.max(d,n.offsetWidth),l.push(n)}if(e.guide.showNumbersInGuide){const e=l.length;for(let t=0;t<e;t++)l[t].style.width=`${d}px`}if(e.guide.showLessAndMoreLabels){const i=a.createWithHTML(n,"div","more-text",t.text.moreText);e.guide.colorRangeTogglesEnabled?i.onclick=()=>se(e,!0):a.addClass(i,"no-click")}}}(i),p.View.set(i)}function B(e,t=!0){(t?window.addEventListener:window.removeEventListener)("blur",()=>l.hide(e))}function N(e){y.Background.hide(e),n.defined(e._currentView.exportDialog)&&"none"!==e._currentView.exportDialog.style.display&&(e._currentView.exportDialog.style.display="none"),l.hide(e)}function L(e,o=null,r=null,l=!0){const d=i.getString(o,e.exportType).toLowerCase(),u=f.File.mimeType(d),w=function(e,t){const i={},o=ne(e);if(t){const t=e._currentView.year,r=p.Days.get(e),a=p.Months.get(e);for(let l=e.startMonth;l<12+e.startMonth;l++){let c=l,d=t;if(e.startMonth>0&&l>11&&(c=l-12,d++),n.monthVisible(a,c)){const e=s.getTotalDaysInMonth(d,c);for(let t=0;t<e;t++){const e=new Date(d,c,t+1),a=s.toStorageDate(e),l=s.getWeekdayNumber(e)+1;n.dayVisible(r,l)&&o.hasOwnProperty(a)&&(i[a]=o[a])}}}}else{const e=[];for(const t in o)o.hasOwnProperty(t)&&e.push(t);e.sort();const t=e.length;for(let n=0;n<t;n++){const t=e[n];o.hasOwnProperty(t)&&(i[t]=o[t])}}return i}(e,l),h=f.Contents.get(d,w,t,e);if(n.definedString(h)){const n=a.create(document.body,"a");n.style.display="none",n.setAttribute("target","_blank"),n.setAttribute("href",`data:${u};charset=utf-8,${encodeURIComponent(h)}`),n.setAttribute("download",f.File.filename(t,e,r,d)),n.click(),document.body.removeChild(n),c.customEvent(e.events.onExport,e._currentView.element)}}function k(e){const t=[];let n;for(n in x)t.push(`.${n}`);const i=a.createWithNoContainer("input");i.type="file",i.accept=t.join(", "),i.multiple=e.allowMultipleFileImports,i.onchange=()=>A(e,i.files),i.click()}function A(n,i){if(i.length<=0)n._currentView.importDialogDragAndDrop.innerHTML=t.text.dragAndDropFilesText,n._currentView.importDialogImportButton.disabled=!0;else{n._currentView.importDialogFileList=i,n._currentView.importDialogDragAndDrop.innerHTML="",n._currentView.importDialogImportButton.disabled=!1;const o=Math.min(i.length,e.MAXIMUM_FILE_IMPORTS);for(let e=0;e<o;e++){const o=i[e].name,r=a.createWithHTML(n._currentView.importDialogDragAndDrop,"div","filename",`<b>${e+1}</b>. ${o}`),s=a.create(r,"div","remove");l.add(s,n,t.text.removeButtonText),s.onclick=()=>O(n,e)}}}function O(e,t){const n=new DataTransfer,i=e._currentView.importDialogFileList.length;for(let o=0;o<i;o++)o!==t&&n.items.add(e._currentView.importDialogFileList[o]);A(e,n.files)}function I(n,i){const o=Math.min(n.length,e.MAXIMUM_FILE_IMPORTS),r=[],s=ne(i),a=(e,t)=>{r.push(e);for(const e in t)t.hasOwnProperty(e)&&(s.hasOwnProperty(e)||(s[e]=0),s[e]+=t[e]);r.length===o&&(c.customEvent(i.events.onImport,i._currentView.element),M(i,!0))};for(let e=0;e<o;e++){const i=n[e],o=i.name.split(".").pop().toLowerCase();v.file(i,o,a,t)}}function E(e,t,n){const i=a.createWithHTML(t,"div","title-menu-item",n);return e.title.showTitleDropDownHeaders&&a.addClass(i,"indented"),i}function F(e,t,n,i){e._currentView.view===n?a.addClass(t,"title-menu-item-active"):t.onclick=()=>Q(e,n,i)}function R(e,t,n,i){let o=null;const r=0===e.startMonth?n.toString():`${n} / ${n+1}`,s=a.createWithHTML(t,"div","year-menu-item",r);return e._currentView.year!==n?(s.onclick=()=>{e._currentView.year=n,M(e),c.customEvent(e.events.onSetYear,e._currentView.element,e._currentView.year)},n===i&&a.addClass(s,"year-menu-item-current")):(a.addClass(s,"year-menu-item-active"),o=s),o}function H(e,t,n,i,o){if(o&&e.yearlyStatistics.showPercentages){const o=i/n*100;if(!isNaN(o)){const n=`${o.toFixed(e.percentageDecimalPoints)}%`,i=a.create(t,"span","percentage");a.createWithHTML(i,"span","percentage-bracket","("),a.createWithHTML(i,"span","percentage-text",n),a.createWithHTML(i,"span","percentage-bracket",")")}}}function W(e,t,i,o,r){let a=0,l=new Date(o);for(;l<r;){const o=ne(e)[s.toStorageDate(l)],r=s.getWeekdayNumber(l)+1;n.monthVisible(i,l.getMonth())&&n.dayVisible(t,r)&&n.definedNumber(o)&&(a+=o),l.setDate(l.getDate()+1)}return a}function $(e,t,i){const o=7-i.children.length;if(o>0&&o<7)for(let r=0;r<o;r++){if(n.dayVisible(e.views.map.daysToShow,t)){const t=a.create(i,"div","day-disabled");e.views.map.showSpacing||a.addClass(t,"no-spacing")}t++}e.views.map.showDaysInReverseOrder&&a.reverseChildrenOrder(i)}function P(r,l,d,u,h,g){const m=d+1,y=a.create(l,"div","day"),p=new Date(h,u,m),v=n.holiday(r,p);let f=ne(r)[s.toStorageDate(p)];if(f=i.getNumber(f,0),y.setAttribute(e.HEAT_JS_MAP_DATE_ATTRIBUTE_NAME,`${o.padNumber(m)}-${o.padNumber(u+1)}-${h}`),r.views.map.showToolTips&&K(r,y,p,f,r.views.map.dayToolTipText,r.events.onMapDayToolTipRender,v.matched,r.views.map.showCountsInToolTips),r.views.map.showSpacing||a.addClass(y,"no-spacing"),r.views.map.showDayDateNumbers){const e=a.createWithHTML(y,"div","count-date",m.toString());a.createWithHTML(e,"sup","",s.getDayOrdinal(t,m))}r.views.map.showDayCounts&&f>0&&a.createWithHTML(y,"div","count",o.friendlyNumber(f)),n.definedFunction(r.events.onMapDayClick)?y.onclick=()=>c.customEvent(r.events.onMapDayClick,r._currentView.element,p,f,v.matched):n.definedFunction(r.events.onMapDayDblClick)?y.ondblclick=()=>c.customEvent(r.events.onMapDayDblClick,r._currentView.element,p,f,v.matched):a.addClass(y,"no-hover");const T=w.get(r,g,f,p);return n.defined(T)&&w.isVisible(r,T.id)&&(n.definedString(T.mapCssClassName)?a.addClass(y,T.mapCssClassName):a.addClass(y,T.cssClassName)),r.views.map.highlightCurrentDay&&s.isToday(p)&&a.addClass(y,"today"),y}function Y(t,r,l,d,u,h){const g=new Date(u,d,l),m=a.create(t,"div","day-line"),y=n.holiday(r,g);let p=ne(r)[s.toStorageDate(g)];p=i.getNumber(p,0),m.setAttribute(e.HEAT_JS_LINE_DATE_ATTRIBUTE_NAME,`${o.padNumber(l)}-${o.padNumber(d+1)}-${u}`),r.views.line.showToolTips&&K(r,m,g,p,r.views.line.dayToolTipText,r.events.onLineDayToolTipRender,y.matched,r.views.line.showCountsInToolTips),n.definedFunction(r.events.onLineDayClick)?m.onclick=()=>c.customEvent(r.events.onLineDayClick,r._currentView.element,g,p,y.matched):n.definedFunction(r.events.onLineDayDblClick)?m.ondblclick=()=>c.customEvent(r.events.onLineDayDblClick,r._currentView.element,g,p,y.matched):a.addClass(m,"no-hover");const v=w.get(r,h,p,g);return n.defined(v)&&w.isVisible(r,v.id)&&(n.definedString(v.lineCssClassName)?a.addClass(m,v.lineCssClassName):a.addClass(m,v.cssClassName)),m}function j(r,l,d,u,h,g,m,y){const p=new Date(h,u,d),v=a.create(r,"div","day-line"),f=n.holiday(l,p);let b=ne(l)[s.toStorageDate(p)];if(b=i.getNumber(b,0),v.setAttribute(e.HEAT_JS_CHART_DATE_ATTRIBUTE_NAME,`${o.padNumber(d)}-${o.padNumber(u+1)}-${h}`),l.views.chart.showToolTips&&K(l,v,p,b,l.views.chart.dayToolTipText,l.events.onChartDayToolTipRender,f.matched,l.views.chart.showCountsInToolTips),(l.views.chart.showLineCounts||l.views.chart.showLineDateNumbers)&&a.addClass(v,"day-line-count"),l.views.chart.showLineDateNumbers){const e=a.createWithHTML(v,"div","count-date",d.toString());a.createWithHTML(e,"sup","",s.getDayOrdinal(t,d))}l.views.chart.showLineCounts&&b>0&&a.createWithHTML(v,"div","count",o.friendlyNumber(b));const V=b*m;V<=0&&(v.style.visibility="hidden"),n.definedFunction(l.events.onChartDayClick)?v.onclick=()=>c.customEvent(l.events.onChartDayClick,l._currentView.element,p,b,f.matched):n.definedFunction(l.events.onChartDayDblClick)?v.ondblclick=()=>c.customEvent(l.events.onChartDayDblClick,l._currentView.element,p,b,f.matched):a.addClass(v,"no-hover");const x=w.get(l,g,b,p);return n.defined(x)&&w.isVisible(l,x.id)&&(n.definedString(x.chartCssClassName)?a.addClass(v,x.chartCssClassName):a.addClass(v,x.cssClassName)),l.views.chart.highlightCurrentDay&&s.isToday(p)&&a.addClass(v,"today"),l.views.chart.useGradients&&a.addGradientEffect(l._currentView.element,v),T.setHeight(l,v,V,y),v}function U(t,i,r,s,u,w,h,g){const m=a.create(t,"div","day-line"),y=r*u;let p=null;if(m.setAttribute(e.HEAT_JS_DAY_NUMBER_ATTRIBUTE_NAME,i.toString()),y<=0&&(m.style.visibility="hidden"),s.views.days.showStackedColorRanges?a.addClass(m,"stacked"):a.addClass(m,"non-stacked"),s.views.days.showToolTips&&l.add(m,s,o.friendlyNumber(r)),n.definedFunction(s.events.onWeekDayClick)?m.onclick=()=>c.customEvent(s.events.onWeekDayClick,s._currentView.element,i,r,s._currentView.year):n.definedFunction(s.events.onWeekDayDblClick)?m.ondblclick=()=>c.customEvent(s.events.onWeekDayDblClick,s._currentView.element,i,r,s._currentView.year):a.addClass(m,"no-hover"),s.views.days.showDayCounts&&r>0&&(a.addClass(m,"day-line-count"),p=a.createWithHTML(m,"div","count",o.friendlyNumber(r)),s.views.days.showDayCountPercentages&&a.createWithHTML(p,"div","percentage",`${(r/h*100).toFixed(s.percentageDecimalPoints)}%`)),!s.views.days.showStackedColorRanges)if(s.views.days.useGradients)a.addGradientEffect(s._currentView.element,m),n.defined(p)&&a.addClass(p,"blend-colors");else if(s.views.days.useDifferentOpacities){const e=a.getStyleValueByName(m,"background-color"),t=a.getStyleValueByName(m,"border-color");n.defined(p)&&a.addClass(p,"blend-colors"),n.rgbColor(e)?m.style.backgroundColor=d.toRgbOpacityColor(e,w):n.hexColor(e)&&(m.style.backgroundColor=d.toRgbOpacityColor(d.hexToRgba(e),w)),n.rgbColor(t)?m.style.borderColor=d.toRgbOpacityColor(t,w):n.hexColor(t)&&(m.style.borderColor=d.toRgbOpacityColor(d.hexToRgba(t),w))}return T.setHeight(s,m,y,g),m}function z(t,i,r,s,u,w,h,g){const m=a.create(t,"div","month-line"),y=r*u,p=new Date;let v=null;m.setAttribute(e.HEAT_JS_MONTH_NUMBER_ATTRIBUTE_NAME,i.toString()),s.views.months.showStackedColorRanges?a.addClass(m,"stacked"):a.addClass(m,"non-stacked"),y<=0&&(m.style.visibility="hidden"),s.views.months.showToolTips&&l.add(m,s,o.friendlyNumber(r));let f=s._currentView.year;if(s.startMonth>0&&i-1<s.startMonth&&f++,n.definedFunction(s.events.onMonthClick)?m.onclick=()=>c.customEvent(s.events.onMonthClick,s._currentView.element,i,r,f):n.definedFunction(s.events.onMonthDblClick)?m.ondblclick=()=>c.customEvent(s.events.onMonthDblClick,s._currentView.element,i,r,f):a.addClass(m,"no-hover"),s.views.months.showMonthCounts&&r>0&&(a.addClass(m,"month-line-count"),v=a.createWithHTML(m,"div","count",o.friendlyNumber(r)),s.views.months.showMonthCountPercentages&&a.createWithHTML(v,"div","percentage",`${(r/h*100).toFixed(s.percentageDecimalPoints)}%`)),s.views.months.highlightCurrentMonth&&p.getMonth()===i-1&&s._currentView.year===p.getFullYear()&&a.addClass(m,"today"),!s.views.months.showStackedColorRanges)if(s.views.months.useGradients)a.addGradientEffect(s._currentView.element,m),n.defined(v)&&a.addClass(v,"blend-colors");else if(s.views.months.useDifferentOpacities){const e=a.getStyleValueByName(m,"background-color"),t=a.getStyleValueByName(m,"border-color");n.defined(v)&&a.addClass(v,"blend-colors"),n.rgbColor(e)?m.style.backgroundColor=d.toRgbOpacityColor(e,w):n.hexColor(e)&&(m.style.backgroundColor=d.toRgbOpacityColor(d.hexToRgba(e),w)),n.rgbColor(t)?m.style.borderColor=d.toRgbOpacityColor(t,w):n.hexColor(t)&&(m.style.borderColor=d.toRgbOpacityColor(d.hexToRgba(t),w))}return T.setHeight(s,m,y,g),m}function G(t,i,r,s,d,u,h,g){const m=a.create(i,"div","range-line"),y=w.getByMinimum(d,t),p=r*u;if(n.defined(y)&&n.definedString(y.name)&&m.setAttribute(e.HEAT_JS_STATISTICS_COLOR_RANGE_NAME_ATTRIBUTE_NAME,y.name),p<=0&&(m.style.visibility="hidden"),s.views.statistics.showToolTips){let e;e=n.defined(y)&&n.definedString(y.name)&&s.views.statistics.showRangeNamesInToolTips?`${y.name}: <b class="tooltip-count">${o.friendlyNumber(r)}</b>`:o.friendlyNumber(r),l.add(m,s,e)}if(s.views.statistics.showRangeCounts&&r>0){a.addClass(m,"range-line-count");const e=a.createWithHTML(m,"div","count",o.friendlyNumber(r));s.views.statistics.showRangeCountPercentages&&a.createWithHTML(e,"div","percentage",`${(r/h*100).toFixed(s.percentageDecimalPoints)}%`)}n.definedFunction(s.events.onStatisticClick)?m.onclick=()=>c.customEvent(s.events.onStatisticClick,s._currentView.element,y,r,s._currentView.year):n.definedFunction(s.events.onStatisticDblClick)?m.ondblclick=()=>c.customEvent(s.events.onStatisticDblClick,y,r,s._currentView.year):a.addClass(m,"no-hover"),n.defined(y)&&w.isVisible(s,y.id)&&(n.definedString(y.statisticsCssClassName)?a.addClass(m,y.statisticsCssClassName):a.addClass(m,y.cssClassName)),s.views.statistics.useGradients&&a.addGradientEffect(s._currentView.element,m),T.setHeight(s,m,p,g)}function J(e,n,i){const o=a.createButton(n,"button","type",i);if(e.guide.allowTypeRemoving){const n=a.create(o,"span","clear");l.add(n,e,t.text.removeTypeText),n.onclick=t=>{a.cancelBubble(t),ie(e,i),M(e,!0)}}e._currentView.type===i&&a.addClass(o,"active"),o.onclick=()=>{e._currentView.type!==i&&(e._currentView.type=i,c.customEvent(e.events.onTypeSwitch,e._currentView.element,i),M(e))}}function Z(e,t,n){const o=a.create(t,"div");return o.className="day",e.guide.showToolTips&&l.add(o,e,n.tooltipText),w.isVisible(e,n.id)&&a.addClass(o,w.getGuideCssClassName(e,n)),e.guide.showNumbersInGuide&&(a.addClass(o,"day-number"),o.innerHTML=`${n.minimum}+`),e.guide.colorRangeTogglesEnabled?o.onclick=()=>function(e,t){const n=e.colorRanges.length;for(let o=0;o<n;o++){const n=e.colorRanges[o];if(n.id===t){n.visible=!i.getBoolean(n.visible,!0),c.customEvent(e.events.onColorRangeTypeToggle,e._currentView.element,n.id,n.visible),M(e,!1,!1,!0);break}}}(e,n.id):a.addClass(o,"no-hover"),o}function X(e,t){if(n.definedString(e.description.text))if(n.definedString(e.description.url)){const n=a.createWithHTML(t,"a","label",e.description.text);n.href=e.description.url,n.target=e.description.urlTarget}else a.createWithHTML(t,"span","label",e.description.text)}function q(e,i,r){if(e.zooming.enabled){const s=a.create(i,"div","zooming"),d=a.create(s,"div","zoom-close-button"),w=a.createIconButton(s,"button","zoom-out","minus"),h=a.createWithHTML(s,"span","zoom-level",`+${o.friendlyNumber(10*e._currentView.zoomLevel)}%`),g=a.createIconButton(s,"button","zoom-in","plus"),m=a.getStyleValueByName(document.documentElement,u.Variables.Spacing,!0);l.add(d,e,t.text.closeButtonText),l.add(g,e,t.text.zoomInText),l.add(w,e,t.text.zoomOutText),s.style.bottom=i.offsetHeight-r.offsetHeight+"px",-1===e._currentView.zoomLevel&&(e._currentView.zoomLevel=0,h.innerText=`+${o.friendlyNumber(10*e._currentView.zoomLevel)}%`),n.defined(e._currentView.mapContents)&&(e._currentView.mapContents.style.paddingRight=`${s.offsetWidth+m}px`),d.onclick=()=>{e.zooming.enabled=!1,e._currentView.mapContents.style.paddingRight="0px",s.parentNode.removeChild(s)},w.disabled=0===e._currentView.zoomLevel,w.onclick=()=>function(e){if(e._currentView.zoomLevel>0){const t=a.getStyleValueByNameSizingMetic(document.documentElement,u.Variables.DaySize),n=a.getStyleValueByNameSizingMetic(document.documentElement,u.Variables.LineWidth);let i=a.getStyleValueByName(e._currentView.element,u.Variables.DaySize,!0),o=a.getStyleValueByName(e._currentView.element,u.Variables.LineWidth,!0);i-=e._currentView.mapZoomIncrement,i=parseFloat(i.toFixed(1)),o-=e._currentView.lineZoomIncrement,o=parseFloat(o.toFixed(1)),e._currentView.zoomLevel--,e._currentView.element.style.setProperty(u.Variables.DaySize,`${i}${t}`),e._currentView.element.style.setProperty(u.Variables.LineWidth,`${o}${n}`),e._currentView.dayWidth=0,c.customEvent(e.events.onZoomLevelChange,e._currentView.element,e._currentView.zoomLevel),M(e,!1,!1,!0)}}(e),g.disabled=e.zooming.maximumLevel>0&&e._currentView.zoomLevel>=e.zooming.maximumLevel,g.onclick=()=>function(e){if(0===e.zooming.maximumLevel||e._currentView.zoomLevel<e.zooming.maximumLevel){const t=a.getStyleValueByNameSizingMetic(document.documentElement,u.Variables.DaySize),n=a.getStyleValueByNameSizingMetic(document.documentElement,u.Variables.LineWidth);let i=a.getStyleValueByName(e._currentView.element,u.Variables.DaySize,!0),o=a.getStyleValueByName(e._currentView.element,u.Variables.LineWidth,!0);i+=e._currentView.mapZoomIncrement,i=parseFloat(i.toFixed(1)),o+=e._currentView.lineZoomIncrement,o=parseFloat(o.toFixed(1)),e._currentView.zoomLevel++,e._currentView.element.style.setProperty(u.Variables.DaySize,`${i}${t}`),e._currentView.element.style.setProperty(u.Variables.LineWidth,`${o}${n}`),e._currentView.dayWidth=0,c.customEvent(e.events.onZoomLevelChange,e._currentView.element,e._currentView.zoomLevel),M(e,!1,!1,!0)}}(e)}}function K(e,i,r,a,d,u,w,h){if(n.definedFunction(u))l.add(i,e,c.customEvent(u,e._currentView.element,r,a,w));else{let c=s.getCustomFormattedDateText(t,d,r);if(e.showHolidaysInDayToolTips){let t=n.holiday(e,r);t.matched&&n.definedString(t.name)&&(c+=`: ${t.name}`)}h&&(c+=`: <b class="tooltip-count">${o.friendlyNumber(a)}</b>`),l.add(i,e,c)}}function Q(e,t,n){e._currentView.view=t,c.customEvent(e.events.onViewSwitch,e._currentView.element,n),M(e,!1,!0)}function ee(e){let n=0;for(const i in h[e._currentView.element.id].typeData[t.text.unknownTrendText])if(h[e._currentView.element.id].typeData[t.text.unknownTrendText].hasOwnProperty(i)){n++;break}return n}function te(e,n,i=!0){h[e]={options:n,typeData:{},totalTypes:1},h[e].typeData[t.text.unknownTrendText]={},i&&!n._currentView.isInFetchMode&&b.load(t,n,h[e])}function ne(e){return h[e._currentView.element.id].typeData[e._currentView.type]}function ie(e,t){delete h[e._currentView.element.id].typeData[t],h[e._currentView.element.id].totalTypes--;const n=Object.keys(h[e._currentView.element.id].typeData).sort((e,t)=>e.localeCompare(t,void 0,{numeric:!0,sensitivity:"base"}));e._currentView.type=n[0],c.customEvent(e.events.onRemoveType,e._currentView.element,t)}function oe(e){let t=0;const i=ne(e),o=e._currentView.year;for(let r=e.startMonth;r<12+e.startMonth;r++){let a=r,l=o;if(e.startMonth>0&&r>11&&(a=r-12,l++),n.monthVisible(e.views.chart.monthsToShow,a)){const o=s.getTotalDaysInMonth(l,a);for(let r=0;r<o;r++){const o=new Date(l,a,r+1),c=s.toStorageDate(o),d=s.getWeekdayNumber(o)+1;i.hasOwnProperty(c)&&n.dayVisible(e.views.chart.daysToShow,d)&&(t=Math.max(t,i[c]))}}}return t}function re(e){const i=e._currentView.element.id,o=c.customEvent(e.events.onDataFetch,e._currentView.element,i);if(n.definedObject(o)){te(i,e,!1);for(const e in o)o.hasOwnProperty(e)&&(h[i].typeData[t.text.unknownTrendText].hasOwnProperty(e)||(h[i].typeData[t.text.unknownTrendText][e]=0),h[i].typeData[t.text.unknownTrendText][e]+=o[e])}}function se(e,t){if(e.guide.useIncrementToggles){const n=w.getAllSorted(e),i=n.length;if(t)for(let e=0;e<i;e++){const t=n[e];if(!t.visible){t.visible=!0;break}}else for(let e=i;e--;){const t=n[e];if(t.visible){t.visible=!1;break}}}else{const n=e.colorRanges.length;for(let i=0;i<n;i++)e.colorRanges[i].visible=t,c.customEvent(e.events.onColorRangeTypeToggle,e._currentView.element,e.colorRanges[i].id,t)}M(e,!1,!1,!0)}function ae(e,t=!0){let i=!0,o=e._currentView.year;for(o--;!n.yearVisible(e,o);){if(n.firstVisibleYear(e,o)){i=!1;break}o--}i&&(e._currentView.year=o,M(e),t&&c.customEvent(e.events.onBackYear,e._currentView.element,e._currentView.year))}function le(e,t=!0){let i=!0,o=e._currentView.year;for(o++;!n.yearVisible(e,o);){if(n.lastVisibleYear(e,o)){i=!1;break}o++}i&&(e._currentView.year=o,M(e),t&&c.customEvent(e.events.onNextYear,e._currentView.element,e._currentView.year))}function ce(e){e._currentView.element.innerHTML="",e._currentView.isInFetchMode&&n.defined(e._currentView.isInFetchModeTimer)&&clearInterval(e._currentView.isInFetchModeTimer),a.removeClass(e._currentView.element,"heat-js"),l.remove(e),c.customEvent(e.events.onDestroy,e._currentView.element)}function de(){if(t.observationMode){if(!n.defined(r)){r=new MutationObserver((e,t)=>{ue.renderAll()});const e={attributes:!0,childList:!0,subtree:!0};r.observe(document.body,e)}}else r.disconnect(),r=null}const ue={addType:function(e,t,i=!0){if(n.definedString(e)&&n.definedString(t)&&h.hasOwnProperty(e)){const n=h[e].options;n._currentView.isInFetchMode||h[e].typeData.hasOwnProperty(t)||(h[e].typeData.hasOwnProperty(t)||(h[e].typeData[t]={},h[e].totalTypes++),c.customEvent(n.events.onAddType,n._currentView.element,t),i&&M(n,!0))}return ue},removeType:function(e,t,i=!0){if(n.definedString(e)&&n.definedString(t)&&h.hasOwnProperty(e)){const n=h[e].options;n._currentView.isInFetchMode||h[e].typeData.hasOwnProperty(t)||(ie(n,t),i&&M(n,!0))}return ue},addDates:function(e,o,r=null,s=!0){if(n.definedString(e)&&n.definedArray(o)&&h.hasOwnProperty(e)){const n=h[e].options;if(!n._currentView.isInFetchMode){r=i.getString(r,t.text.unknownTrendText);const a=o.length;for(let t=0;t<a;t++)ue.addDate(e,o[t],r,!1);s&&M(n,!0)}}return ue},addDate:function(e,o,r=null,a=!0){if(n.definedString(e)&&n.definedDate(o)&&h.hasOwnProperty(e)){const n=h[e].options;if(!n._currentView.isInFetchMode){r=i.getString(r,t.text.unknownTrendText);const l=s.toStorageDate(o);h[e].typeData.hasOwnProperty(r)||(h[e].typeData[r]={},h[e].totalTypes++),h[e].typeData[r].hasOwnProperty(l)||(h[e].typeData[r][l]=0),h[e].typeData[r][l]++,c.customEvent(n.events.onAdd,n._currentView.element),a&&M(n,!0)}}return ue},updateDate:function(e,o,r,a=null,l=!0){if(n.definedString(e)&&n.definedDate(o)&&h.hasOwnProperty(e)){const n=h[e].options;if(!n._currentView.isInFetchMode&&r>0){const d=s.toStorageDate(o);h[e].typeData.hasOwnProperty(a)&&(a=i.getString(a,t.text.unknownTrendText),h[e].typeData[a][d]=r,c.customEvent(n.events.onUpdate,n._currentView.element),l&&M(n,!0))}}return ue},removeDates:function(e,o,r=null,s=!0){if(n.definedString(e)&&n.definedArray(o)&&h.hasOwnProperty(e)){const n=h[e].options;if(!n._currentView.isInFetchMode){r=i.getString(r,t.text.unknownTrendText);const a=o.length;for(let t=0;t<a;t++)ue.removeDate(e,o[t],r,!1);s&&M(n,!0)}}return ue},removeDate:function(e,o,r=null,a=!0){if(n.definedString(e)&&n.definedDate(o)&&h.hasOwnProperty(e)){const n=h[e].options;if(!n._currentView.isInFetchMode){const l=s.toStorageDate(o);h[e].typeData.hasOwnProperty(r)&&h[e].typeData[r].hasOwnProperty(l)&&(r=i.getString(r,t.text.unknownTrendText),h[e].typeData[r][l]>0&&h[e].typeData[r][l]--,c.customEvent(n.events.onRemove,n._currentView.element),a&&M(n,!0))}}return ue},clearDate:function(e,o,r=null,a=!0){if(n.definedString(e)&&n.definedDate(o)&&h.hasOwnProperty(e)){const n=h[e].options;if(!n._currentView.isInFetchMode){const l=s.toStorageDate(o);h[e].typeData.hasOwnProperty(r)&&h[e].typeData[r].hasOwnProperty(l)&&(r=i.getString(r,t.text.unknownTrendText),delete h[e].typeData[r][l],c.customEvent(n.events.onClear,n._currentView.element),a&&M(n,!0))}}return ue},resetAll:function(e=!0){for(const t in h)h.hasOwnProperty(t)&&ue.reset(t,e);return ue},reset:function(e,i=!0){if(n.definedString(e)&&h.hasOwnProperty(e)){const n=h[e].options;n._currentView.isInFetchMode||(n._currentView.type=t.text.unknownTrendText,te(e,n,!1),c.customEvent(n.events.onReset,n._currentView.element),i&&M(n,!0))}return ue},import:function(e,t=null){return n.definedString(e)&&h.hasOwnProperty(e)&&(n.definedArray(t)?I(t,h[e].options):k(h[e].options)),ue},export:function(e,t=null){if(n.definedString(e)&&h.hasOwnProperty(e)){const n=h[e].options;L(n,t,null,n.exportOnlyDataBeingViewed)}return ue},refresh:function(e){if(n.definedString(e)&&h.hasOwnProperty(e)){const t=h[e].options;M(t,!0),c.customEvent(t.events.onRefresh,t._currentView.element)}return ue},refreshAll:function(){for(const e in h)if(h.hasOwnProperty(e)){const t=h[e].options;M(t,!0),c.customEvent(t.events.onRefresh,t._currentView.element)}return ue},setYear:function(e,t){if(n.definedString(e)&&n.definedNumber(t)&&h.hasOwnProperty(e)){const i=h[e].options;i._currentView.year=t,n.yearVisible(i,i._currentView.year)?M(i):le(i,!1),c.customEvent(i.events.onSetYear,i._currentView.element,i._currentView.year)}return ue},setYearToHighest:function(e){if(n.definedString(e)&&h.hasOwnProperty(e)){const t=h[e].options,i=ne(t);let o=0;for(const e in i)i.hasOwnProperty(e)&&(o=Math.max(o,parseInt(s.getStorageDateYear(e))));o>0&&(t._currentView.year=o,n.yearVisible(t,t._currentView.year)?M(t):le(t,!1),c.customEvent(t.events.onSetYear,t._currentView.element,t._currentView.year))}return ue},setYearToLowest:function(e){if(n.definedString(e)&&h.hasOwnProperty(e)){const t=h[e].options,i=ne(t);let o=9999;for(const e in i)i.hasOwnProperty(e)&&(o=Math.min(o,parseInt(s.getStorageDateYear(e))));o<9999&&(t._currentView.year=o,n.yearVisible(t,t._currentView.year)?M(t):ae(t,!1),c.customEvent(t.events.onSetYear,t._currentView.element,t._currentView.year))}return ue},moveToPreviousYear:function(e){return n.definedString(e)&&h.hasOwnProperty(e)&&ae(h[e].options),ue},moveToNextYear:function(e){return n.definedString(e)&&h.hasOwnProperty(e)&&le(h[e].options),ue},moveToCurrentYear:function(e){if(n.definedString(e)&&h.hasOwnProperty(e)){const t=h[e].options;t._currentView.year=(new Date).getFullYear(),n.yearVisible(t,t._currentView.year)?M(t):le(t,!1),c.customEvent(t.events.onSetYear,t._currentView.element,t._currentView.year)}return ue},getYear:function(e){let t=-1;return n.definedString(e)&&h.hasOwnProperty(e)&&(t=h[e].options._currentView.year),t},render:function(e,i){return n.definedObject(e)&&n.definedObject(i)&&S(g.Options.getForNewInstance(t,i,e)),ue},renderAll:function(){return C(),ue},switchView:function(e,t){if(n.definedString(e)&&n.definedString(t)&&h.hasOwnProperty(e)){const n=h[e].options;let i=p.View.get(t);0!==i&&n._currentView.view!==i&&Q(n,i,t)}return ue},switchType:function(e,t){if(n.definedString(e)&&n.definedString(t)&&h.hasOwnProperty(e)&&h[e].typeData.hasOwnProperty(t)){const n=h[e].options;n._currentView.type!==t&&(n._currentView.type=t,c.customEvent(n.events.onTypeSwitch,n._currentView.element,t),M(n))}return ue},updateOptions:function(e,t){if(n.definedString(e)&&n.definedObject(t)&&h.hasOwnProperty(e)){const t=h[e].options,n=g.Options.get(t);let i=!1;for(const e in n)n.hasOwnProperty(e)&&t.hasOwnProperty(e)&&t[e]!==n[e]&&(t[e]=n[e],i=!0);i&&(M(t,!0),c.customEvent(t.events.onRefresh,t._currentView.element),c.customEvent(t.events.onOptionsUpdate,t._currentView.element,t))}return ue},getActiveView:function(e){let t="";return n.definedString(e)&&h.hasOwnProperty(e)&&(t=p.View.getName(h[e].options)),t},destroyAll:function(){for(const e in h)h.hasOwnProperty(e)&&ce(h[e].options);return h={},ue},destroy:function(e){return n.definedString(e)&&h.hasOwnProperty(e)&&(ce(h[e].options),delete h[e]),ue},setConfiguration:function(e,i=!0){if(n.definedObject(e)){const n=t,o=e;let r=!1;for(const e in o)o.hasOwnProperty(e)&&t.hasOwnProperty(e)&&n[e]!==o[e]&&(n[e]=o[e],r=!0);r&&(t=m.Options.get(n),de(),i&&ue.refreshAll())}return ue},getIds:function(){const e=[];for(const t in h)h.hasOwnProperty(t)&&e.push(t);return e},getVersion:function(){return"5.0.0"}};t=m.Options.get(),document.addEventListener("DOMContentLoaded",()=>{de(),C()}),window.addEventListener("pagehide",()=>function(){for(const e in h)if(h.hasOwnProperty(e)){const t=h[e].options;B(t,!1),n.defined(t._currentView.isInFetchModeTimer)&&(clearInterval(t._currentView.isInFetchModeTimer),t._currentView.isInFetchModeTimer=0)}t.observationMode&&n.defined(r)&&(r.disconnect(),r=null)}()),n.defined(window.$heat)||(window.$heat=ue)})();