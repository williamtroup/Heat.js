/*! Heat.js v3.0.0 | (c) Bunoon 2024 | MIT License */
(function(){function Ba(){for(var a=h.domElementTypes,b=a.length,c=0;c<b;c++){var d=H.getElementsByTagName(a[c]);d=[].slice.call(d);for(var e=d.length,f=0;f<e;f++){var g=d[f],l=!0;if(v(g)&&g.hasAttribute("data-heat-options")){var n=g.getAttribute("data-heat-options");u(n)?(n=pa(n),n.parsed&&I(n.result)?Ca(Da(n.result,g)):h.safeMode||(console.error(h.attributeNotValidErrorText.replace("{{attribute_name}}","data-heat-options")),l=!1)):h.safeMode||(console.error(h.attributeNotSetErrorText.replace("{{attribute_name}}",
"data-heat-options")),l=!1)}if(!l)break}}}function Da(a,b){a=Ea(a);var c=u(a.view)?a.view.toLowerCase():r.empty;a.currentView={};a.currentView.element=b;a.currentView.disabledBackground=null;a.currentView.configurationDialog=null;a.currentView.dayCheckBoxes={};a.currentView.monthCheckBoxes={};a.currentView.tooltip=null;a.currentView.tooltipTimer=null;a.currentView.mapContents=null;a.currentView.mapContentsScrollLeft=0;a.currentView.year=a.year;a.currentView.type=h.unknownTrendText;a.currentView.isInFetchMode=
P(a.onDataFetch);a.currentView.isInFetchModeTimer=null;a.currentView.yearsAvailable=[];a.views.chart.enabled&&(a.currentView.chartContents=null,a.currentView.chartContentsScrollLeft=0);a.views.statistics.enabled&&(a.currentView.statisticsContents=null,a.currentView.statisticsContentsScrollLeft=0);a.currentView.view="map"===c?1:"chart"===c?2:"statistics"===c?3:1;return a}function Ca(a){y(a.onBeforeRender,a.currentView.element);u(a.currentView.element.id)||(a.currentView.element.id=X());a.currentView.element.className.trim()===
r.empty?a.currentView.element.className="heat-js":z(a.currentView.element,"heat-js");a.currentView.element.removeAttribute("data-heat-options");qa(a.currentView.element.id,a);A(a);y(a.onRenderComplete,a.currentView.element)}function A(a,b,c){b=p(b,!1);c=p(c,!1);if(b&&a.useLocalStorageForData&&D.localStorage){b=a.currentView.element.id;if(a.useLocalStorageForData&&D.localStorage){for(var d=D.localStorage.length,e=[],f=a.currentView.element.id,g=0;g<d;g++)Fa(D.localStorage.key(g),"HJS_"+f)&&e.push(D.localStorage.key(g));
d=e.length;for(f=0;f<d;f++)D.localStorage.removeItem(e[f])}e=ha.stringify(k[b].type);D.localStorage.setItem("HJS_"+b,e)}v(a.currentView.mapContents)&&(a.currentView.mapContentsScrollLeft=a.currentView.mapContents.scrollLeft);a.views.chart.enabled&&v(a.currentView.chartContents)&&(a.currentView.chartContentsScrollLeft=a.currentView.chartContents.scrollLeft);a.views.statistics.enabled&&v(a.currentView.statisticsContents)&&(a.currentView.statisticsContentsScrollLeft=a.currentView.statisticsContents.scrollLeft);
a.currentView.element.innerHTML=r.empty;a.currentView.yearsAvailable=Pa(a);Y(a);Qa(a);a.showConfigurationButton&&(a.currentView.disabledBackground=q(a.currentView.element,"div","disabled"),Ra(a));Sa(a);Ta(a);e=c;a.currentView.mapContents=q(a.currentView.element,"div","map-contents");a.views.chart.enabled&&(a.currentView.chartContents=q(a.currentView.element,"div","chart-contents"),ra(a.currentView.chartContents,a));a.views.statistics.enabled&&(a.currentView.statisticsContents=q(a.currentView.element,
"div","statistics-contents"),ra(a.currentView.statisticsContents,a));Ua(a);if(b=a.views.map.showNoDataMessageWhenDataIsNotAvailable){b=!1;d=N(a);f=a.currentView.year.toString();for(var l in d)if(d.hasOwnProperty(l)&&l.split(r.dash)[0]===f){b=!0;break}b=!b}if(b)l=w(a.currentView.mapContents,"div","no-data-message",h.noMapDataMessage),e&&z(l,"view-switch");else{a.currentView.mapContents.style.minHeight="unset";ra(a.currentView.mapContents,a);d=q(a.currentView.mapContents,"div","map");l=a.currentView.year;
b=!1;e&&z(d,"view-switch");if(a.views.map.showDayNames){e=q(d,"div","days");f=a.views.map.showMinimalDayNames&&7===a.views.map.daysToShow.length;if(!a.views.map.showMonthNames||a.views.map.placeMonthNamesOnTheBottom)e.className="days-months-bottom";for(g=0;7>g;g++)a.views.map.daysToShow.indexOf(g+1)>L.notFound&&w(e,"div","day-name",f&&0!==g%3?r.space:h.dayNames[g]);a.views.map.showDaysInReverseOrder&&S(e)}e=q(d,"div","months");d=ia(a);for(f=0;12>f;f++)if(ca(a.views.map.monthsToShow,f)){g=q(e,"div",
"month");var n=q(g,"div","day-columns");var x=da(l,f),B=q(n,"div","day-column"),E=!1,J=sa(new Date(l,f,1)),F=1;x+=J;for(var G=0;G<x;G++){G>=J?E=!0:a.views.map.daysToShow.indexOf(F)>L.notFound&&q(B,"div","day-disabled");if(E){var M=null;a.views.map.daysToShow.indexOf(F)>L.notFound&&(M=Va(a,B,G-J,f,l,d));if(0===(G+1)%7&&(a.views.map.showDaysInReverseOrder&&S(B),B=q(n,"div","day-column"),F=0,!v(Z)&&v(M))){var Wa=ja(M,"margin-left",!0),Xa=ja(M,"margin-right",!0);Z=M.offsetWidth+Wa+Xa}}F++}a.views.map.showMonthNames&&
(B=g.offsetWidth,x=a.views.map.placeMonthNamesOnTheBottom?w(g,"div","month-name-bottom",h.monthNames[f]):w(g,"div","month-name",h.monthNames[f],n),v(x)&&(x.style.width=a.views.map.showMonthDayGaps?B+"px":B-Z+"px"));b&&v(Z)&&(0<J&&!a.views.map.showMonthDayGaps?g.style.marginLeft=-Z+"px":0===J&&a.views.map.showMonthDayGaps&&(g.style.marginLeft=Z+"px"));a.views.map.showMonthsInReverseOrder&&S(n);b=!0}a.views.map.showMonthsInReverseOrder&&S(e);a.keepScrollPositions&&(a.currentView.mapContents.scrollLeft=
a.currentView.mapContentsScrollLeft)}a.views.chart.enabled&&(Ya(a,c),a.currentView.chartContents.style.display="none");if(a.views.statistics.enabled){d=c;f=q(a.currentView.statisticsContents,"div","statistics");c=q(a.currentView.statisticsContents,"div","statistics-ranges");g=q(f,"div","y-labels");l=q(f,"div","range-lines");b=ia(a);e={};n=0;J=N(a);for(x=e[r.zero]=0;12>x;x++)for(B=da(a.currentView.year,x),E=0;E<B;E++)F=O(new Date(a.currentView.year,x,E+1)),J.hasOwnProperty(F)&&(G=F.split(r.dash),G=
new Date(G[2],G[1],G[0]),M=sa(G),!ta(a,G).matched&&ca(a.views.statistics.monthsToShow,G.getMonth())&&a.views.statistics.daysToShow.indexOf(M)>L.notFound&&(F=ua(a,b,J[F]),v(F)?(e.hasOwnProperty(F.minimum.toString())||(e[F.minimum.toString()]=0),e[F.minimum]++,n=K.max(n,e[F.minimum])):e[r.zero]++));d&&z(f,"view-switch");0<n&&a.views.statistics.showChartYLabels?(J=w(g,"div","label-0",n.toString()),w(g,"div","label-25",(3*K.floor(n/4)).toString()),w(g,"div","label-50",K.floor(n/2).toString()),w(g,"div",
"label-75",K.floor(n/4).toString()),w(g,"div","label-100",r.zero),g.style.width=J.offsetWidth+"px",c.style.paddingLeft=g.offsetWidth+ja(g,"margin-right",!0)+"px"):g.parentNode.removeChild(g);if(0===n){a.currentView.statisticsContents.style.minHeight=a.currentView.mapContents.offsetHeight+"px";f.parentNode.removeChild(f);c.parentNode.removeChild(c);var T=w(a.currentView.statisticsContents,"div","no-statistics-message",h.noStatisticsDataMessage);d&&z(T,"view-switch")}else{d=a.currentView.mapContents.offsetHeight/
n;a.views.statistics.showColorRangeLabels||c.parentNode.removeChild(c);for(T in e)e.hasOwnProperty(T)&&(Za(T,l,e[T],a,b,d),f=Ga(b,T),a.views.statistics.showColorRangeLabels&&(a.views.statistics.useColorRangeNamesForLabels&&v(f)&&u(f.name)?w(c,"div","range-name",f.name):w(c,"div","range-name",T+r.plus)));a.views.statistics.showInReverseOrder&&(S(l),S(c));a.keepScrollPositions&&(a.currentView.statisticsContents.scrollLeft=a.currentView.statisticsContentsScrollLeft)}a.currentView.statisticsContents.style.display=
"none"}a.currentView.mapContents.style.display="none";1===a.currentView.view?a.currentView.mapContents.style.display="block":a.views.chart.enabled&&2===a.currentView.view?a.currentView.chartContents.style.display="block":a.views.statistics.enabled&&3===a.currentView.view?a.currentView.statisticsContents.style.display="block":(a.currentView.view=1,a.currentView.mapContents.style.display="block")}function Ra(a){a.currentView.configurationDialog=q(a.currentView.disabledBackground,"div","dialog configuration");
var b=q(a.currentView.configurationDialog,"div","dialog-title-bar"),c=q(a.currentView.configurationDialog,"div","dialog-contents"),d=q(b,"div","dialog-close"),e=q(c,"div","side-container panel");c=q(c,"div","side-container panel");w(b,"span","dialog-title-bar-text",h.configurationTitleText);w(e,"div","side-container-title-text",h.visibleDaysText+r.colon);w(c,"div","side-container-title-text",h.visibleMonthsText+r.colon);b=q(c,"div","side-container");c=q(c,"div","side-container");d.onclick=function(){v(a.currentView.disabledBackground)&&
"none"!==a.currentView.disabledBackground.style.display&&(a.currentView.disabledBackground.style.display="none");v(a.currentView.configurationDialog)&&"none"!==a.currentView.configurationDialog.style.display&&(a.currentView.configurationDialog.style.display="none");for(var g=[],l=[],n=!1,x=0;7>x;x++)a.currentView.dayCheckBoxes[x].checked&&g.push(x+1);for(x=0;12>x;x++)a.currentView.monthCheckBoxes[x].checked&&l.push(x+1);1<=g.length&&(1===a.currentView.view?a.views.map.daysToShow=g:a.views.chart.enabled&&
2===a.currentView.view?a.views.chart.daysToShow=g:a.views.statistics.enabled&&3===a.currentView.view?a.views.statistics.daysToShow=g:a.views.map.daysToShow=g,n=!0);1<=l.length&&(1===a.currentView.view?a.views.map.monthsToShow=l:a.views.chart.enabled&&2===a.currentView.view?a.views.chart.monthsToShow=l:a.views.statistics.enabled&&3===a.currentView.view?a.views.statistics.monthsToShow=l:a.views.map.monthsToShow=l,n=!0);n?(A(a),y(a.onOptionsUpdate,a.currentView.element,a)):Y(a)};for(var f=0;7>f;f++)a.currentView.dayCheckBoxes[f]=
va(e,h.dayNames[f]).input;for(e=0;7>e;e++)a.currentView.monthCheckBoxes[e]=va(b,h.monthNames[e]).input;for(e=7;12>e;e++)a.currentView.monthCheckBoxes[e]=va(c,h.monthNames[e]).input;aa(d,a,h.closeToolTipText)}function Sa(a){v(a.currentView.tooltip)||(a.currentView.tooltip=q(H.body,"div","heat-js-tooltip"),a.currentView.tooltip.style.display="none",H.body.addEventListener("mousemove",function(){Y(a)}),H.addEventListener("scroll",function(){Y(a)}))}function aa(a,b,c){null!==a&&(a.onmousemove=function(d){$a(d,
b,c)})}function $a(a,b,c){ea(a);Y(b);b.currentView.tooltipTimer=setTimeout(function(){b.currentView.tooltip.innerHTML=c;b.currentView.tooltip.style.display="block";var d=b.currentView.tooltip,e=a.pageX,f=a.pageY;var g=H.documentElement;var l=(D.pageXOffset||g.scrollLeft)-(g.clientLeft||0);g=(D.pageYOffset||g.scrollTop)-(g.clientTop||0);d.style.display="block";e+d.offsetWidth>D.innerWidth?e-=d.offsetWidth:e++;f+d.offsetHeight>D.innerHeight?f-=d.offsetHeight:f++;e<l&&(e=a.pageX+1);f<g&&(f=a.pageY+1);
d.style.left=e+"px";d.style.top=f+"px"},b.tooltipDelay)}function Y(a){v(a.currentView.tooltip)&&(v(a.currentView.tooltipTimer)&&(clearTimeout(a.currentView.tooltipTimer),a.currentView.tooltipTimer=null),"block"===a.currentView.tooltip.style.display&&(a.currentView.tooltip.style.display="none"))}function Ta(a){if(a.showTitle||a.showYearSelector||a.showRefreshButton||a.showExportButton||a.showImportButton){var b=q(a.currentView.element,"div","title-bar"),c=q(b,"div","title");a.views.chart.enabled||
a.views.statistics.enabled?q(c,"div","down-arrow"):z(c,"no-click");a.showTitle&&(c.innerHTML+=a.titleText);if(a.views.chart.enabled||a.views.statistics.enabled){c=q(c,"div","titles-list");c=q(c,"div","titles");var d=w(c,"div","title",h.mapText);wa(a,d,1,"map");a.views.chart.enabled&&(d=w(c,"div","title",h.chartText),wa(a,d,2,"chart"));a.views.statistics.enabled&&(c=w(c,"div","title",h.statisticsText),wa(a,c,3,"statistics"))}a.showImportButton&&!a.currentView.isInFetchMode&&(w(b,"button","import",
h.importButtonText).onclick=function(){ab(a)});a.showExportButton&&(w(b,"button","export",h.exportButtonText).onclick=function(){Ha(a)});a.showRefreshButton&&(w(b,"button","refresh",h.refreshButtonText).onclick=function(){A(a);y(a.onRefresh,a.currentView.element)});if(a.showYearSelector){c=w(b,"button","back",h.backButtonText);c.onclick=function(){xa(a)};0<a.currentView.yearsAvailable.length&&a.currentView.year<=a.currentView.yearsAvailable[0]&&(c.disabled=!0);a.currentView.yearText=w(b,"div","year-text",
a.currentView.year);if(a.showYearSelectionDropDown){q(a.currentView.yearText,"div","down-arrow");c=q(a.currentView.yearText,"div","years-list");d=q(c,"div","years");var e=(new Date).getFullYear(),f=null;c.style.display="block";c.style.visibility="hidden";for(var g=e-a.extraSelectionYears;g<e+a.extraSelectionYears;g++)if(U(a,g)){var l=bb(a,d,g,e);v(f)||(f=l)}v(f)&&(d.scrollTop=f.offsetTop-d.offsetHeight/2);c.style.display="none";c.style.visibility="visible"}else z(a.currentView.yearText,"no-click");
a.showConfigurationButton&&(c=q(b,"div","configure"),aa(c,a,h.configurationToolTipText),c.onclick=function(){v(a.currentView.disabledBackground)&&"block"!==a.currentView.disabledBackground.style.display&&(a.currentView.disabledBackground.style.display="block");v(a.currentView.configurationDialog)&&"block"!==a.currentView.configurationDialog.style.display&&(a.currentView.configurationDialog.style.display="block");if(1===a.currentView.view){var n=a.views.map.daysToShow;var x=a.views.map.monthsToShow}else a.views.chart.enabled&&
2===a.currentView.view?(n=a.views.chart.daysToShow,x=a.views.chart.monthsToShow):a.views.statistics.enabled&&3===a.currentView.view?(n=a.views.statistics.daysToShow,x=a.views.statistics.monthsToShow):(n=a.views.map.daysToShow,x=a.views.map.monthsToShow);for(var B=0;7>B;B++)a.currentView.dayCheckBoxes[B].checked=n.indexOf(B+1)>L.notFound;for(n=0;12>n;n++)a.currentView.monthCheckBoxes[n].checked=ca(x,n);Y(a)});b=w(b,"button","next",h.nextButtonText);b.onclick=function(){fa(a)};0<a.currentView.yearsAvailable.length&&
a.currentView.year>=a.currentView.yearsAvailable[a.currentView.yearsAvailable.length-1]&&(b.disabled=!0)}}}function wa(a,b,c,d){a.currentView.view===c?z(b,"title-active"):b.onclick=function(){a.currentView.view=c;y(a.onViewSwitch,d);A(a,!1,!0)}}function bb(a,b,c,d){var e=null;b=w(b,"div","year",c);a.currentView.year!==c?(b.onclick=function(){a.currentView.year=c;A(a);y(a.onSetYear,a.currentView.year)},c===d&&z(b,"year-current")):(z(b,"year-active"),e=b);return e}function Va(a,b,c,d,e,f){c+=1;b=q(b,
"div","day");var g=new Date(e,d,c),l=k[a.currentView.element.id].type[a.currentView.type][O(g)];l=V(l,0);Ia(a,b,g,l);a.views.map.showDayNumbers&&0<l&&(b.innerHTML=l.toString());P(a.onDayClick)?b.onclick=function(){y(a.onDayClick,g,l)}:z(b,"no-hover");d=ua(a,f,l,g);v(d)&&ka(a,d.id)&&(u(d.mapCssClassName)?z(b,d.mapCssClassName):z(b,d.cssClassName));return b}function Ya(a,b){var c=q(a.currentView.chartContents,"div","chart"),d=q(c,"div","y-labels"),e=q(c,"div","day-lines"),f=ia(a),g=cb(a),l=a.currentView.year,
n=0;b&&z(c,"view-switch");if(0<g&&a.views.chart.showChartYLabels){var x=w(d,"div","label-0",g.toString());w(d,"div","label-25",(3*K.floor(g/4)).toString());w(d,"div","label-50",K.floor(g/2).toString());w(d,"div","label-75",K.floor(g/4).toString());w(d,"div","label-100",r.zero);d.style.width=x.offsetWidth+"px";n=d.offsetWidth+ja(d,"margin-right",!0)}else d.parentNode.removeChild(d),d=null;if(0===g)a.currentView.chartContents.style.minHeight=a.currentView.mapContents.offsetHeight+"px",c.parentNode.removeChild(c),
e=w(a.currentView.chartContents,"div","no-data-message",h.noChartDataMessage),b&&z(e,"view-switch");else{b=a.currentView.mapContents.offsetHeight/g;for(g=d=c=0;12>g;g++)if(ca(a.views.chart.monthsToShow,g)){x=da(l,g);var B=1;c++;for(var E=0;E<x;E++)a.views.chart.daysToShow.indexOf(B)>L.notFound&&db(e,a,E+1,g,l,f,b),0===(E+1)%7&&(B=0),B++,d++}a.views.chart.showInReverseOrder&&S(e);if(a.views.chart.showMonthNames){var J=q(a.currentView.chartContents,"div","chart-months"),F=e.offsetWidth/c,G=0;f=function(M){ca(a.views.chart.monthsToShow,
M)&&(w(J,"div","month-name",h.monthNames[M]).style.left=n+F*G+"px",G++)};if(a.views.chart.showInReverseOrder)for(l=12;l--;)f(l);else for(l=0;12>l;l++)f(l);J.style.width=e.offsetWidth+"px";e=q(J,"div","month-name-space");e.style.height=J.offsetHeight+"px";e.style.width=n+"px"}a.keepScrollPositions&&(a.currentView.chartContents.scrollLeft=a.currentView.chartContentsScrollLeft)}}function db(a,b,c,d,e,f,g){var l=new Date(e,d,c);a=q(a,"div","day-line");var n=N(b)[O(l)];n=V(n,0);Ia(b,a,l,n);b.views.chart.showLineNumbers&&
0<n&&(z(a,"day-line-number"),a.innerHTML=n.toString());g*=n;a.style.height=g+"px";0>=g&&(a.style.visibility="hidden");P(b.onDayClick)?a.onclick=function(){y(b.onDayClick,l,n)}:z(a,"no-hover");f=ua(b,f,n,l);v(f)&&ka(b,f.id)&&(u(f.chartCssClassName)?z(a,f.chartCssClassName):z(a,f.cssClassName))}function cb(a){for(var b=0,c=N(a),d=0;12>d;d++)for(var e=da(a.currentView.year,d),f=0;f<e;f++){var g=O(new Date(a.currentView.year,d,f+1));c.hasOwnProperty(g)&&(b=K.max(b,parseInt(c[g])))}return b}function Za(a,
b,c,d,e,f){b=q(b,"div","range-line");var g=Ga(e,a);a=c*f;b.style.height=a+"px";0>=a&&(b.style.visibility="hidden");aa(b,d,c.toString());d.views.statistics.showRangeNumbers&&0<c&&(z(b,"range-line-number"),w(b,"div","count",c));P(d.onStatisticClick)?b.onclick=function(){y(d.onStatisticClick,g)}:z(b,"no-hover");v(g)&&ka(d,g.id)&&(u(g.statisticsCssClassName)?z(b,g.statisticsCssClassName):z(b,g.cssClassName))}function Ua(a){var b=q(a.currentView.element,"div","guide"),c=q(b,"div","map-types"),d=0;for(e in k[a.currentView.element.id].type[h.unknownTrendText])if(k[a.currentView.element.id].type[h.unknownTrendText].hasOwnProperty(e)){d++;
break}if(1<k[a.currentView.element.id].types){if(u(a.descriptionText)){var e=q(a.currentView.element,"div","description",b);Ja(a,e)}for(var f in k[a.currentView.element.id].type)if(f!==h.unknownTrendText||0<d)0===d&&a.currentView.type===h.unknownTrendText&&(a.currentView.type=f),eb(a,c,f)}else Ja(a,c);if(a.showGuide){b=q(b,"div","map-toggles");a.showLessAndMoreLabels&&(c=w(b,"div","less-text",h.lessText),a.colorRangeTogglesEnabled?c.onclick=function(){Ka(a,!1)}:z(c,"no-click"));c=q(b,"div","days");
d=ia(a);f=d.length;for(e=0;e<f;e++)fb(a,c,d[e]);a.showLessAndMoreLabels&&(b=w(b,"div","more-text",h.moreText),a.colorRangeTogglesEnabled?b.onclick=function(){Ka(a,!0)}:z(b,"no-click"))}}function eb(a,b,c){b=w(b,"button","type",c);a.currentView.type===c&&z(b,"active");b.onclick=function(){a.currentView.type!==c&&(a.currentView.type=c,y(a.onTypeSwitch,c),A(a))}}function fb(a,b,c){b=q(b,"div");b.className="day";aa(b,a,c.tooltipText);ka(a,c.id)&&(1===a.currentView.view&&u(c.mapCssClassName)?z(b,c.mapCssClassName):
a.views.chart.enabled&&2===a.currentView.view&&u(c.chartCssClassName)?z(b,c.chartCssClassName):a.views.statistics.enabled&&3===a.currentView.view&&u(c.statisticsCssClassName)?z(b,c.statisticsCssClassName):z(b,c.cssClassName));a.showNumbersInGuide&&(z(b,"day-number"),b.innerHTML=c.minimum+r.plus);a.colorRangeTogglesEnabled?b.onclick=function(){for(var d=c.id,e=a.colorRanges.length,f=0;f<e;f++){var g=a.colorRanges[f];if(g.id===d){g.visible=!(ya(g.visible)&&g.visible);y(a.onColorRangeTypeToggle,g.id,
g.visible);A(a);break}}}:z(b,"no-hover")}function Ja(a,b){u(a.descriptionText)&&(u(a.descriptionTextLink)?(b=w(b,"a","label",a.descriptionText),b.href=a.descriptionTextLink,b.target="_blank"):w(b,"span","label",a.descriptionText))}function Ia(a,b,c,d){if(P(a.onDayToolTipRender))aa(b,a,y(a.onDayToolTipRender,c,d));else{d=a.dayToolTipText;var e=sa(c);d=d.replace("{dddd}",h.dayNames[e]);d=d.replace("{dd}",Q(c.getDate()));d=d.replace("{d}",c.getDate());e=d.replace;var f=c.getDate(),g=h.thText;if(31===
f||21===f||1===f)g=h.stText;else if(22===f||2===f)g=h.ndText;else if(23===f||3===f)g=h.rdText;d=e.call(d,"{o}",g);d=d.replace("{mmmm}",h.monthNames[c.getMonth()]);d=d.replace("{mm}",Q(c.getMonth()+1));d=d.replace("{m}",c.getMonth()+1);d=d.replace("{yyyy}",c.getFullYear());d=d.replace("{yyy}",c.getFullYear().toString().substring(1));d=d.replace("{yy}",c.getFullYear().toString().substring(2));d=d.replace("{y}",parseInt(c.getFullYear().toString().substring(2)).toString());a.showHolidaysInDayToolTips&&
(c=ta(a,c),c.matched&&u(c.name)&&(d+=r.colon+r.space+c.name));aa(b,a,d)}}function qa(a,b,c){c=p(c,!0);k[a]={options:b,type:{},types:1};k[a].type[h.unknownTrendText]={};if(c&&!b.currentView.isInFetchMode&&b.useLocalStorageForData&&D.localStorage)for(a=D.localStorage.length,b=b.currentView.element.id,c=0;c<a;c++){var d=D.localStorage.key(c);if(Fa(d,"HJS_")&&(d=D.localStorage.getItem(d),d=pa(d),d.parsed)){k[b].type=d.result;k[b].types=0;for(var e in k[b].type)k[b].type.hasOwnProperty(e)&&k[b].types++}}}
function N(a){return k[a.currentView.element.id].type[a.currentView.type]}function ca(a,b){return a.indexOf(b+1)>L.notFound}function Pa(a){var b=[];if(a.showOnlyDataForYearsAvailable){a=N(a);for(var c in a)if(a.hasOwnProperty(c)){var d=parseInt(c.split(r.dash)[0]);b.indexOf(d)===L.notFound&&b.push(d)}}return b=b.sort(function(e,f){return e-f})}function U(a,b){return a.yearsToHide.indexOf(b)===L.notFound&&(0===a.currentView.yearsAvailable.length||a.currentView.yearsAvailable.indexOf(b)>L.notFound)}
function Qa(a){a.currentView.isInFetchMode&&(v(a.currentView.isInFetchModeTimer)||La(a),v(a.currentView.isInFetchModeTimer)||(a.currentView.isInFetchModeTimer=setInterval(function(){La(a);A(a)},a.dataFetchDelay)))}function La(a){var b=a.currentView.element.id,c=y(a.onDataFetch,b);if(I(c)){qa(b,a,!1);for(var d in c)c.hasOwnProperty(d)&&(k[b].type[h.unknownTrendText].hasOwnProperty(d)||(k[b].type[h.unknownTrendText][d]=0),k[b].type[h.unknownTrendText][d]+=c[d])}}function ka(a,b){var c=!1;if("HOLIDAY"===
b)c=!0;else for(var d=a.colorRanges.length,e=0;e<d;e++){var f=a.colorRanges[e];if(f.id===b&&(!ya(f.visible)||f.visible)){c=!0;break}}return c}function Ka(a,b){for(var c=a.colorRanges.length,d=0;d<c;d++)a.colorRanges[d].visible=b,y(a.onColorRangeTypeToggle,a.colorRanges[d].id,b);A(a)}function ua(a,b,c,d){var e=null;v(d)&&ta(a,d).matched&&(e={cssClassName:"holiday",id:"HOLIDAY",visible:!0});if(!v(e))for(a=b.length,d=0;d<a;d++){var f=b[d];if(c>=f.minimum)e=f;else break}return e}function Ga(a,b){for(var c=
a.length,d=null,e=0;e<c;e++){var f=a[e];if(b.toString()===f.minimum.toString()){d=f;break}}return d}function ia(a){return a.colorRanges.sort(function(b,c){return b.minimum-c.minimum})}function ta(a,b){var c=a.holidays.length,d=!1,e=null,f=b.getDate(),g=b.getMonth()+1;b=b.getFullYear();for(var l=0;l<c;l++){var n=a.holidays[l];if(u(n.date)&&n.showInViews){var x=n.date.split("/");2===x.length?d=f===parseInt(x[0])&&g===parseInt(x[1]):3===x.length&&(d=f===parseInt(x[0])&&g===parseInt(x[1])&&b===parseInt(x[2]));
if(d){e=n.name;break}}}return{matched:d,name:e}}function ra(a,b){b.allowFileImports&&!b.currentView.isInFetchMode&&(a.ondragover=ea,a.ondragenter=ea,a.ondragleave=ea,a.ondrop=function(c){ea(c);v(D.FileReader)&&0<c.dataTransfer.files.length&&Ma(c.dataTransfer.files,b)})}function ab(a){var b=gb("input");b.type="file";b.accept=".json, .txt, .csv";b.multiple="multiple";b.onchange=function(){Ma(b.files,a)};b.click()}function Ma(a,b){for(var c=a.length,d=[],e=N(b),f=function(x,B){d.push(x);for(var E in B)B.hasOwnProperty(E)&&
(e.hasOwnProperty(E)||(e[E]=0),e[E]+=B[E]);d.length===c&&(y(b.onImport,b.currentView.element),A(b))},g=0;g<c;g++){var l=a[g],n=l.name.split(".").pop().toLowerCase();"json"===n?hb(l,f):"txt"===n?ib(l,f):"csv"===n&&jb(l,f)}}function hb(a,b){var c=new FileReader,d=null;c.readAsText(a);c.onloadend=function(){b(a.name,d)};c.onload=function(e){e=pa(e.target.result);e.parsed&&I(e.result)&&(d=e.result)}}function ib(a,b){var c=new FileReader,d={};c.readAsText(a);c.onloadend=function(){b(a.name,d)};c.onload=
function(e){e=e.target.result.toString().split(r.newLine);for(var f=e.length,g=0;g<f;g++){var l=e[g].split(r.colon);d[l[0].trim()]=parseInt(l[1].trim())}}}function jb(a,b){var c=new FileReader,d={};c.readAsText(a);c.onloadend=function(){b(a.name,d)};c.onload=function(e){e=e.target.result.toString().replace(RegExp('"',"g"),r.empty).split(r.newLine);e.shift();for(var f=e.length,g=0;g<f;g++){var l=e[g].split(r.comma);d[l[0].trim()]=parseInt(l[1].trim())}}}function Ha(a,b){var c=null;var d=null;"csv"===
a.exportType.toLowerCase()?d="text/csv":"json"===a.exportType.toLowerCase()?d="application/json":"xml"===a.exportType.toLowerCase()?d="application/xml":"txt"===a.exportType.toLowerCase()&&(d="text/plain");b=t(b,a.exportType).toLowerCase();if("csv"===b){var e=la(a),f=[];for(g in e)e.hasOwnProperty(g)&&f.push([ma(g),ma(e[g])].join());0<f.length&&f.unshift([ma(h.dateText),ma(h.countText)].join());c=f.join(r.newLine)}else if("json"===b)c=ha.stringify(la(a));else if("xml"===b){var g=la(a);f=[];f.push('<?xml version="1.0" ?>');
f.push("<Dates>");for(e in g)g.hasOwnProperty(e)&&(f.push("<Date>"),f.push("<FullDate>"+e+"</FullDate>"),f.push("<Count>"+g[e]+"</Count>"),f.push("</Date>"));f.push("</Dates>");c=f.join(r.newLine)}else if("txt"===b){g=la(a);e=[];for(f in g)g.hasOwnProperty(f)&&e.push(f+r.colon+r.space+g[f].toString());c=e.join(r.newLine)}u(c)&&(g=q(H.body,"a"),g.style.display="none",g.setAttribute("target","_blank"),g.setAttribute("href","data:"+d+";charset=utf-8,"+encodeURIComponent(c)),d=g.setAttribute,f=new Date,
e=Q(f.getDate())+r.dash+Q(f.getMonth()+1)+r.dash+f.getFullYear(),f=Q(f.getHours())+r.dash+Q(f.getMinutes()),c=r.empty,a.currentView.type!==h.unknownTrendText&&(c=a.currentView.type.toLowerCase().replace(r.space,r.underscore)+r.underscore),e=c+e+r.underscore+f+"."+a.exportType.toLowerCase(),d.call(g,"download",e),g.click(),H.body.removeChild(g),y(a.onExport,a.currentView.element))}function la(a){var b={},c=N(a);if(a.exportOnlyYearBeingViewed)for(var d=0;12>d;d++)for(var e=da(a.currentView.year,d),
f=0;f<e;f++){var g=O(new Date(a.currentView.year,d,f+1));c.hasOwnProperty(g)&&(b[g]=c[g])}else{a=[];for(d in c)c.hasOwnProperty(d)&&a.push(d);a.sort();d=a.length;for(e=0;e<d;e++)f=a[e],c.hasOwnProperty(f)&&(b[f]=c[f])}return b}function ma(a){a=a.toString().replace(/(\r\n|\n|\r)/gm,r.empty).replace(/(\s\s)/gm,r.space);a=a.replace(/"/g,'""');return'"'+a+'"'}function Ea(a){a=I(a)?a:{};a.views=I(a.views)?a.views:{};a.showGuide=p(a.showGuide,!0);a.showTitle=p(a.showTitle,!0);a.showYearSelector=p(a.showYearSelector,
!0);a.showRefreshButton=p(a.showRefreshButton,!1);a.showExportButton=p(a.showExportButton,!1);a.colorRangeTogglesEnabled=p(a.colorRangeTogglesEnabled,!0);a.exportOnlyYearBeingViewed=p(a.exportOnlyYearBeingViewed,!0);a.year=V(a.year,(new Date).getFullYear());a.keepScrollPositions=p(a.keepScrollPositions,!1);a.extraSelectionYears=V(a.extraSelectionYears,50);a.showYearSelectionDropDown=p(a.showYearSelectionDropDown,!0);a.view=t(a.view,"map");a.tooltipDelay=V(a.tooltipDelay,750);a.exportType=t(a.exportType,
"csv");a.descriptionText=t(a.descriptionText,null);a.descriptionTextLink=t(a.descriptionTextLink,null);a.useLocalStorageForData=p(a.useLocalStorageForData,!1);a.allowFileImports=p(a.allowFileImports,!0);var b=a;var c=a.yearsToHide;var d=[];c=W(c)?c:d;b.yearsToHide=c;a.showLessAndMoreLabels=p(a.showLessAndMoreLabels,!0);a.showNumbersInGuide=p(a.showNumbersInGuide,!1);a.showImportButton=p(a.showImportButton,!1);a.dataFetchDelay=V(a.dataFetchDelay,6E4);a.showOnlyDataForYearsAvailable=p(a.showOnlyDataForYearsAvailable,
!1);a.showHolidaysInDayToolTips=p(a.showHolidaysInDayToolTips,!1);a.showConfigurationButton=p(a.showConfigurationButton,!0);if(W(a.colorRanges))for(b=a.colorRanges.length,c=0;c<b;c++)d=a.colorRanges[c],d.id=t(d.id,X()),d.name=t(d.name,null),d.minimum=V(d.minimum,0),d.cssClassName=t(d.cssClassName,null),d.mapCssClassName=t(d.mapCssClassName,null),d.chartCssClassName=t(d.chartCssClassName,null),d.statisticsCssClassName=t(d.statisticsCssClassName,null),d.tooltipText=t(d.tooltipText,null),d.visible=p(d.visible,
!0);else a.colorRanges=[{id:X(),name:"Day Color 1",minimum:10,cssClassName:"day-color-1",tooltipText:"Day Color 1",visible:!0},{id:X(),name:"Day Color 2",minimum:15,cssClassName:"day-color-2",tooltipText:"Day Color 2",visible:!0},{id:X(),name:"Day Color 3",minimum:20,cssClassName:"day-color-3",tooltipText:"Day Color 3",visible:!0},{id:X(),name:"Day Color 4",minimum:25,cssClassName:"day-color-4",tooltipText:"Day Color 4",visible:!0}];if(W(a.holidays))for(b=a.holidays.length,c=0;c<b;c++)d=a.holidays[c],
d.date=t(d.date,null),d.name=t(d.name,null),d.showInViews=p(d.showInViews,!0);else a.holidays=[];a.views.map=I(a.views.map)?a.views.map:{};a.views.map.showMonthDayGaps=p(a.views.map.showMonthDayGaps,!0);a.views.map.showDayNames=p(a.views.map.showDayNames,!0);a.views.map.placeMonthNamesOnTheBottom=p(a.views.map.placeMonthNamesOnTheBottom,!1);a.views.map.showDayNumbers=p(a.views.map.showDayNumbers,!1);a.views.map.showMonthNames=p(a.views.map.showMonthNames,!0);a.views.map.showDaysInReverseOrder=p(a.views.map.showDaysInReverseOrder,
!1);a.views.map.showNoDataMessageWhenDataIsNotAvailable=p(a.views.map.showNoDataMessageWhenDataIsNotAvailable,!1);a.views.map.showMinimalDayNames=p(a.views.map.showMinimalDayNames,!1);a.views.map.showMonthsInReverseOrder=p(a.views.map.showMonthsInReverseOrder,!1);R(a.views.map.monthsToShow)&&(a.views.map.monthsToShow=za);R(a.views.map.daysToShow)&&(a.views.map.daysToShow=Aa);a.views.chart=I(a.views.chart)?a.views.chart:{};a.views.chart.enabled=p(a.views.chart.enabled,!0);a.views.chart.showChartYLabels=
p(a.views.chart.showChartYLabels,!0);a.views.chart.showMonthNames=p(a.views.chart.showMonthNames,!0);a.views.chart.showLineNumbers=p(a.views.chart.showLineNumbers,!1);a.views.chart.showInReverseOrder=p(a.views.chart.showInReverseOrder,!1);R(a.views.chart.monthsToShow)&&(a.views.chart.monthsToShow=za);R(a.views.chart.daysToShow)&&(a.views.chart.daysToShow=Aa);a.views.statistics=I(a.views.statistics)?a.views.statistics:{};a.views.statistics.enabled=p(a.views.statistics.enabled,!0);a.views.statistics.showChartYLabels=
p(a.views.statistics.showChartYLabels,!0);a.views.statistics.showColorRangeLabels=p(a.views.statistics.showColorRangeLabels,!0);a.views.statistics.useColorRangeNamesForLabels=p(a.views.statistics.useColorRangeNamesForLabels,!1);a.views.statistics.showRangeNumbers=p(a.views.statistics.showRangeNumbers,!1);a.views.statistics.showInReverseOrder=p(a.views.statistics.showInReverseOrder,!1);R(a.views.statistics.monthsToShow)&&(a.views.statistics.monthsToShow=za);R(a.views.statistics.daysToShow)&&(a.views.statistics.daysToShow=
Aa);a.titleText=t(a.titleText,"Heat.js");a.dayToolTipText=t(a.dayToolTipText,"{d}{o} {mmmm} {yyyy}");a.onDayClick=C(a.onDayClick,null);a.onBackYear=C(a.onBackYear,null);a.onNextYear=C(a.onNextYear,null);a.onRefresh=C(a.onRefresh,null);a.onBeforeRender=C(a.onBeforeRender,null);a.onRenderComplete=C(a.onRenderComplete,null);a.onDestroy=C(a.onDestroy,null);a.onExport=C(a.onExport,null);a.onSetYear=C(a.onSetYear,null);a.onTypeSwitch=C(a.onTypeSwitch,null);a.onDayToolTipRender=C(a.onDayToolTipRender,null);
a.onAdd=C(a.onAdd,null);a.onRemove=C(a.onRemove,null);a.onReset=C(a.onReset,null);a.onViewSwitch=C(a.onViewSwitch,null);a.onColorRangeTypeToggle=C(a.onColorRangeTypeToggle,null);a.onImport=C(a.onImport,null);a.onStatisticClick=C(a.onStatisticClick,null);a.onDataFetch=C(a.onDataFetch,null);a.onClear=C(a.onClear,null);a.onUpdate=C(a.onUpdate,null);a.onOptionsUpdate=C(a.onOptionsUpdate,null);return a}function da(a,b){return(new Date(a,b+1,0)).getDate()}function sa(a){return 0>a.getDay()-1?6:a.getDay()-
1}function v(a){return null!==a&&void 0!==a&&a!==r.empty}function I(a){return v(a)&&"object"===typeof a}function ya(a){return v(a)&&"boolean"===typeof a}function u(a){return v(a)&&"string"===typeof a}function P(a){return v(a)&&"function"===typeof a}function na(a){return v(a)&&"number"===typeof a}function W(a){return I(a)&&a instanceof Array}function oa(a){return I(a)&&a instanceof Date}function gb(a){a=a.toLowerCase();var b="text"===a;ba.hasOwnProperty(a)||(ba[a]=b?H.createTextNode(r.empty):H.createElement(a));
return ba[a].cloneNode(!1)}function q(a,b,c,d){b=b.toLowerCase();var e="text"===b;ba.hasOwnProperty(b)||(ba[b]=e?H.createTextNode(r.empty):H.createElement(b));b=ba[b].cloneNode(!1);v(c)&&(b.className=c);v(d)?a.insertBefore(b,d):a.appendChild(b);return b}function w(a,b,c,d,e){a=q(a,b,c,e);a.innerHTML=d;return a}function ja(a,b,c){var d=null;c=p(c,!1);D.getComputedStyle?d=H.defaultView.getComputedStyle(a,null).getPropertyValue(b):a.currentStyle&&(d=a.currentStyle[b]);c&&(d=parseFloat(d,10));return d}
function z(a,b){a.className+=r.space+b;a.className=a.className.trim()}function ea(a){a.preventDefault();a.cancelBubble=!0}function S(a){for(var b=a.children,c=b.length-1;c--;)a.appendChild(b[c])}function va(a,b,c,d){a=q(a,"div");a=q(a,"label","checkbox");var e=q(a,"input");e.type="checkbox";v(d)&&(e.onclick=d);v(c)&&(e.checked=c);q(a,"span","check-mark");w(a,"span","text",b);return{input:e,label:a}}function y(a){var b=null;P(a)&&(b=a.apply(null,[].slice.call(arguments,1)));return b}function t(a,b){return u(a)?
a:b}function p(a,b){return ya(a)?a:b}function C(a,b){return P(a)?a:b}function V(a,b){return na(a)?a:b}function pa(a){var b=!0,c=null;try{u(a)&&(c=ha.parse(a))}catch(d){try{c=eval("("+a+")"),P(c)&&(c=c())}catch(e){h.safeMode||(console.error(h.objectErrorText.replace("{{error_1}}",d.message).replace("{{error_2}}",e.message)),b=!1),c=null}}return{parsed:b,result:c}}function X(){for(var a=[],b=0;32>b;b++){8!==b&&12!==b&&16!==b&&20!==b||a.push(r.dash);var c=K.floor(16*K.random()).toString(16);a.push(c)}return a.join(r.empty)}
function Q(a){a=a.toString();return 1===a.length?r.zero+a:a}function Fa(a,b){return a.substring(0,b.length).toLowerCase()===b.toLowerCase()}function O(a){return a.getFullYear()+r.dash+Q(a.getMonth()+1)+r.dash+Q(a.getDate())}function xa(a,b){b=p(b,!0);var c=!0,d=a.currentView.year;for(d--;!U(a,d);){if(0<a.currentView.yearsAvailable.length&&d<=a.currentView.yearsAvailable[0]){c=!1;break}d--}c&&(a.currentView.year=d,A(a),b&&y(a.onBackYear,a.currentView.year))}function fa(a,b){b=p(b,!0);var c=!0,d=a.currentView.year;
for(d++;!U(a,d);){if(0<a.currentView.yearsAvailable.length&&d>=a.currentView.yearsAvailable[a.currentView.yearsAvailable.length-1]){c=!1;break}d++}c&&(a.currentView.year=d,A(a),b&&y(a.onBackYear,a.currentView.year))}function Na(a){a.currentView.element.innerHTML=r.empty;var b=a.currentView.element;b.className=b.className.replace("heat-js",r.empty);b.className=b.className.trim();H.body.removeChild(a.currentView.tooltip);a.currentView.isInFetchMode&&v(a.currentView.isInFetchModeTimer)&&clearInterval(a.currentView.isInFetchModeTimer);
y(a.onDestroy,a.currentView.element)}function Oa(a){h=I(a)?a:{};h.safeMode=p(h.safeMode,!0);a=h;var b=h.domElementTypes,c=["*"];u(b)?(b=b.split(r.space),0===b.length&&(b=c)):b=W(b)?b:c;a.domElementTypes=b;h.stText=t(h.stText,"st");h.ndText=t(h.ndText,"nd");h.rdText=t(h.rdText,"rd");h.thText=t(h.thText,"th");h.backButtonText=t(h.backButtonText,"Back");h.nextButtonText=t(h.nextButtonText,"Next");h.refreshButtonText=t(h.refreshButtonText,"Refresh");h.exportButtonText=t(h.exportButtonText,"Export");h.lessText=
t(h.lessText,"Less");h.moreText=t(h.moreText,"More");h.dateText=t(h.dateText,"Date");h.countText=t(h.countText,"Count");h.mapText=t(h.mapText,"Map");h.chartText=t(h.chartText,"Chart");h.noChartDataMessage=t(h.noChartDataMessage,"There is currently no data to view.");h.statisticsText=t(h.statisticsText,"Statistics");h.noStatisticsDataMessage=t(h.noStatisticsDataMessage,"There are currently no statistics to view.");h.unknownTrendText=t(h.unknownTrendText,"Unknown");h.importButtonText=t(h.importButtonText,
"Import");h.noMapDataMessage=t(h.noMapDataMessage,"There is currently no data to view.");h.objectErrorText=t(h.objectErrorText,"Errors in object: {{error_1}}, {{error_2}}");h.attributeNotValidErrorText=t(h.attributeNotValidErrorText,"The attribute '{{attribute_name}}' is not a valid object.");h.attributeNotSetErrorText=t(h.attributeNotSetErrorText,"The attribute '{{attribute_name}}' has not been set correctly.");h.closeToolTipText=t(h.closeToolTipText,"Close");h.configurationToolTipText=t(h.configurationToolTipText,
"Configuration");h.configurationTitleText=t(h.configurationTitleText,"Configuration");h.visibleMonthsText=t(h.visibleMonthsText,"Visible Months");h.visibleDaysText=t(h.visibleDaysText,"Visible Days");R(h.monthNames,12)&&(h.monthNames="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "));R(h.dayNames,7)&&(h.dayNames="Mon Tue Wed Thu Fri Sat Sun".split(" "))}function R(a,b){b=na(b)?b:1;return!W(a)||a.length<b}var H=null,D=null,K=null,ha=null,m={},h={},r={empty:"",space:" ",newLine:"\n",dash:"-",
underscore:"_",plus:"+",zero:"0",colon:":",comma:","},L={notFound:-1},za=[1,2,3,4,5,6,7,8,9,10,11,12],Aa=[1,2,3,4,5,6,7],ba={},Z=null,k={};m.addDates=function(a,b,c,d){if(u(a)&&W(b)&&k.hasOwnProperty(a)){var e=k[a].options;if(!e.currentView.isInFetchMode){c=t(c,h.unknownTrendText);d=p(d,!0);for(var f=b.length,g=0;g<f;g++)m.addDate(a,b[g],c,!1);d&&A(e,!0)}}return m};m.addDate=function(a,b,c,d){if(u(a)&&oa(b)&&k.hasOwnProperty(a)){var e=k[a].options;e.currentView.isInFetchMode||(c=t(c,h.unknownTrendText),
d=p(d,!0),b=O(b),k[a].type.hasOwnProperty(c)||(k[a].type[c]={},k[a].types++),k[a].type[c].hasOwnProperty(b)||(k[a].type[c][b]=0),k[a].type[c][b]++,y(e.onAdd,e.currentView.element),d&&A(e,!0))}return m};m.updateDate=function(a,b,c,d,e){if(u(a)&&oa(b)&&k.hasOwnProperty(a)){var f=k[a].options;!f.currentView.isInFetchMode&&0<c&&(d=t(d,h.unknownTrendText),b=O(b),k[a].type.hasOwnProperty(d)&&(e=p(e,!0),k[a].type[d][b]=c,y(f.onUpdate,f.currentView.element),e&&A(f,!0)))}return m};m.removeDates=function(a,
b,c,d){if(u(a)&&W(b)&&k.hasOwnProperty(a)){var e=k[a].options;if(!e.currentView.isInFetchMode){c=t(c,h.unknownTrendText);d=p(d,!0);for(var f=b.length,g=0;g<f;g++)m.removeDate(a,b[g],c,!1);d&&A(e,!0)}}return m};m.removeDate=function(a,b,c,d){if(u(a)&&oa(b)&&k.hasOwnProperty(a)){var e=k[a].options;e.currentView.isInFetchMode||(c=t(c,h.unknownTrendText),b=O(b),k[a].type.hasOwnProperty(c)&&k[a].type[c].hasOwnProperty(b)&&(d=p(d,!0),0<k[a].type[c][b]&&k[a].type[c][b]--,y(e.onRemove,e.currentView.element),
d&&A(e,!0)))}return m};m.clearDate=function(a,b,c,d){if(u(a)&&oa(b)&&k.hasOwnProperty(a)){var e=k[a].options;e.currentView.isInFetchMode||(c=t(c,h.unknownTrendText),b=O(b),k[a].type.hasOwnProperty(c)&&k[a].type[c].hasOwnProperty(b)&&(d=p(d,!0),delete k[a].type[c][b],y(e.onClear,e.currentView.element),d&&A(e,!0)))}return m};m.resetAll=function(a){for(var b in k)k.hasOwnProperty(b)&&m.reset(b,a);return m};m.reset=function(a,b){if(u(a)&&k.hasOwnProperty(a)){var c=k[a].options;c.currentView.isInFetchMode||
(b=p(b,!0),c.currentView.type=h.unknownTrendText,qa(a,c,!1),y(c.onReset,c.currentView.element),b&&A(c,!0))}return m};m.export=function(a,b){u(a)&&k.hasOwnProperty(a)&&Ha(k[a].options,b);return m};m.refresh=function(a){u(a)&&k.hasOwnProperty(a)&&(a=k[a].options,A(a,!0),y(a.onRefresh,a.currentView.element));return m};m.refreshAll=function(){for(var a in k)if(k.hasOwnProperty(a)){var b=k[a].options;A(b,!0);y(b.onRefresh,b.currentView.element)}return m};m.setYear=function(a,b){u(a)&&na(b)&&k.hasOwnProperty(a)&&
(a=k[a].options,a.currentView.year=b,U(a,a.currentView.year)?A(a):fa(a,!1),y(a.onSetYear,a.currentView.year));return m};m.setYearToHighest=function(a){if(u(a)&&k.hasOwnProperty(a)){a=k[a].options;var b=N(a),c=0,d;for(d in b)b.hasOwnProperty(d)&&(c=K.max(c,parseInt(d.split(r.dash)[0])));0<c&&(a.currentView.year=c,U(a,a.currentView.year)?A(a):fa(a,!1),y(a.onSetYear,a.currentView.year))}return m};m.setYearToLowest=function(a){if(u(a)&&k.hasOwnProperty(a)){a=k[a].options;var b=N(a),c=9999,d;for(d in b)b.hasOwnProperty(d)&&
(c=K.min(c,parseInt(d.split(r.dash)[0])));9999>c&&(a.currentView.year=c,U(a,a.currentView.year)?A(a):xa(a,!1),y(a.onSetYear,a.currentView.year))}return m};m.moveToPreviousYear=function(a){u(a)&&k.hasOwnProperty(a)&&xa(k[a].options);return m};m.moveToNextYear=function(a){u(a)&&k.hasOwnProperty(a)&&fa(k[a].options);return m};m.moveToCurrentYear=function(a){u(a)&&k.hasOwnProperty(a)&&(a=k[a].options,a.currentView.year=(new Date).getFullYear(),U(a,a.currentView.year)?A(a):fa(a,!1),y(a.onSetYear,a.currentView.year));
return m};m.getYear=function(a){var b=null;u(a)&&k.hasOwnProperty(a)&&(b=k[a].options.currentView.year);return b};m.render=function(a,b){I(a)&&I(b)&&Ca(Da(b,a));return m};m.renderAll=function(){Ba();return m};m.switchView=function(a,b){if(u(a)&&u(b)&&k.hasOwnProperty(a)){a=k[a].options;var c=null;"map"===b.toLowerCase()?c=1:"chart"===b.toLowerCase()?c=2:"statistics"===b.toLowerCase()&&(c=3);na(c)&&(a.currentView.view=c,y(a.onViewSwitch,b),A(a,!1,!0))}return m};m.switchType=function(a,b){u(a)&&u(b)&&
k.hasOwnProperty(a)&&k[a].type.hasOwnProperty(b)&&(a=k[a].options,a.currentView.type!==b&&(a.currentView.type=b,y(a.onTypeSwitch,b),A(a)));return m};m.updateOptions=function(a,b){if(u(a)&&I(b)&&k.hasOwnProperty(a)){a=k[a].options;b=Ea(b);var c=!1,d;for(d in b)b.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!==b[d]&&(a[d]=b[d],c=!0);c&&(A(a,!0),y(a.onRefresh,a.currentView.element),y(a.onOptionsUpdate,a.currentView.element,a))}return m};m.destroyAll=function(){for(var a in k)k.hasOwnProperty(a)&&Na(k[a].options);
k={};return m};m.destroy=function(a){u(a)&&k.hasOwnProperty(a)&&(Na(k[a].options),delete k[a]);return m};m.setConfiguration=function(a,b){if(I(a)){var c=!1,d;for(d in a)a.hasOwnProperty(d)&&h.hasOwnProperty(d)&&h[d]!==a[d]&&(h[d]=a[d],c=!0);c&&(b=p(b,!0),Oa(h),b&&m.refreshAll())}return m};m.getIds=function(){var a=[],b;for(b in k)k.hasOwnProperty(b)&&a.push(b);return a};m.getVersion=function(){return"3.0.0"};(function(a,b,c,d){H=a;D=b;K=c;ha=d;Oa();H.addEventListener("DOMContentLoaded",function(){Ba()});
D.addEventListener("pagehide",function(){for(var e in k)if(k.hasOwnProperty(e)){var f=k[e].options;v(f.currentView.isInFetchModeTimer)&&clearInterval(f.currentView.isInFetchModeTimer)}});v(D.$heat)||(D.$heat=m)})(document,window,Math,JSON)})();